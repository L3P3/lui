'use strict';function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function e(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function g(a){if(!(a instanceof Array)){a=e(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}function h(){for(var a=Number(this),b=[],c=a;c<arguments.length;c++)b[c-a]=arguments[c];return b};/*
 lui.js web frame work 1.3.1
 inspired by react and mithril
 L3P3.de 2022
*/
(function(){var k=null,q=!k,t=k,u=0,v=0,w=0,z=q,A=[],D=[],E={},ba={},ca={},da=[],ea={},F=[],G=k,H=q,J=!q,fa=/[A-Z]/g,K=Array,ha=Object,ia=ha.assign,L=ha.keys,ja=document,ka=window,la=ka.performance||Date;function ma(a){a=a.s.A;return a===M?"list":a.name_||a.name||"?"}
function N(){var a=[],b=t,c=G;if(b){for(a.unshift("$"+(u-1));0!==b[0].j;)a.unshift(1===b[0].j?"hook_map["+("object"===typeof b[0].L?b[0].L.id:b[0].L)+"]":"hook_sub"),b=b[0].X;b=b[0].V}for(;b;)a.unshift(ma(b)+(c?":"+c:"")),c=b.T,b=b.K;return a.join("/")||"-"}function na(){console.log.apply(console,g(h.apply(0,arguments)))}function oa(a){var b=h.apply(1,arguments);na.apply(null,["lui "+N()+": "+a].concat(g(b)))}function O(a){throw Error("lui: "+a);}
function pa(a){na("lui "+a+": error in callback")}function ra(a,b,c){try{return a.apply(null,g(b))}catch(d){throw pa(c),d;}}function sa(a,b){a===b||a&&b&&JSON.stringify(L(a))===JSON.stringify(L(b))||O("object keys mismatch")}
function P(a,b,c){t||O("hook called outside of hook context");c&&(c.constructor!==K&&O("deps must be in an array"),0===c.length&&O("deps must not be empty"));b&&0!==t[0].j&&O("hook called outside of component rendering");a!==G&&u<t.length&&(t[u].j!==a&&O("inconsistent hook order"),t[u].h&&ua(t[u].h,c))}function Q(a,b){P(G,J,G);a!==R(a,a)&&O(b+" changed between renderings")}function ua(a,b){b?a.length!==b.length&&O("deps length changed"):0<a.length&&O("deps presence changed")}
function va(a){return new Function("a","b","return a!==b&&("+a.join("||")+")")}function M(a){var b=(a=L(a)).join(",");return ca[b]||(0===a.length&&O("object empty"),a.some(function(c){return(c.includes("-")||"0123456789".includes(c.charAt(0)))&&O("invalid key: "+c)}),ca[b]=va(a.map(function(c){return"a."+c+"!==b."+c})))}function wa(a,b){return sa(a,b),a===b?F:L(a).filter(function(c){return a[c]!==b[c]})}
function S(a){return a?da[a.length]||(0===a.length&&O("deps must not be empty"),da[a.length]=va(a.map(function(b,c){return"a["+c+"]!==b["+c+"]"}))):G}
function T(a,b){var c=k,d=b,l=c.v+1;t=c.u;u=1;c.G=J;if(c.s.A!==M){var f=G;try{f=(0,c.s.A)(c.s.o||ea)}catch(qa){if(qa!==E)throw qa;}var n=c.i;"object"!==typeof f&&O("components need to return child list or null");if(f){n&&(a=n,b=G);var p=f.length,m;"number"!==typeof p&&O("childs must be returned in a list");0===p&&O("returned childs list empty");c.l&&p!==c.l.length&&O("returned childs count changed");var x=c.l||(c.l=(new K(p)).fill(G));do{var r=x[--p];if((m=f[p])&&m!==H){r&&r.s.A!==m.A&&O("child component changed at "+
p);if(q=!r)(x[p]=k=r={s:m,U:m.o&&M(m.o),K:c,v:l,T:p,u:[],l:G,i:G,m:G,G:J}).u[0]={j:0,V:r},T(a,b),r.i&&a.insertBefore(r.m=r.i,b);else if(sa(r.s.o,m.o),m.o&&r.U(r.s.o,m.o))(k=r).s=m,T(a,b);r.m&&(b=r.m)}else r&&(U(r,a),x[p]=G)}while(0<p)}else if(c.l){l=e(c.l);for(f=l.next();!f.done;f=l.next())(f=f.value)&&U(f,a);c.l=G}n||(c.m=b!==d?b:G)}else{f=c.s.o;n=f.A;var y=f.P;f=f.o;"object"===typeof y&&y&&y.constructor===K||O("list_data must be an array");"object"!==typeof f&&O("props must be an object");Q(n,"item component");
Q(f&&L(f).join(","),"common props");p=y.length;r=H;if(!(0>=R(p,p)+p)){m=V();x={};var I=[];y=0<p&&xa(y,x,I);p||V();if(m.N){r=f&&m.U(f,m.ea);for(var W=e(m.da),B=W.next();!B.done;B=W.next())B=B.value,B in x||(U(m.N[B],a),delete m.N[B]);m.ea=f;m.da=I}else m.N={},m.Z=y?M(x[I[0]]):G,m.da=I,m.U=(m.ea=f)&&M(f);for(W=c.l=new K(p);0<p;){B=I[--p];var C=m.N[B];if(q=!C)(m.N[B]=k=C={s:{A:n,o:ia({I:x[B]},f)},U:G,K:c,v:l,T:p,u:[],l:G,i:G,m:G,G:J}).u[0]={j:0,V:C},T(a,b),C.i&&a.insertBefore(C.m=C.i,b);else{var ta=
ya(C);ta&&ta.nextSibling!==b&&za(C,a,b);if(r||y&&m.Z(x[B],C.s.o.I))(k=C).s.o=ia({I:x[B]},f),T(a,b)}(W[C.T=p]=C).m&&(b=C.m)}c.m=b!==d?b:G}}}function U(a,b){b&&a.i&&(b.removeChild(a.i),b=G);if(a.l)for(var c=e(a.l),d=c.next();!d.done;d=c.next())(d=d.value)&&U(d,b);X(a.u);if(a.G){var l,f;(!(f=A[l=a.v])||0>(l=f.indexOf(a)))&&(!(f=D[l])||0>(l=f.indexOf(a)))||f.splice(l,1)}}
function X(a){for(var b,c=a.length;1<c;)switch((b=a[--c]).j){case 3:b.J&&b.J.apply(b,g(b.h));break;case 4:b.h=F;break;case 7:Aa(b);break;case 11:X(b.u)}}
function xa(a,b,c){var d="object"===typeof a[0],l=V();l.ga||(a[0]!==G&&["object","string","number"].includes(l.ga=typeof a[0])||O("item type invalid"),d&&(!["string","number"].includes(l.ja=typeof a[0].id)&&O("item id type invalid"),l.keys=L(a[0]).join(",")));for(var f=e(a),n=f.next();!n.done;n=f.next())n=n.value,n===G&&O("item is null"),typeof n!==l.ga&&O("item type changed"),d&&(typeof n.id!==l.ja&&O("item id type changed"),L(n).join(",")!==l.keys&&O("item keys differ of "+n.id));a=e(a);for(n=a.next();!n.done;n=
a.next())l=n.value,f=d?l.id:l,f in b&&O("item key not unique: "+f),b[f]=l,c.push(f);return d}function ya(a){if(a.i)return a.i;var b;a=(b=a.l)?b.length:0;for(var c,d;0<a;)if((d=b[--a])&&(c=ya(d)))return c;return G}function za(a,b,c){if(a.i)return b.insertBefore(a.i,c),a.i;if(a.m){var d=a.l.length;do a.l[--d]&&(c=za(a.l[d],b,c));while(0<d)}return c}function Ba(a){for(;0!==a[0].j;){if(!a[0].Y.H)return G;a[0].Y.H=J;a=a[0].X}return a[0].V}
function Ca(a){return(a=Ba(a))&&!a.G&&(a.G=H,A[a.v]?A[a.v].push(a):A[a.v]=[a],z||Y())}function Da(){P(G,J,G);var a=Ba(t);a&&(a.G=H,D[a.v]?D[a.v].push(a):D[a.v]=[a])}function Ea(a,b){P(3,J,b);if(u>=t.length)t[u]={j:3,B:S(b),h:b=b||F,J:a.apply(null,g(b))||G};else if(b){var c=t[u];c.B(c.h,b)&&(c.J&&c.J.apply(c,g(c.h)),c.J=a.apply(null,g(c.h=b))||G)}t[u].J&&t[u].J.then&&O("effect function must be synchronous");++u}
function Fa(a){P(5,J,G);if(u<t.length)return t[u++].g;var b=t,c=[a,function(d){c[0]!==d&&(c[0]=d,Ca(b))},function(){return c[0]}];t[u++]={j:5,g:c};return c}function V(a){return P(6,J,G),(u<t.length?t[u++]:t[u++]={j:6,g:void 0===a?{}:a}).g}function Ga(a,b){return P(8,J,b),u>=t.length?(t[u++]={j:8,B:S(b),h:b=b||F,g:a.apply(null,g(b))}).g:b&&t[u].B(t[u].h,b)?t[u].g=a.apply(null,g(t[u++].h=b)):t[u++].g}function R(a,b){return P(9,J,G),u<t.length?(b=t[u].g,t[u++].g=a):t[u++]={j:9,g:a},b}
function Ha(a,b){return a=setTimeout(function(){return b(H)},a),function(){return clearTimeout(a)}}function Aa(a){for(var b=e(a.$),c=b.next();!c.done;c=b.next())X(a.O[c.value])}function Ia(a,b,c){return{ba:c.ca,ha:a,aa:v,fa:q?v:v+b}}function Z(a){"object"===typeof a&&a||O("object required");var b=R(a,G);return b?wa(b,a):L(a)}
function Ja(a){Q(!a,"attributes presence");var b=k.i;if(a){for(var c=e(Z(a)),d=c.next();!d.done;d=c.next())switch(d=d.value,1<d.length&&d.charAt(0).toLowerCase()!==d.charAt(0)&&O("capital prop: "+d),d.charCodeAt(0)){case 70:"object"===typeof a.F&&a.F||O("invalid css flags");b.className=L(a.F).filter(function(l){return a.F[l]}).join(" ");continue;case 82:"function"!==typeof a.R&&O("invalid ref"),a.R(b);case 67:case 68:case 83:continue;default:97>d.charCodeAt(0)&&O("invalid prop: "+d),b[d]=a[d]}Q(!a.D,
"dataset presence");if(a.D)for(c=e(Z(a.D)),d=c.next();!d.done;d=c.next())d=d.value,b.setAttribute("data-"+d.replace(fa,"-$&").toLowerCase(),a.D[d]);Q(!a.S,"style presence");if(a.S)for(c=e(Z(a.S)),d=c.next();!d.done;d=c.next())d=d.value,b.style[d]=a.S[d]}return b}function Ka(a,b,c){return"string"===typeof a&&O("component expected, use node_dom instead"),c&&c.constructor!==K&&O("invalid childs type"),{A:a,o:b?c?(b.C=c,b):b:c?{C:c}:G}}
function Y(){q=0>=v;v=la.now();w&&cancelAnimationFrame(w);z=H;w=0;for(var a,b=0;(a=A).length;){10<++b&&O("rerender loop detected");A=[];a=e(a);for(var c=a.next();!c.done;c=a.next())if(c=c.value){c=e(c);for(var d=c.next();!d.done;d=c.next())if(k=d.value,k.G){if(k.i)T(G,G);else{var l,f=G;d=k.m;for(var n=k,p=k;!(l=(n=n.K).i););do for(var m=p.T,x=(p=p.K).l,r=x.length;++m<r&&x[m]&&!(f=x[m].m););while(!f&&p!==n);p=k;T(l,f);if(p.m!==d)for(;!(p=p.K).i;){d=G;l=e(p.l);for(f=l.next();!(f.done||(f=f.value)&&
(d=f.m));f=l.next());if(d===p.m)break;p.m=d}}q=J}}}z=J;k=t=G;D.length&&(A=D,D=a,La())}function La(){return w||(w=requestAnimationFrame(Y))}
function Ma(a){var b=E[a];if(!b){var c=a.indexOf("[");b=0>c?a.substr(0):a.substr(0,c);(0===b.length||b!==b.toLowerCase()||b.includes(" ")||b.includes("#")||b.includes("."))&&O("dom: invalid tag");E[a]=b=ja.createElement(b);if(0<c)for(!a.endsWith("]")&&O("dom: ] missing"),a=e(a.substring(c+1,a.length-1).split("][")),c=a.next();!c.done;c=a.next()){c=c.value;!c&&O("dom: empty attribute");(c.includes("[")||c.includes("]"))&&O("dom: attributes screwed up");var d=c.indexOf("=");c.includes(" ")&&(0>d||c.indexOf(" ")<
d)&&O("dom: space in attribute name");0<d?b[c.substr(0,d)]=c.substr(d+1):b[c]=H}}return b}function Na(a){var b=ba[a];if(!b){var c=Ma(a);ba[a]=b=function(d){return q&&(k.i=c.cloneNode(H)),Ja(d),d&&d.C||G};b.name_="$"+a}return b}ka.onerror=function(){return k&&oa("error in component"),A=D=[],J};var Oa=K.prototype;Oa.fill||(Oa.fill=function(a){for(var b=this.length,c=0;c<b;++c)this[c]=a;return this});define({defer:function(){return k&&O("defer while rendering"),z=H,La()},defer_end:function(){return k&&O("defer_end while rendering"),z||O("nothing was deferred"),Y()},hook_assert:function(a){P(G,J,G);if(!a)throw E;},hook_async:function(a,b,c){P(4,J,b);var d,l=N();if((u<t.length?(d=t[u++],J):d=t[u++]={j:4,B:S(b),h:b||F,g:G})||b&&d.B(d.h,b)&&(d.h=b)){void 0!==c&&(d.g=c);var f=t;a.apply(null,g(d.h)).then(function(n){return d.g!==n&&d.h===b&&(d.g=n,Ca(f))}).catch(function(n){pa(l);throw n;})}return d.g},
hook_callback:function(a,b){var c=u>=t.length?N():"";b&&b.length||O("deps required, use hook_static instead");var d=V();d.h&&ua(d.h,b);d.h=b;return d.ia||(d.ia=function(){var l=h.apply(0,arguments);return ra(a,[].concat(g(d.h),g(l)),c)})},hook_delay:function(a){var b=e(Fa(J)),c=b.next().value;b=b.next().value;Ea(Ha,[a,b]);return c},hook_dom:function(a,b){return P(G,H,G),k.i?q&&O("hook_dom called twice"):q||O("hook_dom skipped before"),b&&(b.C&&O("hook_dom cannot have childs"),b.R&&O("hook_dom cannot have a ref")),
q&&(k.i=Ma(a).cloneNode(H)),Ja(b||G)},hook_effect:Ea,hook_map:function(a,b,c){P(7,J,c);var d=G,l=H;if(u<t.length)if((d=t[u]).W!==a)Aa(d),d=G;else if(!d.H||c&&d.B(d.h,c))d.h=c||F,d.H=H;else{if(b===d.P)return++u,d.g;l=J}var f=q,n=t,p=++u,m={},x=[],r=0<b.length&&xa(b,m,x);0===b.length&&V();if(d){if(d.g=[],d.P!==b)for(d.P=b,b=e(d.$),c=b.next();!c.done;c=b.next())c=c.value,c in m||(X(d.O[c]),delete d.O[c])}else t[p-1]=d={j:7,B:S(c),h:c||F,g:[],H:H,W:a,Z:r?M(b[0]):G,$:[],O:{},P:b};b=e(x);for(c=b.next();!c.done;c=
b.next()){c=c.value;var y=d.O[c];if(q=!y)d.O[c]=y=[{j:1,X:n,Y:d,L:G,g:G}];if(l||q||(r?d.Z(m[c],y[0].L):m[c]!==y[0].L)){t=y;u=1;try{y[0].g=a.apply(null,[y[0].L=m[c]].concat(g(d.h)))}catch(I){if(I!==E)throw I;}t=n}d.g.push(y[0].g)}q=f;t=n;u=p;d.$=x;return d.g},hook_memo:Ga,hook_model:function(a){P(10,J,G);"object"!==typeof a&&O("mutations object required");"function"!==typeof a.init&&O("init mutation required for initial value");if(u<t.length)return t[u++].g;for(var b=t,c=N(),d=[(0,a.init)(G),{}],l=
{},f=e(L(a)),n=f.next();!n.done;l={M:l.M},n=f.next())l.M=n.value,d[1][l.M]=function(p){return function(m){m=ra(a[p.M],[d[0],m],c+" -> #"+p.M);d[0]!==m&&(d[0]=m,Ca(b))}}(l);t[u++]={j:10,g:d};return d},hook_object_changes:Z,hook_prev:R,hook_rerender:Da,hook_state:Fa,hook_static:V,hook_sub:function(a,b){P(11,J,b);var c=G;if(u<t.length)if((c=t[u]).W!==a)X(c.u),c=G;else if(!c.H||b&&c.B(c.h,b))b&&(c.h=b),c.H=H;else return++u,c.g;var d=q,l=t,f=u;if(q=!c)(t[u]=c={j:11,B:S(b),h:b||F,g:G,W:a,H:H,u:[]}).u[0]=
{j:2,X:t,Y:c};t=c.u;u=1;try{c.g=a.apply(null,g(c.h))}catch(n){if(n!==E)throw n;}q=d;t=l;u=f+1;return c.g},hook_transition:function(a,b){var c=V({ca:a});a=Ga(Ia,[a,b,c]);return c.ca=a.fa<=v?a.ha:(Da(),a.aa===v?a.ba:a.ba+(a.ha-a.ba)*(v-a.aa)/(a.fa-a.aa))},init:function(a,b){function c(){return(!(d=a())||2!==d.length)&&O("root component must return [props, childs]"),Q(!d[0],"attributes presence"),d[0]!==G&&("object"!==typeof d[0]&&O("invalid props type"),sa(R(d[0],d[0]),d[0]),d[0].C&&O("root childs must be in second return value")),
Ja(d[0]),d[1]}b||O("no root element specified");b.lui&&O("root element already mounted");b.lui=H;"function"!==typeof a&&O("no init function specified");var d;b.innerHTML="";c.name_="$root";(k={s:{A:c,o:G},U:G,K:G,v:0,T:0,u:[],l:G,i:b,m:b,G:H}).u[0]={j:0,V:k};A[0]=[k];k=t=G;Y()},node:Ka,node_dom:function(a,b,c){return Ka(Na(a),b,c)},node_map:function(a,b,c){return Ka(M,{A:a,P:b,o:c||G})},now:function(){return v}})})()
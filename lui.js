'use strict';/*
 lui.js web frame work 0.13.0
 inspired by react and mithril
 L3P3.de 2021
*/
{let d=null,g=!0,h=d,m=0,n=0,t=g,x=d;
const y={},z={},A=d,B=g,D=!g,E=Array,F=Object,H=F.assign,I=F.keys,J=document,K=window,aa=K.performance||Date,L=new Set,M=new Set,ba=(a,c)=>a===c?[]:I(a).filter(b=>a[b]!==c[b]),N=(a,c)=>a!==c&&I(a).some(b=>a[b]!==c[b]),O=(a,c)=>{if(c!==A){let b=a.length;do if(a[--b]!==c[b])return D;while(0<b)}return B},P=(a,c)=>{const b=d,e=c;h=b.h;m=1;L.delete(b);if(b.f.i!==O){var f=A;try{f=b.f.i(b.f.g)}catch(C){}var k=b.a;if(f!==A){k!==A&&(a=k,c=A);var l=f.length,w,u=b.c||(b.c=(new E(l)).fill(A));do{var p=u[--l];
(w=f[l])&&w!==B?((g=p===A)?(u[l]=d=p={f:w,j:b,l,h:[],c:A,a:A,b:A},p.h[0]=[p],P(a,c),p.a!==A&&a.insertBefore(p.b=p.a,c)):N(p.f.g,w.g)&&((d=p).f=w,P(a,c)),p.b!==A&&(c=p.b)):p!==A&&(Q(p,a),u[l]=A)}while(0<l)}else if(b.c!==A){for(l of b.c)l!==A&&Q(l,a);b.c=A}k===A&&(b.b=c!==e?c:A)}else{w=b.f.g.i;u=b.f.g.D;f=b.f.g.g;k=u.length;l={};p=[];u=0<k&&R(u,l,p);const C=S();var v=T(p),G=f===A?A:T(f);G=g||N(f,G);if(!g)for(var q of v)q in l||(Q(C[q],a),delete C[q]);for(q=b.c=new E(k);0<k;){v=p[--k];let r=C[v];if(g=
void 0===r)C[v]=d=r={f:{i:w,g:f===A?{I:l[v]}:H({I:l[v]},f)},j:b,l:k,h:[],c:A,a:A,b:A},r.h[0]=[r],P(a,c),r.a!==A&&a.insertBefore(r.b=r.a,c);else if(r.l!==k&&(ca(r,a,c),r.l=k),G||u&&N(l[v],r.f.g.I))(d=r).f.g=f===A?{I:l[v]}:H({I:l[v]},f),P(a,c);(q[k]=r).b!==A&&(c=r.b)}b.b=c!==e?c:A}},Q=(a,c)=>{c!==A&&a.a!==A&&(c.removeChild(a.a),c=A);if(a.c!==A)for(const b of a.c)b!==A&&Q(b,c);U(a.h);L.delete(a);M.delete(a)},U=a=>{var c;let b=a.length;for(;1<b;)switch((c=a[--b])[0]){case 1:c[2]!==A&&c[2](...c[1]);break;
case 2:c[1]=A;break;case 3:U(c[4]);break;case 3:for(const e of c[4])U(c[6][e])}},R=(a,c,b)=>{const e="object"===typeof a[0];for(const f of a)a=e?f.id:f,c[a]=f,b.push(a);return e},ca=(a,c,b)=>{if(a.a!==A)return c.insertBefore(a.a,b),a.a;if(a.b!==A){let e=a.c.length;do a.c[--e]!==A&&(b=ca(a.c[e],c,b));while(0<e)}return b},da=a=>{for(;a[0][0]===A;){if(!a[0][2][5])return A;a[0][2][5]=D;a=a[0][1]}return a[0][0]},W=a=>{a=da(a);a!==A&&(L.add(a),t||V())},ea=()=>{const a=da(h);a!==A&&M.add(a)},fa=(a,c)=>{if(m<
h.length){const b=h[m++];O(b[1],c||A)||(b[2]!==A&&b[2](...b[1]),b[2]=a(...b[1]=c||[])||A)}else h[m++]=[1,c=c||[],a(...c)||A]},ha=a=>{if(m<h.length)return h[m++][1];const c=h,b=[a,e=>{b[0]!==e&&(b[0]=e,W(c))},()=>b[0]];h[m++]=[0,b];return b},S=a=>(m<h.length?h[m++]:h[m++]=[0,void 0===a?{}:a])[1],ia=(a,c)=>{if(m<h.length){const b=h[m++];return O(b[1],c||A)?b[2]:b[2]=a(...b[1]=c||[])}a=a(...c=c||[]);h[m++]=[0,c,a];return a},T=(a,c)=>{if(m<h.length){c=h[m++];const b=c[1];c[1]=a;return b}h[m++]=[0,a];
return c},ja=(a,c)=>{const b=setTimeout(()=>{c(B)},a);return()=>{clearTimeout(b)}},X=a=>{const c=T(a,A);return c===A?I(a):ba(c,a)},Y=a=>{const c=d.a;if(a!==A){for(const b of X(a))switch(b.charCodeAt(0)){case 70:c.className=I(a.F).filter(e=>a.F[e]).join(" ");continue;case 82:a.R(c);case 67:case 83:continue;default:c[b]=a[b]}if(a.S)for(const b of X(a.S))c.style[b]=a.S[b]}return c},Z=(a,c,b)=>({i:a,g:c?b?(c.C=b,c):c:b?{C:b}:A}),V=()=>{g=0===n;n=aa.now();t=B;x=A;for(d of L){if(d.a!==A)P(A,A);else{let a,
c=A,b=d.b,e=d,f=d;for(;(a=(e=e.j).a)===A;);do{let k=f.l;const {c:l}=f=f.j,w=l.length;for(;++k<w&&(l[k]===A||(c=l[k].b)===A););}while(c===A&&f!==e);f=d;P(a,c);if(f.b!==b)for(;(f=f.j).a===A;){b=A;for(const k of f.c)if(k!==A&&(b=k.b)!==A)break;if(b===f.b)break;f.b=b}}g=D}t=D;if(0<M.size){for(const a of M)L.add(a);M.clear();x===A&&(x=requestAnimationFrame(V))}},ka=a=>{let c=y[a];if(void 0===c){const b=a.indexOf("[");y[a]=c=J.createElement(0>b?a.substr(0):a.substr(0,b));if(0<b)for(const e of a.substring(b+
1,a.length-1).split("]["))a=e.indexOf("="),0<a?c[e.substr(0,a)]=e.substr(a+1):c[e]=B}return c},la=a=>{let c=z[a];if(void 0===c){const b=ka(a);z[a]=c=e=>(g&&(d.a=b.cloneNode(B)),Y(e),e!==A&&e.C||A)}return c};K.lui={defer:()=>{t=B;x===A&&(x=requestAnimationFrame(V))},defer_end:()=>{cancelAnimationFrame(x);V()},hook_assert:a=>{if(!a)throw y;},hook_async:(a,c,b)=>{const e=m<h.length?h[m++]:h[m++]=[2,A,A];if(e[1]!==A&&O(e[1],c||A))return e[2];void 0!==b&&(e[2]=b);const f=h;a(...e[1]=c=c||[]).then(k=>{e[2]!==k&&e[1]===c&&(e[2]=k,W(f))});return e[2]},hook_callback:(a,c)=>{const b=S();b.B=c;return b.A||(b.A=(...e)=>a(...b.B,...e))},hook_delay:a=>{const [c,b]=ha(D);fa(ja,[a,b]);return c},hook_dom:(a,c)=>(g&&
(d.a=ka(a).cloneNode(B)),Y(c||A)),hook_effect:fa,hook_first:()=>g,hook_map:(a,c,b)=>{var e=A;let f=B;if(m++<h.length)if((e=h[m-1])[1]!==a){for(var k of e[4])U(e[6][k]);e=A}else if(e[5]&&O(e[2],b||A)){if(c===e[7])return e[3];f=D}else e[2]=b,e[5]=B;b=b||[];e===A?h[m-1]=e=[3,a,b,[],[],B,{},c]:e[3]=[];k={};const l=[],w=0<c.length&&R(c,k,l),u=e[6],p=g,v=h,G=m;if(e[7]!==c){e[7]=c;for(const q of e[4])q in k||(U(u[q]),delete u[q])}for(const q of l){c=u[q];if(g=void 0===c)u[q]=c=[[A,v,e,A,A]];if(f||g||(w?
N(k[q],c[0][3]):k[q]!==c[0][3])){h=c;m=1;try{c[0][4]=a(c[0][3]=k[q],...b)}catch(C){}}e[3].push(c[0][4])}g=p;h=v;m=G;e[4]=l;return e[3]},hook_memo:ia,hook_object_changes:X,hook_prev:T,hook_reducer:a=>{if(m<h.length)return h[m++][1];const c=h,b=[a[0](),(e,f)=>{e=a[e](b[0],f);b[0]!==e&&(b[0]=e,W(c))}];h[m++]=[0,b];return b},hook_reducer_f:(a,c)=>{if(m<h.length)return h[m++][1];const b=h,e=[c?c():A,f=>{f=a(e[0],f);e[0]!==f&&(e[0]=f,W(b))}];h[m++]=[0,e];return e},hook_rerender:ea,hook_state:ha,hook_static:S,
hook_sub:(a,c)=>{let b=A;if(m++<h.length)if((b=h[m-1])[1]!==a)U(b[4]),b=A;else if(b[5]&&O(b[2],c||A))return b[3];const e=g,f=h,k=m;c=c||[];(g=b===A)?(h[m-1]=b=[3,a,c,A,[],B],b[4][0]=[A,h,b]):(b[2]=c,b[5]=B);h=b[4];m=1;try{b[3]=a(...c)}catch(l){}g=e;h=f;m=k;return b[3]},hook_transition:(a,c)=>{const b=S({m:a});a=ia((e,f)=>({s:b.m,v:e,o:n,u:g?n:n+f}),[a,c]);if(a.u<=n)return b.m=a.v;ea();return b.m=a.o===n?a.s:a.s+(a.v-a.s)*(n-a.o)/(a.u-a.o)},init:a=>{let c;const b=J.body;b.innerHTML="";(d={f:{i:()=>
(Y((c=a())[0]),c[1]),g:A},j:A,l:0,h:[],c:A,a:b,b}).h[0]=[d];L.add(d);V()},node:Z,node_dom:(a,c,b)=>Z(la(a),c,b),node_map:(a,c,b)=>Z(O,{i:a,D:c,g:b||A}),now:()=>n}}
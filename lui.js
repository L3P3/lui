'use strict';/*
 lui.js web frame work 0.12.0
 inspired by react and mithril
 L3P3.de 2021
*/
{let d=null,g=!0,h=d,m=0,p=0,u=new Set,y=new Set,z=g,A=!g;
const B={},C={},E=d,F=g,G=A,H=Array,I=Object,J=I.assign,K=I.keys,L=document,M=window,N=M.performance||Date,aa=(a,c)=>a===c?[]:K(a).filter(b=>a[b]!==c[b]),O=(a,c)=>a!==c&&K(a).some(b=>a[b]!==c[b]),P=(a,c)=>{if(c!==E){let b=a.length;do if(a[--b]!==c[b])return G;while(0<b)}return F},Q=(a,c)=>{const b=d,e=c;h=b.h;m=1;u.delete(b);if(b.f.i!==P){var f=E;try{f=b.f.i(b.f.g)}catch(D){}var k=b.a;if(f!==E){k!==E&&(a=k,c=E);var l=f.length,r,x=b.c||(b.c=(new H(l)).fill(E));do{var n=x[--l];(r=f[l])&&r!==F?((g=n===
E)?(x[l]=d=n={f:r,j:b,l,h:[],c:E,a:E,b:E},n.h[0]=[n],Q(a,c),n.a!==E&&a.insertBefore(n.b=n.a,c)):O(n.f.g,r.g)&&((d=n).f=r,Q(a,c)),n.b!==E&&(c=n.b)):n!==E&&(R(n,a),x[l]=E)}while(0<l)}else if(b.c!==E){for(l of b.c)l!==E&&R(l,a);b.c=E}k===E&&(b.b=c!==e?c:E)}else{r=b.f.g.i;x=b.f.g.D;f=b.f.g.g;k=x.length;l={};n=[];x=0<k&&ba(x,l,n);const D=S();var v=T(n),q=f===E?E:T(f);q=g||O(f,q);if(!g)for(var w of v)w in l||(R(D[w],a),delete D[w]);for(w=b.c=new H(k);0<k;){v=n[--k];let t=D[v];if(g=void 0===t)D[v]=d=t={f:{i:r,
g:f===E?{I:l[v]}:J({I:l[v]},f)},j:b,l:k,h:[],c:E,a:E,b:E},t.h[0]=[t],Q(a,c),t.a!==E&&a.insertBefore(t.b=t.a,c);else if(t.l!==k&&(ca(t,a,c),t.l=k),q||x&&O(l[v],t.f.g.I))(d=t).f.g=f===E?{I:l[v]}:J({I:l[v]},f),Q(a,c);(w[k]=t).b!==E&&(c=t.b)}b.b=c!==e?c:E}},R=(a,c)=>{c!==E&&a.a!==E&&(c.removeChild(a.a),c=E);if(a.c!==E)for(const b of a.c)b!==E&&R(b,c);U(a.h);u.delete(a);y.delete(a)},U=a=>{var c;let b=a.length;for(;1<b;)switch((c=a[--b])[0]){case 1:c[2]!==E&&c[2](c[1]);break;case 2:c[1]=E;break;case 3:U(c[4]);
break;case 3:for(const e of c[4])U(c[6][e])}},ba=(a,c,b)=>{const e="object"===typeof a[0];for(const f of a)a=e?f.id:f,c[a]=f,b.push(a);return e},ca=(a,c,b)=>{if(a.a!==E)return c.insertBefore(a.a,b),a.a;if(a.b!==E){let e=a.c.length;do a.c[--e]!==E&&(b=ca(a.c[e],c,b));while(0<e)}return b},da=a=>{for(;a[0][0]===E;){if(!a[0][2][5])return E;a[0][2][5]=G;a=a[0][1]}return a[0][0]},W=a=>{a=da(a);a!==E&&(u.add(a),z||V())},ea=()=>{const a=da(h);a!==E&&y.add(a)},fa=(a,c)=>{if(m<h.length){const b=h[m++];P(b[1],
c||E)||(b[2]!==E&&b[2](...b[1]),b[2]=a(...b[1]=c||[])||E)}else h[m++]=[1,c=c||[],a(...c)||E]},ha=a=>{if(m<h.length)return h[m++][1];const c=h,b=[a,e=>{b[0]!==e&&(b[0]=e,W(c))},()=>b[0]];h[m++]=[0,b];return b},S=a=>(m<h.length?h[m++]:h[m++]=[0,void 0===a?{}:a])[1],ia=(a,c)=>{if(m<h.length){const b=h[m++];return P(b[1],c||E)?b[2]:b[2]=a(...b[1]=c||[])}a=a(...c=c||[]);h[m++]=[0,c,a];return a},T=(a,c)=>{if(m<h.length){c=h[m++];const b=c[1];c[1]=a;return b}h[m++]=[0,a];return c},ja=(a,c)=>{const b=setTimeout(()=>
{c(F)},a);return()=>{clearTimeout(b)}},X=a=>{const c=T(a);return g?K(a):aa(c,a)},Y=a=>{const c=d.a;if(a!==E){for(const b of X(a))switch(b.charCodeAt(0)){case 70:c.className=K(a.F).filter(e=>a.F[e]).join(" ");continue;case 82:a.R(c);case 67:case 83:continue;default:c[b]=a[b]}if(a.S)for(const b of X(a.S))c.style[b]=a.S[b]}return c},Z=(a,c,b)=>({i:a,g:c?b?(c.C=b,c):c:b?{C:b}:E}),V=()=>{p=N.now();z=F;for(d of u)if(g=G,d.a!==E)Q(E,E);else{let a,c=E,b=d.b,e=d,f=d;for(;(a=(e=e.j).a)===E;);do{let k=f.l;const {c:l}=
f=f.j,r=l.length;for(;++k<r&&(l[k]===E||(c=l[k].b)===E););}while(c===E&&f!==e);f=d;Q(a,c);if(f.b!==b)for(;(f=f.j).a===E;){b=E;for(const k of f.c)if(k!==E&&(b=k.b)!==E)break;if(b===f.b)break;f.b=b}}z=G;!A&&0<y.size&&(A=F,requestAnimationFrame(ka))},ka=()=>{A=G;const a=u;u=y;(y=a).clear();V()},la=a=>{let c=B[a];if(void 0===c){const b=a.indexOf("[");B[a]=c=L.createElement(0>b?a.substr(0):a.substr(0,b));if(0<b)for(const e of a.substring(b+1,a.length-1).split("]["))a=e.indexOf("="),0<a?c[e.substr(0,a)]=
e.substr(a+1):c[e]=F}return c},ma=a=>{let c=C[a];if(void 0===c){const b=la(a);C[a]=c=e=>(g&&(d.a=b.cloneNode(F)),Y(e),e!==E&&e.C||E)}return c};M.lui={hook_assert:a=>{if(!a)throw B;},hook_async:(a,c,b)=>{const e=m<h.length?h[m++]:h[m++]=[2,E,E];if(e[1]!==E&&P(e[1],c||E))return e[2];void 0!==b&&(e[2]=b);const f=h;a(...e[1]=c=c||[]).then(k=>{e[2]!==k&&e[1]===c&&(e[2]=k,W(f))});return e[2]},hook_callback:(a,c)=>{const b=S();b.B=c;g&&(b.A=(...e)=>a(...b.B,...e));return b.A},hook_delay:a=>{const [c,b]=ha(G);fa(ja,[a,b]);return c},hook_dom:(a,c)=>(g&&(d.a=la(a).cloneNode(F)),Y(c||E)),hook_effect:fa,hook_first:()=>g,hook_map:(a,c,b)=>{var e=E;let f=
F;if(m++<h.length)if((e=h[m-1])[1]!==a){for(var k of e[4])U(e[6][k]);e=E}else if(e[5]&&c===e[7]&&P(e[2],b||E))return e[3];b=b||[];e===E?h[m-1]=e=[3,a,b,[],[],F,{},c]:(f=!e[5],e[2]=b,e[3]=[],e[5]=F,e[7]=c);k={};const l=[];c=0<c.length&&ba(c,k,l);const r=e[6],x=g,n=h,v=m;for(var q of e[4])q in k||(U(r[q]),delete r[q]);for(const w of l){q=r[w];if(g=void 0===q)r[w]=q=[[E,n,e,E,E]];if(f||g||(c?O(k[w],q[0][3]):k[w]!==q[0][3])){h=q;m=1;try{q[0][4]=a(q[0][3]=k[w],...b)}catch(D){}}e[3].push(q[0][4])}g=x;h=
n;m=v;e[4]=l;return e[3]},hook_memo:ia,hook_object_changes:X,hook_prev:T,hook_reducer:a=>{if(m<h.length)return h[m++][1];const c=h,b=[a[0](),(e,f)=>{e=a[e](b[0],f);b[0]!==e&&(b[0]=e,W(c))}];h[m++]=[0,b];return b},hook_reducer_f:(a,c)=>{if(m<h.length)return h[m++][1];const b=h,e=[c?c():E,f=>{f=a(e[0],f);e[0]!==f&&(e[0]=f,W(b))}];h[m++]=[0,e];return e},hook_rerender:ea,hook_state:ha,hook_static:S,hook_sub:(a,c)=>{let b=E;if(m++<h.length)if((b=h[m-1])[1]!==a)U(b[4]),b=E;else if(b[5]&&P(b[2],c||E))return b[3];
const e=g,f=h,k=m;c=c||[];(g=b===E)?(h[m-1]=b=[3,a,c,E,[],F],b[4][0]=[E,h,b]):(b[2]=c,b[5]=F);h=b[4];m=1;try{b[3]=a(...c)}catch(l){}g=e;h=f;m=k;return b[3]},hook_transition:(a,c)=>{const b=S({m:a});a=ia((e,f)=>({s:b.m,v:e,o:p,u:g?p:p+f}),[a,c]);if(a.u<=p)return b.m=a.v;ea();return b.m=a.o===p?a.s:a.s+(a.v-a.s)*(p-a.o)/(a.u-a.o)},init:a=>{let c;const b=L.body;b.innerHTML="";d={f:{i:()=>(Y((c=a())[0]),c[1]),g:E},j:E,l:0,h:[],c:E,a:b,b};d.h[0]=[d];p=N.now();Q(E,E);V()},node:Z,node_dom:(a,c,b)=>Z(ma(a),
c,b),node_map:(a,c,b)=>Z(P,{i:a,D:c,g:b||E}),now:()=>p}}
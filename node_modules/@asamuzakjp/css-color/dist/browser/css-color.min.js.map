{"version":3,"file":"css-color.min.js","sources":["../../node_modules/.pnpm/@csstools+css-tokenizer@3.0.4/node_modules/@csstools/css-tokenizer/dist/index.mjs","../../node_modules/.pnpm/@csstools+css-parser-algori_f97be086dec1114cf77bb1341d3f2991/node_modules/@csstools/css-parser-algorithms/dist/index.mjs","../../node_modules/.pnpm/@csstools+css-calc@2.1.4_@c_e8d5cb57048a11d39451107410ea18b6/node_modules/@csstools/css-calc/dist/index.mjs","../../node_modules/.pnpm/lru-cache@11.2.4/node_modules/lru-cache/dist/esm/index.js","../../src/js/common.ts","../../src/js/constant.ts","../../src/js/color.ts","../../src/js/css-var.ts","../../node_modules/.pnpm/@csstools+color-helpers@5.1.0/node_modules/@csstools/color-helpers/dist/index.mjs","../../node_modules/.pnpm/@csstools+css-color-parser@_ac3eaa9e6357e2e6fe2577d663b974a1/node_modules/@csstools/css-color-parser/dist/index.mjs","../../src/js/relative-color.ts","../../src/js/resolve.ts","../../src/js/util.ts","../../src/js/cache.ts","../../src/js/css-calc.ts","../../src/js/css-gradient.ts","../../src/js/convert.ts","../../src/index.ts"],"sourcesContent":["class ParseError extends Error{sourceStart;sourceEnd;parserState;constructor(e,n,t,o){super(e),this.name=\"ParseError\",this.sourceStart=n,this.sourceEnd=t,this.parserState=o}}class ParseErrorWithToken extends ParseError{token;constructor(e,n,t,o,r){super(e,n,t,o),this.token=r}}const e={UnexpectedNewLineInString:\"Unexpected newline while consuming a string token.\",UnexpectedEOFInString:\"Unexpected EOF while consuming a string token.\",UnexpectedEOFInComment:\"Unexpected EOF while consuming a comment.\",UnexpectedEOFInURL:\"Unexpected EOF while consuming a url token.\",UnexpectedEOFInEscapedCodePoint:\"Unexpected EOF while consuming an escaped code point.\",UnexpectedCharacterInURL:\"Unexpected character while consuming a url token.\",InvalidEscapeSequenceInURL:\"Invalid escape sequence while consuming a url token.\",InvalidEscapeSequenceAfterBackslash:'Invalid escape sequence after \"\\\\\"'},n=\"undefined\"!=typeof globalThis&&\"structuredClone\"in globalThis;function cloneTokens(e){return n?structuredClone(e):JSON.parse(JSON.stringify(e))}function stringify(...e){let n=\"\";for(let t=0;t<e.length;t++)n+=e[t][1];return n}const t=13,o=45,r=10,i=43,s=65533;function checkIfFourCodePointsWouldStartCDO(e){return 60===e.source.codePointAt(e.cursor)&&33===e.source.codePointAt(e.cursor+1)&&e.source.codePointAt(e.cursor+2)===o&&e.source.codePointAt(e.cursor+3)===o}function isDigitCodePoint(e){return e>=48&&e<=57}function isUppercaseLetterCodePoint(e){return e>=65&&e<=90}function isLowercaseLetterCodePoint(e){return e>=97&&e<=122}function isHexDigitCodePoint(e){return e>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70}function isLetterCodePoint(e){return isLowercaseLetterCodePoint(e)||isUppercaseLetterCodePoint(e)}function isIdentStartCodePoint(e){return isLetterCodePoint(e)||isNonASCII_IdentCodePoint(e)||95===e}function isIdentCodePoint(e){return isIdentStartCodePoint(e)||isDigitCodePoint(e)||e===o}function isNonASCII_IdentCodePoint(e){return 183===e||8204===e||8205===e||8255===e||8256===e||8204===e||(192<=e&&e<=214||216<=e&&e<=246||248<=e&&e<=893||895<=e&&e<=8191||8304<=e&&e<=8591||11264<=e&&e<=12271||12289<=e&&e<=55295||63744<=e&&e<=64975||65008<=e&&e<=65533||(0===e||(!!isSurrogate(e)||e>=65536)))}function isNewLine(e){return e===r||e===t||12===e}function isWhitespace(e){return 32===e||e===r||9===e||e===t||12===e}function isSurrogate(e){return e>=55296&&e<=57343}function checkIfTwoCodePointsAreAValidEscape(e){return 92===e.source.codePointAt(e.cursor)&&!isNewLine(e.source.codePointAt(e.cursor+1)??-1)}function checkIfThreeCodePointsWouldStartAnIdentSequence(e,n){return n.source.codePointAt(n.cursor)===o?n.source.codePointAt(n.cursor+1)===o||(!!isIdentStartCodePoint(n.source.codePointAt(n.cursor+1)??-1)||92===n.source.codePointAt(n.cursor+1)&&!isNewLine(n.source.codePointAt(n.cursor+2)??-1)):!!isIdentStartCodePoint(n.source.codePointAt(n.cursor)??-1)||checkIfTwoCodePointsAreAValidEscape(n)}function checkIfThreeCodePointsWouldStartANumber(e){return e.source.codePointAt(e.cursor)===i||e.source.codePointAt(e.cursor)===o?!!isDigitCodePoint(e.source.codePointAt(e.cursor+1)??-1)||46===e.source.codePointAt(e.cursor+1)&&isDigitCodePoint(e.source.codePointAt(e.cursor+2)??-1):46===e.source.codePointAt(e.cursor)?isDigitCodePoint(e.source.codePointAt(e.cursor+1)??-1):isDigitCodePoint(e.source.codePointAt(e.cursor)??-1)}function checkIfTwoCodePointsStartAComment(e){return 47===e.source.codePointAt(e.cursor)&&42===e.source.codePointAt(e.cursor+1)}function checkIfThreeCodePointsWouldStartCDC(e){return e.source.codePointAt(e.cursor)===o&&e.source.codePointAt(e.cursor+1)===o&&62===e.source.codePointAt(e.cursor+2)}var c,a,u;function mirrorVariantType(e){switch(e){case c.OpenParen:return c.CloseParen;case c.CloseParen:return c.OpenParen;case c.OpenCurly:return c.CloseCurly;case c.CloseCurly:return c.OpenCurly;case c.OpenSquare:return c.CloseSquare;case c.CloseSquare:return c.OpenSquare;default:return null}}function mirrorVariant(e){switch(e[0]){case c.OpenParen:return[c.CloseParen,\")\",-1,-1,void 0];case c.CloseParen:return[c.OpenParen,\"(\",-1,-1,void 0];case c.OpenCurly:return[c.CloseCurly,\"}\",-1,-1,void 0];case c.CloseCurly:return[c.OpenCurly,\"{\",-1,-1,void 0];case c.OpenSquare:return[c.CloseSquare,\"]\",-1,-1,void 0];case c.CloseSquare:return[c.OpenSquare,\"[\",-1,-1,void 0];default:return null}}function consumeComment(n,t){for(t.advanceCodePoint(2);;){const o=t.readCodePoint();if(void 0===o){const o=[c.Comment,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,void 0];return n.onParseError(new ParseErrorWithToken(e.UnexpectedEOFInComment,t.representationStart,t.representationEnd,[\"4.3.2. Consume comments\",\"Unexpected EOF\"],o)),o}if(42===o&&(void 0!==t.source.codePointAt(t.cursor)&&47===t.source.codePointAt(t.cursor))){t.advanceCodePoint();break}}return[c.Comment,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,void 0]}function consumeEscapedCodePoint(n,o){const i=o.readCodePoint();if(void 0===i)return n.onParseError(new ParseError(e.UnexpectedEOFInEscapedCodePoint,o.representationStart,o.representationEnd,[\"4.3.7. Consume an escaped code point\",\"Unexpected EOF\"])),s;if(isHexDigitCodePoint(i)){const e=[i];let n;for(;void 0!==(n=o.source.codePointAt(o.cursor))&&isHexDigitCodePoint(n)&&e.length<6;)e.push(n),o.advanceCodePoint();isWhitespace(o.source.codePointAt(o.cursor)??-1)&&(o.source.codePointAt(o.cursor)===t&&o.source.codePointAt(o.cursor+1)===r&&o.advanceCodePoint(),o.advanceCodePoint());const c=parseInt(String.fromCodePoint(...e),16);return 0===c||isSurrogate(c)||c>1114111?s:c}return 0===i||isSurrogate(i)?s:i}function consumeIdentSequence(e,n){const t=[];for(;;){const o=n.source.codePointAt(n.cursor)??-1;if(0===o||isSurrogate(o))t.push(s),n.advanceCodePoint(+(o>65535)+1);else if(isIdentCodePoint(o))t.push(o),n.advanceCodePoint(+(o>65535)+1);else{if(!checkIfTwoCodePointsAreAValidEscape(n))return t;n.advanceCodePoint(),t.push(consumeEscapedCodePoint(e,n))}}}function consumeHashToken(e,n){n.advanceCodePoint();const t=n.source.codePointAt(n.cursor);if(void 0!==t&&(isIdentCodePoint(t)||checkIfTwoCodePointsAreAValidEscape(n))){let t=u.Unrestricted;checkIfThreeCodePointsWouldStartAnIdentSequence(0,n)&&(t=u.ID);const o=consumeIdentSequence(e,n);return[c.Hash,n.source.slice(n.representationStart,n.representationEnd+1),n.representationStart,n.representationEnd,{value:String.fromCodePoint(...o),type:t}]}return[c.Delim,\"#\",n.representationStart,n.representationEnd,{value:\"#\"}]}function consumeNumber(e,n){let t=a.Integer;for(n.source.codePointAt(n.cursor)!==i&&n.source.codePointAt(n.cursor)!==o||n.advanceCodePoint();isDigitCodePoint(n.source.codePointAt(n.cursor)??-1);)n.advanceCodePoint();if(46===n.source.codePointAt(n.cursor)&&isDigitCodePoint(n.source.codePointAt(n.cursor+1)??-1))for(n.advanceCodePoint(2),t=a.Number;isDigitCodePoint(n.source.codePointAt(n.cursor)??-1);)n.advanceCodePoint();if(101===n.source.codePointAt(n.cursor)||69===n.source.codePointAt(n.cursor)){if(isDigitCodePoint(n.source.codePointAt(n.cursor+1)??-1))n.advanceCodePoint(2);else{if(n.source.codePointAt(n.cursor+1)!==o&&n.source.codePointAt(n.cursor+1)!==i||!isDigitCodePoint(n.source.codePointAt(n.cursor+2)??-1))return t;n.advanceCodePoint(3)}for(t=a.Number;isDigitCodePoint(n.source.codePointAt(n.cursor)??-1);)n.advanceCodePoint()}return t}function consumeNumericToken(e,n){let t;{const e=n.source.codePointAt(n.cursor);e===o?t=\"-\":e===i&&(t=\"+\")}const r=consumeNumber(0,n),s=parseFloat(n.source.slice(n.representationStart,n.representationEnd+1));if(checkIfThreeCodePointsWouldStartAnIdentSequence(0,n)){const o=consumeIdentSequence(e,n);return[c.Dimension,n.source.slice(n.representationStart,n.representationEnd+1),n.representationStart,n.representationEnd,{value:s,signCharacter:t,type:r,unit:String.fromCodePoint(...o)}]}return 37===n.source.codePointAt(n.cursor)?(n.advanceCodePoint(),[c.Percentage,n.source.slice(n.representationStart,n.representationEnd+1),n.representationStart,n.representationEnd,{value:s,signCharacter:t}]):[c.Number,n.source.slice(n.representationStart,n.representationEnd+1),n.representationStart,n.representationEnd,{value:s,signCharacter:t,type:r}]}function consumeWhiteSpace(e){for(;isWhitespace(e.source.codePointAt(e.cursor)??-1);)e.advanceCodePoint();return[c.Whitespace,e.source.slice(e.representationStart,e.representationEnd+1),e.representationStart,e.representationEnd,void 0]}!function(e){e.Comment=\"comment\",e.AtKeyword=\"at-keyword-token\",e.BadString=\"bad-string-token\",e.BadURL=\"bad-url-token\",e.CDC=\"CDC-token\",e.CDO=\"CDO-token\",e.Colon=\"colon-token\",e.Comma=\"comma-token\",e.Delim=\"delim-token\",e.Dimension=\"dimension-token\",e.EOF=\"EOF-token\",e.Function=\"function-token\",e.Hash=\"hash-token\",e.Ident=\"ident-token\",e.Number=\"number-token\",e.Percentage=\"percentage-token\",e.Semicolon=\"semicolon-token\",e.String=\"string-token\",e.URL=\"url-token\",e.Whitespace=\"whitespace-token\",e.OpenParen=\"(-token\",e.CloseParen=\")-token\",e.OpenSquare=\"[-token\",e.CloseSquare=\"]-token\",e.OpenCurly=\"{-token\",e.CloseCurly=\"}-token\",e.UnicodeRange=\"unicode-range-token\"}(c||(c={})),function(e){e.Integer=\"integer\",e.Number=\"number\"}(a||(a={})),function(e){e.Unrestricted=\"unrestricted\",e.ID=\"id\"}(u||(u={}));class Reader{cursor=0;source=\"\";representationStart=0;representationEnd=-1;constructor(e){this.source=e}advanceCodePoint(e=1){this.cursor=this.cursor+e,this.representationEnd=this.cursor-1}readCodePoint(){const e=this.source.codePointAt(this.cursor);if(void 0!==e)return this.cursor=this.cursor+1,this.representationEnd=this.cursor-1,e}unreadCodePoint(e=1){this.cursor=this.cursor-e,this.representationEnd=this.cursor-1}resetRepresentation(){this.representationStart=this.cursor,this.representationEnd=-1}}function consumeStringToken(n,o){let i=\"\";const a=o.readCodePoint();for(;;){const u=o.readCodePoint();if(void 0===u){const t=[c.String,o.source.slice(o.representationStart,o.representationEnd+1),o.representationStart,o.representationEnd,{value:i}];return n.onParseError(new ParseErrorWithToken(e.UnexpectedEOFInString,o.representationStart,o.representationEnd,[\"4.3.5. Consume a string token\",\"Unexpected EOF\"],t)),t}if(isNewLine(u)){o.unreadCodePoint();const i=[c.BadString,o.source.slice(o.representationStart,o.representationEnd+1),o.representationStart,o.representationEnd,void 0];return n.onParseError(new ParseErrorWithToken(e.UnexpectedNewLineInString,o.representationStart,o.source.codePointAt(o.cursor)===t&&o.source.codePointAt(o.cursor+1)===r?o.representationEnd+2:o.representationEnd+1,[\"4.3.5. Consume a string token\",\"Unexpected newline\"],i)),i}if(u===a)return[c.String,o.source.slice(o.representationStart,o.representationEnd+1),o.representationStart,o.representationEnd,{value:i}];if(92!==u)0===u||isSurrogate(u)?i+=String.fromCodePoint(s):i+=String.fromCodePoint(u);else{if(void 0===o.source.codePointAt(o.cursor))continue;if(isNewLine(o.source.codePointAt(o.cursor)??-1)){o.source.codePointAt(o.cursor)===t&&o.source.codePointAt(o.cursor+1)===r&&o.advanceCodePoint(),o.advanceCodePoint();continue}i+=String.fromCodePoint(consumeEscapedCodePoint(n,o))}}}function checkIfCodePointsMatchURLIdent(e){return!(3!==e.length||117!==e[0]&&85!==e[0]||114!==e[1]&&82!==e[1]||108!==e[2]&&76!==e[2])}function consumeBadURL(e,n){for(;;){const t=n.source.codePointAt(n.cursor);if(void 0===t)return;if(41===t)return void n.advanceCodePoint();checkIfTwoCodePointsAreAValidEscape(n)?(n.advanceCodePoint(),consumeEscapedCodePoint(e,n)):n.advanceCodePoint()}}function consumeUrlToken(n,t){for(;isWhitespace(t.source.codePointAt(t.cursor)??-1);)t.advanceCodePoint();let o=\"\";for(;;){if(void 0===t.source.codePointAt(t.cursor)){const r=[c.URL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:o}];return n.onParseError(new ParseErrorWithToken(e.UnexpectedEOFInURL,t.representationStart,t.representationEnd,[\"4.3.6. Consume a url token\",\"Unexpected EOF\"],r)),r}if(41===t.source.codePointAt(t.cursor))return t.advanceCodePoint(),[c.URL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:o}];if(isWhitespace(t.source.codePointAt(t.cursor)??-1)){for(t.advanceCodePoint();isWhitespace(t.source.codePointAt(t.cursor)??-1);)t.advanceCodePoint();if(void 0===t.source.codePointAt(t.cursor)){const r=[c.URL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:o}];return n.onParseError(new ParseErrorWithToken(e.UnexpectedEOFInURL,t.representationStart,t.representationEnd,[\"4.3.6. Consume a url token\",\"Consume as much whitespace as possible\",\"Unexpected EOF\"],r)),r}return 41===t.source.codePointAt(t.cursor)?(t.advanceCodePoint(),[c.URL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:o}]):(consumeBadURL(n,t),[c.BadURL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,void 0])}const i=t.source.codePointAt(t.cursor);if(34===i||39===i||40===i||(11===(r=i??-1)||127===r||0<=r&&r<=8||14<=r&&r<=31)){consumeBadURL(n,t);const o=[c.BadURL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,void 0];return n.onParseError(new ParseErrorWithToken(e.UnexpectedCharacterInURL,t.representationStart,t.representationEnd,[\"4.3.6. Consume a url token\",\"Unexpected U+0022 QUOTATION MARK (\\\"), U+0027 APOSTROPHE ('), U+0028 LEFT PARENTHESIS (() or non-printable code point\"],o)),o}if(92===i){if(checkIfTwoCodePointsAreAValidEscape(t)){t.advanceCodePoint(),o+=String.fromCodePoint(consumeEscapedCodePoint(n,t));continue}consumeBadURL(n,t);const r=[c.BadURL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,void 0];return n.onParseError(new ParseErrorWithToken(e.InvalidEscapeSequenceInURL,t.representationStart,t.representationEnd,[\"4.3.6. Consume a url token\",\"U+005C REVERSE SOLIDUS (\\\\)\",\"The input stream does not start with a valid escape sequence\"],r)),r}0===t.source.codePointAt(t.cursor)||isSurrogate(t.source.codePointAt(t.cursor)??-1)?(o+=String.fromCodePoint(s),t.advanceCodePoint()):(o+=t.source[t.cursor],t.advanceCodePoint())}var r}function consumeIdentLikeToken(e,n){const t=consumeIdentSequence(e,n);if(40!==n.source.codePointAt(n.cursor))return[c.Ident,n.source.slice(n.representationStart,n.representationEnd+1),n.representationStart,n.representationEnd,{value:String.fromCodePoint(...t)}];if(checkIfCodePointsMatchURLIdent(t)){n.advanceCodePoint();let o=0;for(;;){const e=isWhitespace(n.source.codePointAt(n.cursor)??-1),r=isWhitespace(n.source.codePointAt(n.cursor+1)??-1);if(e&&r){o+=1,n.advanceCodePoint(1);continue}const i=e?n.source.codePointAt(n.cursor+1):n.source.codePointAt(n.cursor);if(34===i||39===i)return o>0&&n.unreadCodePoint(o),[c.Function,n.source.slice(n.representationStart,n.representationEnd+1),n.representationStart,n.representationEnd,{value:String.fromCodePoint(...t)}];break}return consumeUrlToken(e,n)}return n.advanceCodePoint(),[c.Function,n.source.slice(n.representationStart,n.representationEnd+1),n.representationStart,n.representationEnd,{value:String.fromCodePoint(...t)}]}function checkIfThreeCodePointsWouldStartAUnicodeRange(e){return!(117!==e.source.codePointAt(e.cursor)&&85!==e.source.codePointAt(e.cursor)||e.source.codePointAt(e.cursor+1)!==i||63!==e.source.codePointAt(e.cursor+2)&&!isHexDigitCodePoint(e.source.codePointAt(e.cursor+2)??-1))}function consumeUnicodeRangeToken(e,n){n.advanceCodePoint(2);const t=[],r=[];let i;for(;void 0!==(i=n.source.codePointAt(n.cursor))&&t.length<6&&isHexDigitCodePoint(i);)t.push(i),n.advanceCodePoint();for(;void 0!==(i=n.source.codePointAt(n.cursor))&&t.length<6&&63===i;)0===r.length&&r.push(...t),t.push(48),r.push(70),n.advanceCodePoint();if(!r.length&&n.source.codePointAt(n.cursor)===o&&isHexDigitCodePoint(n.source.codePointAt(n.cursor+1)??-1))for(n.advanceCodePoint();void 0!==(i=n.source.codePointAt(n.cursor))&&r.length<6&&isHexDigitCodePoint(i);)r.push(i),n.advanceCodePoint();if(!r.length){const e=parseInt(String.fromCodePoint(...t),16);return[c.UnicodeRange,n.source.slice(n.representationStart,n.representationEnd+1),n.representationStart,n.representationEnd,{startOfRange:e,endOfRange:e}]}const s=parseInt(String.fromCodePoint(...t),16),a=parseInt(String.fromCodePoint(...r),16);return[c.UnicodeRange,n.source.slice(n.representationStart,n.representationEnd+1),n.representationStart,n.representationEnd,{startOfRange:s,endOfRange:a}]}function tokenize(e,n){const t=tokenizer(e,n),o=[];for(;!t.endOfFile();)o.push(t.nextToken());return o.push(t.nextToken()),o}function tokenizer(n,s){const a=n.css.valueOf(),u=n.unicodeRangesAllowed??!1,d=new Reader(a),p={onParseError:s?.onParseError??noop};return{nextToken:function nextToken(){d.resetRepresentation();const n=d.source.codePointAt(d.cursor);if(void 0===n)return[c.EOF,\"\",-1,-1,void 0];if(47===n&&checkIfTwoCodePointsStartAComment(d))return consumeComment(p,d);if(u&&(117===n||85===n)&&checkIfThreeCodePointsWouldStartAUnicodeRange(d))return consumeUnicodeRangeToken(0,d);if(isIdentStartCodePoint(n))return consumeIdentLikeToken(p,d);if(isDigitCodePoint(n))return consumeNumericToken(p,d);switch(n){case 44:return d.advanceCodePoint(),[c.Comma,\",\",d.representationStart,d.representationEnd,void 0];case 58:return d.advanceCodePoint(),[c.Colon,\":\",d.representationStart,d.representationEnd,void 0];case 59:return d.advanceCodePoint(),[c.Semicolon,\";\",d.representationStart,d.representationEnd,void 0];case 40:return d.advanceCodePoint(),[c.OpenParen,\"(\",d.representationStart,d.representationEnd,void 0];case 41:return d.advanceCodePoint(),[c.CloseParen,\")\",d.representationStart,d.representationEnd,void 0];case 91:return d.advanceCodePoint(),[c.OpenSquare,\"[\",d.representationStart,d.representationEnd,void 0];case 93:return d.advanceCodePoint(),[c.CloseSquare,\"]\",d.representationStart,d.representationEnd,void 0];case 123:return d.advanceCodePoint(),[c.OpenCurly,\"{\",d.representationStart,d.representationEnd,void 0];case 125:return d.advanceCodePoint(),[c.CloseCurly,\"}\",d.representationStart,d.representationEnd,void 0];case 39:case 34:return consumeStringToken(p,d);case 35:return consumeHashToken(p,d);case i:case 46:return checkIfThreeCodePointsWouldStartANumber(d)?consumeNumericToken(p,d):(d.advanceCodePoint(),[c.Delim,d.source[d.representationStart],d.representationStart,d.representationEnd,{value:d.source[d.representationStart]}]);case r:case t:case 12:case 9:case 32:return consumeWhiteSpace(d);case o:return checkIfThreeCodePointsWouldStartANumber(d)?consumeNumericToken(p,d):checkIfThreeCodePointsWouldStartCDC(d)?(d.advanceCodePoint(3),[c.CDC,\"--\\x3e\",d.representationStart,d.representationEnd,void 0]):checkIfThreeCodePointsWouldStartAnIdentSequence(0,d)?consumeIdentLikeToken(p,d):(d.advanceCodePoint(),[c.Delim,\"-\",d.representationStart,d.representationEnd,{value:\"-\"}]);case 60:return checkIfFourCodePointsWouldStartCDO(d)?(d.advanceCodePoint(4),[c.CDO,\"\\x3c!--\",d.representationStart,d.representationEnd,void 0]):(d.advanceCodePoint(),[c.Delim,\"<\",d.representationStart,d.representationEnd,{value:\"<\"}]);case 64:if(d.advanceCodePoint(),checkIfThreeCodePointsWouldStartAnIdentSequence(0,d)){const e=consumeIdentSequence(p,d);return[c.AtKeyword,d.source.slice(d.representationStart,d.representationEnd+1),d.representationStart,d.representationEnd,{value:String.fromCodePoint(...e)}]}return[c.Delim,\"@\",d.representationStart,d.representationEnd,{value:\"@\"}];case 92:{if(checkIfTwoCodePointsAreAValidEscape(d))return consumeIdentLikeToken(p,d);d.advanceCodePoint();const n=[c.Delim,\"\\\\\",d.representationStart,d.representationEnd,{value:\"\\\\\"}];return p.onParseError(new ParseErrorWithToken(e.InvalidEscapeSequenceAfterBackslash,d.representationStart,d.representationEnd,[\"4.3.1. Consume a token\",\"U+005C REVERSE SOLIDUS (\\\\)\",\"The input stream does not start with a valid escape sequence\"],n)),n}}return d.advanceCodePoint(),[c.Delim,d.source[d.representationStart],d.representationStart,d.representationEnd,{value:d.source[d.representationStart]}]},endOfFile:function endOfFile(){return void 0===d.source.codePointAt(d.cursor)}}}function noop(){}function mutateIdent(e,n){const t=[];for(const e of n)t.push(e.codePointAt(0));const o=String.fromCodePoint(...serializeIdent(t));e[1]=o,e[4].value=n}function mutateUnit(e,n){const t=[];for(const e of n)t.push(e.codePointAt(0));const o=serializeIdent(t);101===o[0]&&insertEscapedCodePoint(o,0,o[0]);const r=String.fromCodePoint(...o),i=\"+\"===e[4].signCharacter?e[4].signCharacter:\"\",s=e[4].value.toString();e[1]=`${i}${s}${r}`,e[4].unit=n}function serializeIdent(e){let n=0;if(0===e[0])e.splice(0,1,s),n=1;else if(e[0]===o&&e[1]===o)n=2;else if(e[0]===o&&e[1])n=2,isIdentStartCodePoint(e[1])||(n+=insertEscapedCodePoint(e,1,e[1]));else{if(e[0]===o&&!e[1])return[92,e[0]];isIdentStartCodePoint(e[0])?n=1:(n=1,n+=insertEscapedCodePoint(e,0,e[0]))}for(let t=n;t<e.length;t++)0!==e[t]?isIdentCodePoint(e[t])||(t+=insertEscapedCharacter(e,t,e[t])):(e.splice(t,1,s),t++);return e}function insertEscapedCharacter(e,n,t){return e.splice(n,1,92,t),1}function insertEscapedCodePoint(e,n,t){const o=t.toString(16),r=[];for(const e of o)r.push(e.codePointAt(0));return e.splice(n,1,92,...r,32),1+r.length}const d=Object.values(c);function isToken(e){return!!Array.isArray(e)&&(!(e.length<4)&&(!!d.includes(e[0])&&(\"string\"==typeof e[1]&&(\"number\"==typeof e[2]&&\"number\"==typeof e[3]))))}function isTokenNumeric(e){if(!e)return!1;switch(e[0]){case c.Dimension:case c.Number:case c.Percentage:return!0;default:return!1}}function isTokenWhiteSpaceOrComment(e){if(!e)return!1;switch(e[0]){case c.Whitespace:case c.Comment:return!0;default:return!1}}function isTokenAtKeyword(e){return!!e&&e[0]===c.AtKeyword}function isTokenBadString(e){return!!e&&e[0]===c.BadString}function isTokenBadURL(e){return!!e&&e[0]===c.BadURL}function isTokenCDC(e){return!!e&&e[0]===c.CDC}function isTokenCDO(e){return!!e&&e[0]===c.CDO}function isTokenColon(e){return!!e&&e[0]===c.Colon}function isTokenComma(e){return!!e&&e[0]===c.Comma}function isTokenComment(e){return!!e&&e[0]===c.Comment}function isTokenDelim(e){return!!e&&e[0]===c.Delim}function isTokenDimension(e){return!!e&&e[0]===c.Dimension}function isTokenEOF(e){return!!e&&e[0]===c.EOF}function isTokenFunction(e){return!!e&&e[0]===c.Function}function isTokenHash(e){return!!e&&e[0]===c.Hash}function isTokenIdent(e){return!!e&&e[0]===c.Ident}function isTokenNumber(e){return!!e&&e[0]===c.Number}function isTokenPercentage(e){return!!e&&e[0]===c.Percentage}function isTokenSemicolon(e){return!!e&&e[0]===c.Semicolon}function isTokenString(e){return!!e&&e[0]===c.String}function isTokenURL(e){return!!e&&e[0]===c.URL}function isTokenWhitespace(e){return!!e&&e[0]===c.Whitespace}function isTokenOpenParen(e){return!!e&&e[0]===c.OpenParen}function isTokenCloseParen(e){return!!e&&e[0]===c.CloseParen}function isTokenOpenSquare(e){return!!e&&e[0]===c.OpenSquare}function isTokenCloseSquare(e){return!!e&&e[0]===c.CloseSquare}function isTokenOpenCurly(e){return!!e&&e[0]===c.OpenCurly}function isTokenCloseCurly(e){return!!e&&e[0]===c.CloseCurly}function isTokenUnicodeRange(e){return!!e&&e[0]===c.UnicodeRange}export{u as HashType,a as NumberType,ParseError,e as ParseErrorMessage,ParseErrorWithToken,c as TokenType,cloneTokens,isToken,isTokenAtKeyword,isTokenBadString,isTokenBadURL,isTokenCDC,isTokenCDO,isTokenCloseCurly,isTokenCloseParen,isTokenCloseSquare,isTokenColon,isTokenComma,isTokenComment,isTokenDelim,isTokenDimension,isTokenEOF,isTokenFunction,isTokenHash,isTokenIdent,isTokenNumber,isTokenNumeric,isTokenOpenCurly,isTokenOpenParen,isTokenOpenSquare,isTokenPercentage,isTokenSemicolon,isTokenString,isTokenURL,isTokenUnicodeRange,isTokenWhiteSpaceOrComment,isTokenWhitespace,mirrorVariant,mirrorVariantType,mutateIdent,mutateUnit,stringify,tokenize,tokenizer};\n","import{isTokenEOF as e,TokenType as n,isToken as t,stringify as o,mirrorVariant as s,isTokenOpenParen as i,isTokenOpenCurly as r,isTokenOpenSquare as a,isTokenFunction as c,isTokenWhitespace as u,isTokenComment as l,mirrorVariantType as d,ParseError as h,isTokenWhiteSpaceOrComment as p,isTokenCloseParen as m,isTokenComma as k}from\"@csstools/css-tokenizer\";var f;function walkerIndexGenerator(e){let n=e.slice();return(e,t,o)=>{let s=-1;for(let i=n.indexOf(t);i<n.length&&(s=e.indexOf(n[i]),-1===s||s<o);i++);return-1===s||s===o&&t===e[o]&&(s++,s>=e.length)?-1:(n=e.slice(),s)}}function consumeComponentValue(e,n){const t=n[0];if(i(t)||r(t)||a(t)){const t=consumeSimpleBlock(e,n);return{advance:t.advance,node:t.node}}if(c(t)){const t=consumeFunction(e,n);return{advance:t.advance,node:t.node}}if(u(t)){const t=consumeWhitespace(e,n);return{advance:t.advance,node:t.node}}if(l(t)){const t=consumeComment(e,n);return{advance:t.advance,node:t.node}}return{advance:1,node:new TokenNode(t)}}!function(e){e.Function=\"function\",e.SimpleBlock=\"simple-block\",e.Whitespace=\"whitespace\",e.Comment=\"comment\",e.Token=\"token\"}(f||(f={}));class ContainerNodeBaseClass{value=[];indexOf(e){return this.value.indexOf(e)}at(e){if(\"number\"==typeof e)return e<0&&(e=this.value.length+e),this.value[e]}forEach(e,n){if(0===this.value.length)return;const t=walkerIndexGenerator(this.value);let o=0;for(;o<this.value.length;){const s=this.value[o];let i;if(n&&(i={...n}),!1===e({node:s,parent:this,state:i},o))return!1;if(o=t(this.value,s,o),-1===o)break}}walk(e,n){0!==this.value.length&&this.forEach(((n,t)=>!1!==e(n,t)&&((!(\"walk\"in n.node)||!this.value.includes(n.node)||!1!==n.node.walk(e,n.state))&&void 0)),n)}}class FunctionNode extends ContainerNodeBaseClass{type=f.Function;name;endToken;constructor(e,n,t){super(),this.name=e,this.endToken=n,this.value=t}getName(){return this.name[4].value}normalize(){e(this.endToken)&&(this.endToken=[n.CloseParen,\")\",-1,-1,void 0])}tokens(){return e(this.endToken)?[this.name,...this.value.flatMap((e=>e.tokens()))]:[this.name,...this.value.flatMap((e=>e.tokens())),this.endToken]}toString(){const e=this.value.map((e=>t(e)?o(e):e.toString())).join(\"\");return o(this.name)+e+o(this.endToken)}toJSON(){return{type:this.type,name:this.getName(),tokens:this.tokens(),value:this.value.map((e=>e.toJSON()))}}isFunctionNode(){return FunctionNode.isFunctionNode(this)}static isFunctionNode(e){return!!e&&(e instanceof FunctionNode&&e.type===f.Function)}}function consumeFunction(n,t){const o=[];let s=1;for(;;){const i=t[s];if(!i||e(i))return n.onParseError(new h(\"Unexpected EOF while consuming a function.\",t[0][2],t[t.length-1][3],[\"5.4.9. Consume a function\",\"Unexpected EOF\"])),{advance:t.length,node:new FunctionNode(t[0],i,o)};if(m(i))return{advance:s+1,node:new FunctionNode(t[0],i,o)};if(p(i)){const e=consumeAllCommentsAndWhitespace(n,t.slice(s));s+=e.advance,o.push(...e.nodes);continue}const r=consumeComponentValue(n,t.slice(s));s+=r.advance,o.push(r.node)}}class SimpleBlockNode extends ContainerNodeBaseClass{type=f.SimpleBlock;startToken;endToken;constructor(e,n,t){super(),this.startToken=e,this.endToken=n,this.value=t}normalize(){if(e(this.endToken)){const e=s(this.startToken);e&&(this.endToken=e)}}tokens(){return e(this.endToken)?[this.startToken,...this.value.flatMap((e=>e.tokens()))]:[this.startToken,...this.value.flatMap((e=>e.tokens())),this.endToken]}toString(){const e=this.value.map((e=>t(e)?o(e):e.toString())).join(\"\");return o(this.startToken)+e+o(this.endToken)}toJSON(){return{type:this.type,startToken:this.startToken,tokens:this.tokens(),value:this.value.map((e=>e.toJSON()))}}isSimpleBlockNode(){return SimpleBlockNode.isSimpleBlockNode(this)}static isSimpleBlockNode(e){return!!e&&(e instanceof SimpleBlockNode&&e.type===f.SimpleBlock)}}function consumeSimpleBlock(n,t){const o=d(t[0][0]);if(!o)throw new Error(\"Failed to parse, a mirror variant must exist for all block open tokens.\");const s=[];let i=1;for(;;){const r=t[i];if(!r||e(r))return n.onParseError(new h(\"Unexpected EOF while consuming a simple block.\",t[0][2],t[t.length-1][3],[\"5.4.8. Consume a simple block\",\"Unexpected EOF\"])),{advance:t.length,node:new SimpleBlockNode(t[0],r,s)};if(r[0]===o)return{advance:i+1,node:new SimpleBlockNode(t[0],r,s)};if(p(r)){const e=consumeAllCommentsAndWhitespace(n,t.slice(i));i+=e.advance,s.push(...e.nodes);continue}const a=consumeComponentValue(n,t.slice(i));i+=a.advance,s.push(a.node)}}class WhitespaceNode{type=f.Whitespace;value;constructor(e){this.value=e}tokens(){return this.value}toString(){return o(...this.value)}toJSON(){return{type:this.type,tokens:this.tokens()}}isWhitespaceNode(){return WhitespaceNode.isWhitespaceNode(this)}static isWhitespaceNode(e){return!!e&&(e instanceof WhitespaceNode&&e.type===f.Whitespace)}}function consumeWhitespace(e,n){let t=0;for(;;){const e=n[t];if(!u(e))return{advance:t,node:new WhitespaceNode(n.slice(0,t))};t++}}class CommentNode{type=f.Comment;value;constructor(e){this.value=e}tokens(){return[this.value]}toString(){return o(this.value)}toJSON(){return{type:this.type,tokens:this.tokens()}}isCommentNode(){return CommentNode.isCommentNode(this)}static isCommentNode(e){return!!e&&(e instanceof CommentNode&&e.type===f.Comment)}}function consumeComment(e,n){return{advance:1,node:new CommentNode(n[0])}}function consumeAllCommentsAndWhitespace(e,n){const t=[];let o=0;for(;;)if(u(n[o])){const e=consumeWhitespace(0,n.slice(o));o+=e.advance,t.push(e.node)}else{if(!l(n[o]))return{advance:o,nodes:t};t.push(new CommentNode(n[o])),o++}}class TokenNode{type=f.Token;value;constructor(e){this.value=e}tokens(){return[this.value]}toString(){return this.value[1]}toJSON(){return{type:this.type,tokens:this.tokens()}}isTokenNode(){return TokenNode.isTokenNode(this)}static isTokenNode(e){return!!e&&(e instanceof TokenNode&&e.type===f.Token)}}function parseComponentValue(t,o){const s={onParseError:o?.onParseError??(()=>{})},i=[...t];e(i[i.length-1])&&i.push([n.EOF,\"\",i[i.length-1][2],i[i.length-1][3],void 0]);const r=consumeComponentValue(s,i);if(e(i[Math.min(r.advance,i.length-1)]))return r.node;s.onParseError(new h(\"Expected EOF after parsing a component value.\",t[0][2],t[t.length-1][3],[\"5.3.9. Parse a component value\",\"Expected EOF\"]))}function parseListOfComponentValues(t,o){const s={onParseError:o?.onParseError??(()=>{})},i=[...t];e(i[i.length-1])&&i.push([n.EOF,\"\",i[i.length-1][2],i[i.length-1][3],void 0]);const r=[];let a=0;for(;;){if(!i[a]||e(i[a]))return r;const n=consumeComponentValue(s,i.slice(a));r.push(n.node),a+=n.advance}}function parseCommaSeparatedListOfComponentValues(t,o){const s={onParseError:o?.onParseError??(()=>{})},i=[...t];if(0===t.length)return[];e(i[i.length-1])&&i.push([n.EOF,\"\",i[i.length-1][2],i[i.length-1][3],void 0]);const r=[];let a=[],c=0;for(;;){if(!i[c]||e(i[c]))return a.length&&r.push(a),r;if(k(i[c])){r.push(a),a=[],c++;continue}const n=consumeComponentValue(s,t.slice(c));a.push(n.node),c+=n.advance}}function gatherNodeAncestry(e){const n=new Map;return e.walk((e=>{Array.isArray(e.node)?e.node.forEach((t=>{n.set(t,e.parent)})):n.set(e.node,e.parent)})),n}function forEach(e,n,t){if(0===e.length)return;const o=walkerIndexGenerator(e);let s=0;for(;s<e.length;){const i=e[s];let r;if(t&&(r={...t}),!1===n({node:i,parent:{value:e},state:r},s))return!1;if(s=o(e,i,s),-1===s)break}}function walk(e,n,t){0!==e.length&&forEach(e,((t,o)=>!1!==n(t,o)&&((!(\"walk\"in t.node)||!e.includes(t.node)||!1!==t.node.walk(n,t.state))&&void 0)),t)}function replaceComponentValues(e,n){for(let t=0;t<e.length;t++){walk(e[t],((e,t)=>{if(\"number\"!=typeof t)return;const o=n(e.node);o&&(Array.isArray(o)?e.parent.value.splice(t,1,...o):e.parent.value.splice(t,1,o))}))}return e}function stringify(e){return e.map((e=>e.map((e=>o(...e.tokens()))).join(\"\"))).join(\",\")}function isSimpleBlockNode(e){return SimpleBlockNode.isSimpleBlockNode(e)}function isFunctionNode(e){return FunctionNode.isFunctionNode(e)}function isWhitespaceNode(e){return WhitespaceNode.isWhitespaceNode(e)}function isCommentNode(e){return CommentNode.isCommentNode(e)}function isWhiteSpaceOrCommentNode(e){return isWhitespaceNode(e)||isCommentNode(e)}function isTokenNode(e){return TokenNode.isTokenNode(e)}function sourceIndices(e){if(Array.isArray(e)){const n=e[0];if(!n)return[0,0];const t=e[e.length-1]||n;return[sourceIndices(n)[0],sourceIndices(t)[1]]}const n=e.tokens(),t=n[0],o=n[n.length-1];return t&&o?[t[2],o[3]]:[0,0]}export{CommentNode,f as ComponentValueType,ContainerNodeBaseClass,FunctionNode,SimpleBlockNode,TokenNode,WhitespaceNode,forEach,gatherNodeAncestry,isCommentNode,isFunctionNode,isSimpleBlockNode,isTokenNode,isWhiteSpaceOrCommentNode,isWhitespaceNode,parseCommaSeparatedListOfComponentValues,parseComponentValue,parseListOfComponentValues,replaceComponentValues,sourceIndices,stringify,walk,walkerIndexGenerator};\n","import{TokenNode as e,isTokenNode as n,isWhitespaceNode as t,isCommentNode as r,isWhiteSpaceOrCommentNode as a,isSimpleBlockNode as u,isFunctionNode as i,FunctionNode as o,WhitespaceNode as l,parseCommaSeparatedListOfComponentValues as c,replaceComponentValues as s}from\"@csstools/css-parser-algorithms\";import{isTokenDimension as v,TokenType as f,NumberType as m,mutateUnit as p,isTokenNumber as C,isTokenPercentage as g,isTokenIdent as d,isTokenNumeric as D,isTokenOpenParen as N,isTokenDelim as B,isTokenComma as A,isToken as h,tokenizer as F,tokenize as b,stringify as w}from\"@csstools/css-tokenizer\";const E=/[A-Z]/g;function toLowerCaseAZ(e){return e.replace(E,(e=>String.fromCharCode(e.charCodeAt(0)+32)))}const I={cm:\"px\",in:\"px\",mm:\"px\",pc:\"px\",pt:\"px\",px:\"px\",q:\"px\",deg:\"deg\",grad:\"deg\",rad:\"deg\",turn:\"deg\",ms:\"s\",s:\"s\",hz:\"hz\",khz:\"hz\"},S=new Map([[\"cm\",e=>e],[\"mm\",e=>10*e],[\"q\",e=>40*e],[\"in\",e=>e/2.54],[\"pc\",e=>e/2.54*6],[\"pt\",e=>e/2.54*72],[\"px\",e=>e/2.54*96]]),y=new Map([[\"deg\",e=>e],[\"grad\",e=>e/.9],[\"rad\",e=>e/180*Math.PI],[\"turn\",e=>e/360]]),M=new Map([[\"deg\",e=>.9*e],[\"grad\",e=>e],[\"rad\",e=>.9*e/180*Math.PI],[\"turn\",e=>.9*e/360]]),T=new Map([[\"hz\",e=>e],[\"khz\",e=>e/1e3]]),x=new Map([[\"cm\",e=>2.54*e],[\"mm\",e=>25.4*e],[\"q\",e=>25.4*e*4],[\"in\",e=>e],[\"pc\",e=>6*e],[\"pt\",e=>72*e],[\"px\",e=>96*e]]),k=new Map([[\"hz\",e=>1e3*e],[\"khz\",e=>e]]),P=new Map([[\"cm\",e=>e/10],[\"mm\",e=>e],[\"q\",e=>4*e],[\"in\",e=>e/25.4],[\"pc\",e=>e/25.4*6],[\"pt\",e=>e/25.4*72],[\"px\",e=>e/25.4*96]]),O=new Map([[\"ms\",e=>e],[\"s\",e=>e/1e3]]),W=new Map([[\"cm\",e=>e/6*2.54],[\"mm\",e=>e/6*25.4],[\"q\",e=>e/6*25.4*4],[\"in\",e=>e/6],[\"pc\",e=>e],[\"pt\",e=>e/6*72],[\"px\",e=>e/6*96]]),L=new Map([[\"cm\",e=>e/72*2.54],[\"mm\",e=>e/72*25.4],[\"q\",e=>e/72*25.4*4],[\"in\",e=>e/72],[\"pc\",e=>e/72*6],[\"pt\",e=>e],[\"px\",e=>e/72*96]]),U=new Map([[\"cm\",e=>e/96*2.54],[\"mm\",e=>e/96*25.4],[\"q\",e=>e/96*25.4*4],[\"in\",e=>e/96],[\"pc\",e=>e/96*6],[\"pt\",e=>e/96*72],[\"px\",e=>e]]),$=new Map([[\"cm\",e=>e/4/10],[\"mm\",e=>e/4],[\"q\",e=>e],[\"in\",e=>e/4/25.4],[\"pc\",e=>e/4/25.4*6],[\"pt\",e=>e/4/25.4*72],[\"px\",e=>e/4/25.4*96]]),Z=new Map([[\"deg\",e=>180*e/Math.PI],[\"grad\",e=>180*e/Math.PI/.9],[\"rad\",e=>e],[\"turn\",e=>180*e/Math.PI/360]]),z=new Map([[\"ms\",e=>1e3*e],[\"s\",e=>e]]),q=new Map([[\"deg\",e=>360*e],[\"grad\",e=>360*e/.9],[\"rad\",e=>360*e/180*Math.PI],[\"turn\",e=>e]]),G=new Map([[\"cm\",S],[\"mm\",P],[\"q\",$],[\"in\",x],[\"pc\",W],[\"pt\",L],[\"px\",U],[\"ms\",O],[\"s\",z],[\"deg\",y],[\"grad\",M],[\"rad\",Z],[\"turn\",q],[\"hz\",T],[\"khz\",k]]);function convertUnit(e,n){if(!v(e))return n;if(!v(n))return n;const t=toLowerCaseAZ(e[4].unit),r=toLowerCaseAZ(n[4].unit);if(t===r)return n;const a=G.get(r);if(!a)return n;const u=a.get(t);if(!u)return n;const i=u(n[4].value),o=[f.Dimension,\"\",n[2],n[3],{...n[4],signCharacter:i<0?\"-\":void 0,type:Number.isInteger(i)?m.Integer:m.Number,value:i}];return p(o,e[4].unit),o}function toCanonicalUnit(e){if(!v(e))return e;const n=toLowerCaseAZ(e[4].unit),t=I[n];if(n===t)return e;const r=G.get(n);if(!r)return e;const a=r.get(t);if(!a)return e;const u=a(e[4].value),i=[f.Dimension,\"\",e[2],e[3],{...e[4],signCharacter:u<0?\"-\":void 0,type:Number.isInteger(u)?m.Integer:m.Number,value:u}];return p(i,t),i}function addition(n){if(2!==n.length)return-1;const t=n[0].value;let r=n[1].value;if(C(t)&&C(r)){const n=t[4].value+r[4].value;return new e([f.Number,n.toString(),t[2],r[3],{value:n,type:t[4].type===m.Integer&&r[4].type===m.Integer?m.Integer:m.Number}])}if(g(t)&&g(r)){const n=t[4].value+r[4].value;return new e([f.Percentage,n.toString()+\"%\",t[2],r[3],{value:n}])}if(v(t)&&v(r)&&(r=convertUnit(t,r),toLowerCaseAZ(t[4].unit)===toLowerCaseAZ(r[4].unit))){const n=t[4].value+r[4].value;return new e([f.Dimension,n.toString()+t[4].unit,t[2],r[3],{value:n,type:t[4].type===m.Integer&&r[4].type===m.Integer?m.Integer:m.Number,unit:t[4].unit}])}return-1}function division(n){if(2!==n.length)return-1;const t=n[0].value,r=n[1].value;if(C(t)&&C(r)){const n=t[4].value/r[4].value;return new e([f.Number,n.toString(),t[2],r[3],{value:n,type:Number.isInteger(n)?m.Integer:m.Number}])}if(g(t)&&C(r)){const n=t[4].value/r[4].value;return new e([f.Percentage,n.toString()+\"%\",t[2],r[3],{value:n}])}if(v(t)&&C(r)){const n=t[4].value/r[4].value;return new e([f.Dimension,n.toString()+t[4].unit,t[2],r[3],{value:n,type:Number.isInteger(n)?m.Integer:m.Number,unit:t[4].unit}])}return-1}function isCalculation(e){return!!e&&\"object\"==typeof e&&\"inputs\"in e&&Array.isArray(e.inputs)&&\"operation\"in e}function solve(e){if(-1===e)return-1;const t=[];for(let r=0;r<e.inputs.length;r++){const a=e.inputs[r];if(n(a)){t.push(a);continue}const u=solve(a);if(-1===u)return-1;t.push(u)}return e.operation(t)}function multiplication(n){if(2!==n.length)return-1;const t=n[0].value,r=n[1].value;if(C(t)&&C(r)){const n=t[4].value*r[4].value;return new e([f.Number,n.toString(),t[2],r[3],{value:n,type:t[4].type===m.Integer&&r[4].type===m.Integer?m.Integer:m.Number}])}if(g(t)&&C(r)){const n=t[4].value*r[4].value;return new e([f.Percentage,n.toString()+\"%\",t[2],r[3],{value:n}])}if(C(t)&&g(r)){const n=t[4].value*r[4].value;return new e([f.Percentage,n.toString()+\"%\",t[2],r[3],{value:n}])}if(v(t)&&C(r)){const n=t[4].value*r[4].value;return new e([f.Dimension,n.toString()+t[4].unit,t[2],r[3],{value:n,type:t[4].type===m.Integer&&r[4].type===m.Integer?m.Integer:m.Number,unit:t[4].unit}])}if(C(t)&&v(r)){const n=t[4].value*r[4].value;return new e([f.Dimension,n.toString()+r[4].unit,t[2],r[3],{value:n,type:t[4].type===m.Integer&&r[4].type===m.Integer?m.Integer:m.Number,unit:r[4].unit}])}return-1}function resolveGlobalsAndConstants(t,r){for(let a=0;a<t.length;a++){const u=t[a];if(!n(u))continue;const i=u.value;if(!d(i))continue;const o=toLowerCaseAZ(i[4].value);switch(o){case\"e\":t.splice(a,1,new e([f.Number,Math.E.toString(),i[2],i[3],{value:Math.E,type:m.Number}]));break;case\"pi\":t.splice(a,1,new e([f.Number,Math.PI.toString(),i[2],i[3],{value:Math.PI,type:m.Number}]));break;case\"infinity\":t.splice(a,1,new e([f.Number,\"infinity\",i[2],i[3],{value:1/0,type:m.Number}]));break;case\"-infinity\":t.splice(a,1,new e([f.Number,\"-infinity\",i[2],i[3],{value:-1/0,type:m.Number}]));break;case\"nan\":t.splice(a,1,new e([f.Number,\"NaN\",i[2],i[3],{value:Number.NaN,type:m.Number}]));break;default:if(r.has(o)){const n=r.get(o);t.splice(a,1,new e(n))}}}return t}function unary(e){if(1!==e.length)return-1;const n=e[0].value;return D(n)?e[0]:-1}function resultToCalculation(e,n,t){return v(n)?dimensionToCalculation(e,n[4].unit,t):g(n)?percentageToCalculation(e,t):C(n)?numberToCalculation(e,t):-1}function dimensionToCalculation(n,t,r){const a=n.tokens();return{inputs:[new e([f.Dimension,r.toString()+t,a[0][2],a[a.length-1][3],{value:r,type:Number.isInteger(r)?m.Integer:m.Number,unit:t}])],operation:unary}}function percentageToCalculation(n,t){const r=n.tokens();return{inputs:[new e([f.Percentage,t.toString()+\"%\",r[0][2],r[r.length-1][3],{value:t}])],operation:unary}}function numberToCalculation(n,t){const r=n.tokens();return{inputs:[new e([f.Number,t.toString(),r[0][2],r[r.length-1][3],{value:t,type:Number.isInteger(t)?m.Integer:m.Number}])],operation:unary}}function solveACos(e,n){const t=n.value;if(!C(t))return-1;return dimensionToCalculation(e,\"rad\",Math.acos(t[4].value))}function solveASin(e,n){const t=n.value;if(!C(t))return-1;return dimensionToCalculation(e,\"rad\",Math.asin(t[4].value))}function solveATan(e,n){const t=n.value;if(!C(t))return-1;return dimensionToCalculation(e,\"rad\",Math.atan(t[4].value))}function isDimensionOrNumber(e){return v(e)||C(e)}function arrayOfSameNumeric(e){if(0===e.length)return!0;const n=e[0];if(!D(n))return!1;if(1===e.length)return!0;if(v(n)){const t=toLowerCaseAZ(n[4].unit);for(let r=1;r<e.length;r++){const a=e[r];if(n[0]!==a[0])return!1;if(t!==toLowerCaseAZ(a[4].unit))return!1}return!0}for(let t=1;t<e.length;t++){const r=e[t];if(n[0]!==r[0])return!1}return!0}function twoOfSameNumeric(e,n){return!!D(e)&&(v(e)?e[0]===n[0]&&toLowerCaseAZ(e[4].unit)===toLowerCaseAZ(n[4].unit):e[0]===n[0])}function solveATan2(e,n,t){const r=n.value;if(!isDimensionOrNumber(r))return-1;const a=convertUnit(r,t.value);if(!twoOfSameNumeric(r,a))return-1;return dimensionToCalculation(e,\"rad\",Math.atan2(r[4].value,a[4].value))}function solveAbs(e,n,t){const r=n.value;if(!D(r))return-1;if(!t.rawPercentages&&g(r))return-1;return resultToCalculation(e,r,Math.abs(r[4].value))}function solveClamp(e,t,r,a,u){if(!n(t)||!n(r)||!n(a))return-1;const i=t.value;if(!D(i))return-1;if(!u.rawPercentages&&g(i))return-1;const o=convertUnit(i,r.value);if(!twoOfSameNumeric(i,o))return-1;const l=convertUnit(i,a.value);if(!twoOfSameNumeric(i,l))return-1;return resultToCalculation(e,i,Math.max(i[4].value,Math.min(o[4].value,l[4].value)))}function solveCos(e,n){const t=n.value;if(!isDimensionOrNumber(t))return-1;let r=t[4].value;if(v(t))switch(t[4].unit.toLowerCase()){case\"rad\":break;case\"deg\":r=y.get(\"rad\")(t[4].value);break;case\"grad\":r=M.get(\"rad\")(t[4].value);break;case\"turn\":r=q.get(\"rad\")(t[4].value);break;default:return-1}return r=Math.cos(r),numberToCalculation(e,r)}function solveExp(e,n){const t=n.value;if(!C(t))return-1;return numberToCalculation(e,Math.exp(t[4].value))}function solveHypot(e,t,r){if(!t.every(n))return-1;const a=t[0].value;if(!D(a))return-1;if(!r.rawPercentages&&g(a))return-1;const u=t.map((e=>convertUnit(a,e.value)));if(!arrayOfSameNumeric(u))return-1;const i=u.map((e=>e[4].value)),o=Math.hypot(...i);return resultToCalculation(e,a,o)}function solveMax(e,t,r){if(!t.every(n))return-1;const a=t[0].value;if(!D(a))return-1;if(!r.rawPercentages&&g(a))return-1;const u=t.map((e=>convertUnit(a,e.value)));if(!arrayOfSameNumeric(u))return-1;const i=u.map((e=>e[4].value)),o=Math.max(...i);return resultToCalculation(e,a,o)}function solveMin(e,t,r){if(!t.every(n))return-1;const a=t[0].value;if(!D(a))return-1;if(!r.rawPercentages&&g(a))return-1;const u=t.map((e=>convertUnit(a,e.value)));if(!arrayOfSameNumeric(u))return-1;const i=u.map((e=>e[4].value)),o=Math.min(...i);return resultToCalculation(e,a,o)}function solveMod(e,n,t){const r=n.value;if(!D(r))return-1;const a=convertUnit(r,t.value);if(!twoOfSameNumeric(r,a))return-1;let u;return u=0===a[4].value?Number.NaN:Number.isFinite(r[4].value)&&(Number.isFinite(a[4].value)||(a[4].value!==Number.POSITIVE_INFINITY||r[4].value!==Number.NEGATIVE_INFINITY&&!Object.is(0*r[4].value,-0))&&(a[4].value!==Number.NEGATIVE_INFINITY||r[4].value!==Number.POSITIVE_INFINITY&&!Object.is(0*r[4].value,0)))?Number.isFinite(a[4].value)?(r[4].value%a[4].value+a[4].value)%a[4].value:r[4].value:Number.NaN,resultToCalculation(e,r,u)}function solvePow(e,n,t){const r=n.value,a=t.value;if(!C(r))return-1;if(!twoOfSameNumeric(r,a))return-1;return numberToCalculation(e,Math.pow(r[4].value,a[4].value))}function solveRem(e,n,t){const r=n.value;if(!D(r))return-1;const a=convertUnit(r,t.value);if(!twoOfSameNumeric(r,a))return-1;let u;return u=0===a[4].value?Number.NaN:Number.isFinite(r[4].value)?Number.isFinite(a[4].value)?r[4].value%a[4].value:r[4].value:Number.NaN,resultToCalculation(e,r,u)}function solveRound(e,n,t,r,a){const u=t.value;if(!D(u))return-1;if(!a.rawPercentages&&g(u))return-1;const i=convertUnit(u,r.value);if(!twoOfSameNumeric(u,i))return-1;let o;if(0===i[4].value)o=Number.NaN;else if(Number.isFinite(u[4].value)||Number.isFinite(i[4].value))if(!Number.isFinite(u[4].value)&&Number.isFinite(i[4].value))o=u[4].value;else if(Number.isFinite(u[4].value)&&!Number.isFinite(i[4].value))switch(n){case\"down\":o=u[4].value<0?-1/0:Object.is(-0,0*u[4].value)?-0:0;break;case\"up\":o=u[4].value>0?1/0:Object.is(0,0*u[4].value)?0:-0;break;default:o=Object.is(0,0*u[4].value)?0:-0}else if(Number.isFinite(i[4].value))switch(n){case\"down\":o=Math.floor(u[4].value/i[4].value)*i[4].value;break;case\"up\":o=Math.ceil(u[4].value/i[4].value)*i[4].value;break;case\"to-zero\":o=Math.trunc(u[4].value/i[4].value)*i[4].value;break;default:{let e=Math.floor(u[4].value/i[4].value)*i[4].value,n=Math.ceil(u[4].value/i[4].value)*i[4].value;if(e>n){const t=e;e=n,n=t}const t=Math.abs(u[4].value-e),r=Math.abs(u[4].value-n);o=t===r?n:t<r?e:n;break}}else o=u[4].value;else o=Number.NaN;return resultToCalculation(e,u,o)}function solveSign(e,n,t){const r=n.value;if(!D(r))return-1;if(!t.rawPercentages&&g(r))return-1;return numberToCalculation(e,Math.sign(r[4].value))}function solveSin(e,n){const t=n.value;if(!isDimensionOrNumber(t))return-1;let r=t[4].value;if(v(t))switch(toLowerCaseAZ(t[4].unit)){case\"rad\":break;case\"deg\":r=y.get(\"rad\")(t[4].value);break;case\"grad\":r=M.get(\"rad\")(t[4].value);break;case\"turn\":r=q.get(\"rad\")(t[4].value);break;default:return-1}return r=Math.sin(r),numberToCalculation(e,r)}function solveSqrt(e,n){const t=n.value;if(!C(t))return-1;return numberToCalculation(e,Math.sqrt(t[4].value))}function solveTan(e,n){const t=n.value;if(!isDimensionOrNumber(t))return-1;const r=t[4].value;let a=0,u=t[4].value;if(v(t))switch(toLowerCaseAZ(t[4].unit)){case\"rad\":a=Z.get(\"deg\")(r);break;case\"deg\":a=r,u=y.get(\"rad\")(r);break;case\"grad\":a=M.get(\"deg\")(r),u=M.get(\"rad\")(r);break;case\"turn\":a=q.get(\"deg\")(r),u=q.get(\"rad\")(r);break;default:return-1}const i=a/90;return u=a%90==0&&i%2!=0?i>0?1/0:-1/0:Math.tan(u),numberToCalculation(e,u)}function subtraction(n){if(2!==n.length)return-1;const t=n[0].value;let r=n[1].value;if(C(t)&&C(r)){const n=t[4].value-r[4].value;return new e([f.Number,n.toString(),t[2],r[3],{value:n,type:t[4].type===m.Integer&&r[4].type===m.Integer?m.Integer:m.Number}])}if(g(t)&&g(r)){const n=t[4].value-r[4].value;return new e([f.Percentage,n.toString()+\"%\",t[2],r[3],{value:n}])}if(v(t)&&v(r)&&(r=convertUnit(t,r),toLowerCaseAZ(t[4].unit)===toLowerCaseAZ(r[4].unit))){const n=t[4].value-r[4].value;return new e([f.Dimension,n.toString()+t[4].unit,t[2],r[3],{value:n,type:t[4].type===m.Integer&&r[4].type===m.Integer?m.Integer:m.Number,unit:t[4].unit}])}return-1}function solveLog(e,t){if(1===t.length){const r=t[0];if(!r||!n(r))return-1;const a=r.value;if(!C(a))return-1;return numberToCalculation(e,Math.log(a[4].value))}if(2===t.length){const r=t[0];if(!r||!n(r))return-1;const a=r.value;if(!C(a))return-1;const u=t[1];if(!u||!n(u))return-1;const i=u.value;if(!C(i))return-1;return numberToCalculation(e,Math.log(a[4].value)/Math.log(i[4].value))}return-1}const R=/^none$/i;function isNone(e){if(Array.isArray(e)){const n=e.filter((e=>!(t(e)&&r(e))));return 1===n.length&&isNone(n[0])}if(!n(e))return!1;const a=e.value;return!!d(a)&&R.test(a[4].value)}const V=String.fromCodePoint(0);function solveRandom(e,n,t,r,a,u){if(-1===n.fixed&&!u.randomCaching)return-1;u.randomCaching||(u.randomCaching={propertyName:\"\",propertyN:0,elementID:\"\",documentID:\"\"}),u.randomCaching&&!u.randomCaching.propertyN&&(u.randomCaching.propertyN=0);const i=t.value;if(!D(i))return-1;const o=convertUnit(i,r.value);if(!twoOfSameNumeric(i,o))return-1;let l=null;if(a&&(l=convertUnit(i,a.value),!twoOfSameNumeric(i,l)))return-1;if(!Number.isFinite(i[4].value))return resultToCalculation(e,i,Number.NaN);if(!Number.isFinite(o[4].value))return resultToCalculation(e,i,Number.NaN);if(!Number.isFinite(o[4].value-i[4].value))return resultToCalculation(e,i,Number.NaN);if(l&&!Number.isFinite(l[4].value))return resultToCalculation(e,i,i[4].value);const c=-1===n.fixed?sfc32(crc32([n.dashedIdent?n.dashedIdent:`${u.randomCaching?.propertyName} ${u.randomCaching.propertyN++}`,n.elementShared?\"\":u.randomCaching.elementID,u.randomCaching.documentID].join(V))):()=>n.fixed;let s=i[4].value,v=o[4].value;if(s>v&&([s,v]=[v,s]),l&&(l[4].value<=0||Math.abs(s-v)/l[4].value>1e10)&&(l=null),l){const n=Math.max(l[4].value/1e3,1e-9),t=[s];let r=0;for(;;){r+=l[4].value;const e=s+r;if(!(e+n<v)){t.push(v);break}if(t.push(e),e+l[4].value-n>v)break}const a=c();return resultToCalculation(e,i,Number(t[Math.floor(t.length*a)].toFixed(5)))}const f=c();return resultToCalculation(e,i,Number((f*(v-s)+s).toFixed(5)))}function sfc32(e=.34944106645296036,n=.19228640875738723,t=.8784393832007205,r=.04850964319275053){return()=>{const a=((e|=0)+(n|=0)|0)+(r|=0)|0;return r=r+1|0,e=n^n>>>9,n=(t|=0)+(t<<3)|0,t=(t=t<<21|t>>>11)+a|0,(a>>>0)/4294967296}}function crc32(e){let n=0,t=0,r=0;n^=-1;for(let a=0,u=e.length;a<u;a++)r=255&(n^e.charCodeAt(a)),t=Number(\"0x\"+\"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D\".substring(9*r,9*r+8)),n=n>>>8^t;return(-1^n)>>>0}const j=new Map([[\"abs\",function abs(e,n,t){return singleNodeSolver(e,n,t,solveAbs)}],[\"acos\",function acos(e,n,t){return singleNodeSolver(e,n,t,solveACos)}],[\"asin\",function asin(e,n,t){return singleNodeSolver(e,n,t,solveASin)}],[\"atan\",function atan(e,n,t){return singleNodeSolver(e,n,t,solveATan)}],[\"atan2\",function atan2(e,n,t){return twoCommaSeparatedNodesSolver(e,n,t,solveATan2)}],[\"calc\",calc$1],[\"clamp\",function clamp(t,r,u){const i=resolveGlobalsAndConstants([...t.value.filter((e=>!a(e)))],r),l=[],c=[],s=[];{let e=l;for(let t=0;t<i.length;t++){const r=i[t];if(n(r)&&A(r.value)){if(e===s)return-1;if(e===c){e=s;continue}if(e===l){e=c;continue}return-1}e.push(r)}}const v=isNone(l),m=isNone(s);if(v&&m)return calc$1(calcWrapper(c),r,u);const p=solve(calc$1(calcWrapper(c),r,u));if(-1===p)return-1;if(v){const n=solve(calc$1(calcWrapper(s),r,u));return-1===n?-1:solveMin((C=p,g=n,new o([f.Function,\"min(\",-1,-1,{value:\"min\"}],[f.CloseParen,\")\",-1,-1,void 0],[C,new e([f.Comma,\",\",-1,-1,void 0]),g])),[p,n],u)}if(m){const e=solve(calc$1(calcWrapper(l),r,u));return-1===e?-1:solveMax(maxWrapper(e,p),[e,p],u)}var C,g;const d=solve(calc$1(calcWrapper(l),r,u));if(-1===d)return-1;const D=solve(calc$1(calcWrapper(s),r,u));if(-1===D)return-1;return solveClamp(t,d,p,D,u)}],[\"cos\",function cos(e,n,t){return singleNodeSolver(e,n,t,solveCos)}],[\"exp\",function exp(e,n,t){return singleNodeSolver(e,n,t,solveExp)}],[\"hypot\",function hypot(e,n,t){return variadicNodesSolver(e,e.value,n,t,solveHypot)}],[\"log\",function log(e,n,t){return variadicNodesSolver(e,e.value,n,t,solveLog)}],[\"max\",function max(e,n,t){return variadicNodesSolver(e,e.value,n,t,solveMax)}],[\"min\",function min(e,n,t){return variadicNodesSolver(e,e.value,n,t,solveMin)}],[\"mod\",function mod(e,n,t){return twoCommaSeparatedNodesSolver(e,n,t,solveMod)}],[\"pow\",function pow(e,n,t){return twoCommaSeparatedNodesSolver(e,n,t,solvePow)}],[\"random\",function random(e,n,t){const r=parseRandomValueSharing(e.value.filter((e=>!a(e))),n,t);if(-1===r)return-1;const[u,i]=r,o=variadicArguments(i,n,t);if(-1===o)return-1;const[l,c,s]=o;if(!l||!c)return-1;return solveRandom(e,u,l,c,s,t)}],[\"rem\",function rem(e,n,t){return twoCommaSeparatedNodesSolver(e,n,t,solveRem)}],[\"round\",function round(t,r,u){const i=resolveGlobalsAndConstants([...t.value.filter((e=>!a(e)))],r);let o=\"\",l=!1;const c=[],s=[];{let e=c;for(let t=0;t<i.length;t++){const r=i[t];if(!o&&0===c.length&&0===s.length&&n(r)&&d(r.value)){const e=r.value[4].value.toLowerCase();if(Y.has(e)){o=e;continue}}if(n(r)&&A(r.value)){if(e===s)return-1;if(e===c&&o&&0===c.length)continue;if(e===c){l=!0,e=s;continue}return-1}e.push(r)}}const v=solve(calc$1(calcWrapper(c),r,u));if(-1===v)return-1;l||0!==s.length||s.push(new e([f.Number,\"1\",-1,-1,{value:1,type:m.Integer}]));const p=solve(calc$1(calcWrapper(s),r,u));if(-1===p)return-1;o||(o=\"nearest\");return solveRound(t,o,v,p,u)}],[\"sign\",function sign(e,n,t){return singleNodeSolver(e,n,t,solveSign)}],[\"sin\",function sin(e,n,t){return singleNodeSolver(e,n,t,solveSin)}],[\"sqrt\",function sqrt(e,n,t){return singleNodeSolver(e,n,t,solveSqrt)}],[\"tan\",function tan(e,n,t){return singleNodeSolver(e,n,t,solveTan)}]]);function calc$1(e,t,r){const o=resolveGlobalsAndConstants([...e.value.filter((e=>!a(e)))],t);if(1===o.length&&n(o[0]))return{inputs:[o[0]],operation:unary};let l=0;for(;l<o.length;){const e=o[l];if(u(e)&&N(e.startToken)){const n=calc$1(e,t,r);if(-1===n)return-1;o.splice(l,1,n)}else if(i(e)){const n=j.get(e.getName().toLowerCase());if(!n)return-1;const a=n(e,t,r);if(-1===a)return-1;o.splice(l,1,a)}else l++}if(l=0,1===o.length&&isCalculation(o[0]))return o[0];for(;l<o.length;){const e=o[l];if(!e||!n(e)&&!isCalculation(e)){l++;continue}const t=o[l+1];if(!t||!n(t)){l++;continue}const r=t.value;if(!B(r)||\"*\"!==r[4].value&&\"/\"!==r[4].value){l++;continue}const a=o[l+2];if(!a||!n(a)&&!isCalculation(a))return-1;\"*\"!==r[4].value?\"/\"!==r[4].value?l++:o.splice(l,3,{inputs:[e,a],operation:division}):o.splice(l,3,{inputs:[e,a],operation:multiplication})}if(l=0,1===o.length&&isCalculation(o[0]))return o[0];for(;l<o.length;){const e=o[l];if(!e||!n(e)&&!isCalculation(e)){l++;continue}const t=o[l+1];if(!t||!n(t)){l++;continue}const r=t.value;if(!B(r)||\"+\"!==r[4].value&&\"-\"!==r[4].value){l++;continue}const a=o[l+2];if(!a||!n(a)&&!isCalculation(a))return-1;\"+\"!==r[4].value?\"-\"!==r[4].value?l++:o.splice(l,3,{inputs:[e,a],operation:subtraction}):o.splice(l,3,{inputs:[e,a],operation:addition})}return 1===o.length&&isCalculation(o[0])?o[0]:-1}function singleNodeSolver(e,n,t,r){const a=singleArgument(e.value,n,t);return-1===a?-1:r(e,a,t)}function singleArgument(e,n,t){const r=solve(calc$1(calcWrapper(resolveGlobalsAndConstants([...e.filter((e=>!a(e)))],n)),n,t));return-1===r?-1:r}function twoCommaSeparatedNodesSolver(e,n,t,r){const a=twoCommaSeparatedArguments(e.value,n,t);if(-1===a)return-1;const[u,i]=a;return r(e,u,i,t)}function twoCommaSeparatedArguments(e,t,r){const u=resolveGlobalsAndConstants([...e.filter((e=>!a(e)))],t),i=[],o=[];{let e=i;for(let t=0;t<u.length;t++){const r=u[t];if(n(r)&&A(r.value)){if(e===o)return-1;if(e===i){e=o;continue}return-1}e.push(r)}}const l=solve(calc$1(calcWrapper(i),t,r));if(-1===l)return-1;const c=solve(calc$1(calcWrapper(o),t,r));return-1===c?-1:[l,c]}function variadicNodesSolver(e,n,t,r,a){const u=variadicArguments(e.value,t,r);return-1===u?-1:a(e,u,r)}function variadicArguments(e,t,r){const u=resolveGlobalsAndConstants([...e.filter((e=>!a(e)))],t),i=[];{const e=[];let a=[];for(let t=0;t<u.length;t++){const r=u[t];n(r)&&A(r.value)?(e.push(a),a=[]):a.push(r)}e.push(a);for(let n=0;n<e.length;n++){if(0===e[n].length)return-1;const a=solve(calc$1(calcWrapper(e[n]),t,r));if(-1===a)return-1;i.push(a)}}return i}const Y=new Set([\"nearest\",\"up\",\"down\",\"to-zero\"]);function parseRandomValueSharing(e,t,r){const a={isAuto:!1,dashedIdent:\"\",fixed:-1,elementShared:!1},u=e[0];if(!n(u)||!d(u.value))return[a,e];for(let u=0;u<e.length;u++){const i=e[u];if(!n(i))return-1;if(A(i.value))return[a,e.slice(u+1)];if(!d(i.value))return-1;const o=i.value[4].value.toLowerCase();if(\"element-shared\"!==o)if(\"fixed\"!==o)if(\"auto\"!==o)if(o.startsWith(\"--\")){if(-1!==a.fixed||a.isAuto)return-1;a.dashedIdent=o}else;else{if(-1!==a.fixed||a.dashedIdent)return-1;a.isAuto=!0}else{if(a.elementShared||a.dashedIdent||a.isAuto)return-1;u++;const n=e[u];if(!n)return-1;const i=solve(calc$1(calcWrapper([n]),t,r));if(-1===i)return-1;if(!C(i.value))return-1;if(i.value[4].value<0||i.value[4].value>1)return-1;a.fixed=Math.max(0,Math.min(i.value[4].value,1-1e-9))}else{if(-1!==a.fixed)return-1;a.elementShared=!0}}return-1}function calcWrapper(e){return new o([f.Function,\"calc(\",-1,-1,{value:\"calc\"}],[f.CloseParen,\")\",-1,-1,void 0],e)}function maxWrapper(n,t){return new o([f.Function,\"max(\",-1,-1,{value:\"max\"}],[f.CloseParen,\")\",-1,-1,void 0],[n,new e([f.Comma,\",\",-1,-1,void 0]),t])}function patchNaN(n){if(-1===n)return-1;if(i(n))return n;const t=n.value;return D(t)&&Number.isNaN(t[4].value)?C(t)?new o([f.Function,\"calc(\",t[2],t[3],{value:\"calc\"}],[f.CloseParen,\")\",t[2],t[3],void 0],[new e([f.Ident,\"NaN\",t[2],t[3],{value:\"NaN\"}])]):v(t)?new o([f.Function,\"calc(\",t[2],t[3],{value:\"calc\"}],[f.CloseParen,\")\",t[2],t[3],void 0],[new e([f.Ident,\"NaN\",t[2],t[3],{value:\"NaN\"}]),new l([[f.Whitespace,\" \",t[2],t[3],void 0]]),new e([f.Delim,\"*\",t[2],t[3],{value:\"*\"}]),new l([[f.Whitespace,\" \",t[2],t[3],void 0]]),new e([f.Dimension,\"1\"+t[4].unit,t[2],t[3],{value:1,type:m.Integer,unit:t[4].unit}])]):g(t)?new o([f.Function,\"calc(\",t[2],t[3],{value:\"calc\"}],[f.CloseParen,\")\",t[2],t[3],void 0],[new e([f.Ident,\"NaN\",t[2],t[3],{value:\"NaN\"}]),new l([[f.Whitespace,\" \",t[2],t[3],void 0]]),new e([f.Delim,\"*\",t[2],t[3],{value:\"*\"}]),new l([[f.Whitespace,\" \",t[2],t[3],void 0]]),new e([f.Percentage,\"1%\",t[2],t[3],{value:1}])]):-1:n}function patchInfinity(n){if(-1===n)return-1;if(i(n))return n;const t=n.value;if(!D(t))return n;if(Number.isFinite(t[4].value)||Number.isNaN(t[4].value))return n;let r=\"\";return Number.NEGATIVE_INFINITY===t[4].value&&(r=\"-\"),C(t)?new o([f.Function,\"calc(\",t[2],t[3],{value:\"calc\"}],[f.CloseParen,\")\",t[2],t[3],void 0],[new e([f.Ident,r+\"infinity\",t[2],t[3],{value:r+\"infinity\"}])]):v(t)?new o([f.Function,\"calc(\",t[2],t[3],{value:\"calc\"}],[f.CloseParen,\")\",t[2],t[3],void 0],[new e([f.Ident,r+\"infinity\",t[2],t[3],{value:r+\"infinity\"}]),new l([[f.Whitespace,\" \",t[2],t[3],void 0]]),new e([f.Delim,\"*\",t[2],t[3],{value:\"*\"}]),new l([[f.Whitespace,\" \",t[2],t[3],void 0]]),new e([f.Dimension,\"1\"+t[4].unit,t[2],t[3],{value:1,type:m.Integer,unit:t[4].unit}])]):new o([f.Function,\"calc(\",t[2],t[3],{value:\"calc\"}],[f.CloseParen,\")\",t[2],t[3],void 0],[new e([f.Ident,r+\"infinity\",t[2],t[3],{value:r+\"infinity\"}]),new l([[f.Whitespace,\" \",t[2],t[3],void 0]]),new e([f.Delim,\"*\",t[2],t[3],{value:\"*\"}]),new l([[f.Whitespace,\" \",t[2],t[3],void 0]]),new e([f.Percentage,\"1%\",t[2],t[3],{value:1}])])}function patchMinusZero(e){if(-1===e)return-1;if(i(e))return e;const n=e.value;return D(n)&&Object.is(-0,n[4].value)?(\"-0\"===n[1]||(g(n)?n[1]=\"-0%\":v(n)?n[1]=\"-0\"+n[4].unit:n[1]=\"-0\"),e):e}function patchPrecision(e,n=13){if(-1===e)return-1;if(n<=0)return e;if(i(e))return e;const t=e.value;if(!D(t))return e;if(Number.isInteger(t[4].value))return e;const r=Number(t[4].value.toFixed(n)).toString();return C(t)?t[1]=r:g(t)?t[1]=r+\"%\":v(t)&&(t[1]=r+t[4].unit),e}function patchCanonicalUnit(e){return-1===e?-1:i(e)?e:v(e.value)?(e.value=toCanonicalUnit(e.value),e):e}function patchCalcResult(e,n){let t=e;return n?.toCanonicalUnits&&(t=patchCanonicalUnit(t)),t=patchPrecision(t,n?.precision),t=patchMinusZero(t),n?.censorIntoStandardRepresentableValues||(t=patchNaN(t),t=patchInfinity(t)),t}function tokenizeGlobals(e){const n=new Map;if(!e)return n;for(const[t,r]of e)if(h(r))n.set(t,r);else if(\"string\"!=typeof r);else{const e=F({css:r}),a=e.nextToken();if(e.nextToken(),!e.endOfFile())continue;if(!D(a))continue;n.set(t,a)}return n}function calc(e,n){return calcFromComponentValues(c(b({css:e}),{}),n).map((e=>e.map((e=>w(...e.tokens()))).join(\"\"))).join(\",\")}function calcFromComponentValues(e,n){const t=tokenizeGlobals(n?.globals);return s(e,(e=>{if(!i(e))return;const r=j.get(e.getName().toLowerCase());if(!r)return;const a=patchCalcResult(solve(r(e,t,n??{})),n);return-1!==a?a:void 0}))}const _=new Set(j.keys());export{calc,calcFromComponentValues,_ as mathFunctionNames};\n","/**\n * @module LRUCache\n */\nconst defaultPerf = (typeof performance === 'object' &&\n    performance &&\n    typeof performance.now === 'function') ?\n    performance\n    : Date;\nconst warned = new Set();\n/* c8 ignore start */\nconst PROCESS = (typeof process === 'object' && !!process ?\n    process\n    : {});\n/* c8 ignore start */\nconst emitWarning = (msg, type, code, fn) => {\n    typeof PROCESS.emitWarning === 'function' ?\n        PROCESS.emitWarning(msg, type, code, fn)\n        : console.error(`[${code}] ${type}: ${msg}`);\n};\nlet AC = globalThis.AbortController;\nlet AS = globalThis.AbortSignal;\n/* c8 ignore start */\nif (typeof AC === 'undefined') {\n    //@ts-ignore\n    AS = class AbortSignal {\n        onabort;\n        _onabort = [];\n        reason;\n        aborted = false;\n        addEventListener(_, fn) {\n            this._onabort.push(fn);\n        }\n    };\n    //@ts-ignore\n    AC = class AbortController {\n        constructor() {\n            warnACPolyfill();\n        }\n        signal = new AS();\n        abort(reason) {\n            if (this.signal.aborted)\n                return;\n            //@ts-ignore\n            this.signal.reason = reason;\n            //@ts-ignore\n            this.signal.aborted = true;\n            //@ts-ignore\n            for (const fn of this.signal._onabort) {\n                fn(reason);\n            }\n            this.signal.onabort?.(reason);\n        }\n    };\n    let printACPolyfillWarning = PROCESS.env?.LRU_CACHE_IGNORE_AC_WARNING !== '1';\n    const warnACPolyfill = () => {\n        if (!printACPolyfillWarning)\n            return;\n        printACPolyfillWarning = false;\n        emitWarning('AbortController is not defined. If using lru-cache in ' +\n            'node 14, load an AbortController polyfill from the ' +\n            '`node-abort-controller` package. A minimal polyfill is ' +\n            'provided for use by LRUCache.fetch(), but it should not be ' +\n            'relied upon in other contexts (eg, passing it to other APIs that ' +\n            'use AbortController/AbortSignal might have undesirable effects). ' +\n            'You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.', 'NO_ABORT_CONTROLLER', 'ENOTSUP', warnACPolyfill);\n    };\n}\n/* c8 ignore stop */\nconst shouldWarn = (code) => !warned.has(code);\nconst TYPE = Symbol('type');\nconst isPosInt = (n) => n && n === Math.floor(n) && n > 0 && isFinite(n);\n/* c8 ignore start */\n// This is a little bit ridiculous, tbh.\n// The maximum array length is 2^32-1 or thereabouts on most JS impls.\n// And well before that point, you're caching the entire world, I mean,\n// that's ~32GB of just integers for the next/prev links, plus whatever\n// else to hold that many keys and values.  Just filling the memory with\n// zeroes at init time is brutal when you get that big.\n// But why not be complete?\n// Maybe in the future, these limits will have expanded.\nconst getUintArray = (max) => !isPosInt(max) ? null\n    : max <= Math.pow(2, 8) ? Uint8Array\n        : max <= Math.pow(2, 16) ? Uint16Array\n            : max <= Math.pow(2, 32) ? Uint32Array\n                : max <= Number.MAX_SAFE_INTEGER ? ZeroArray\n                    : null;\n/* c8 ignore stop */\nclass ZeroArray extends Array {\n    constructor(size) {\n        super(size);\n        this.fill(0);\n    }\n}\nclass Stack {\n    heap;\n    length;\n    // private constructor\n    static #constructing = false;\n    static create(max) {\n        const HeapCls = getUintArray(max);\n        if (!HeapCls)\n            return [];\n        Stack.#constructing = true;\n        const s = new Stack(max, HeapCls);\n        Stack.#constructing = false;\n        return s;\n    }\n    constructor(max, HeapCls) {\n        /* c8 ignore start */\n        if (!Stack.#constructing) {\n            throw new TypeError('instantiate Stack using Stack.create(n)');\n        }\n        /* c8 ignore stop */\n        this.heap = new HeapCls(max);\n        this.length = 0;\n    }\n    push(n) {\n        this.heap[this.length++] = n;\n    }\n    pop() {\n        return this.heap[--this.length];\n    }\n}\n/**\n * Default export, the thing you're using this module to get.\n *\n * The `K` and `V` types define the key and value types, respectively. The\n * optional `FC` type defines the type of the `context` object passed to\n * `cache.fetch()` and `cache.memo()`.\n *\n * Keys and values **must not** be `null` or `undefined`.\n *\n * All properties from the options object (with the exception of `max`,\n * `maxSize`, `fetchMethod`, `memoMethod`, `dispose` and `disposeAfter`) are\n * added as normal public members. (The listed options are read-only getters.)\n *\n * Changing any of these will alter the defaults for subsequent method calls.\n */\nexport class LRUCache {\n    // options that cannot be changed without disaster\n    #max;\n    #maxSize;\n    #dispose;\n    #onInsert;\n    #disposeAfter;\n    #fetchMethod;\n    #memoMethod;\n    #perf;\n    /**\n     * {@link LRUCache.OptionsBase.perf}\n     */\n    get perf() {\n        return this.#perf;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.ttl}\n     */\n    ttl;\n    /**\n     * {@link LRUCache.OptionsBase.ttlResolution}\n     */\n    ttlResolution;\n    /**\n     * {@link LRUCache.OptionsBase.ttlAutopurge}\n     */\n    ttlAutopurge;\n    /**\n     * {@link LRUCache.OptionsBase.updateAgeOnGet}\n     */\n    updateAgeOnGet;\n    /**\n     * {@link LRUCache.OptionsBase.updateAgeOnHas}\n     */\n    updateAgeOnHas;\n    /**\n     * {@link LRUCache.OptionsBase.allowStale}\n     */\n    allowStale;\n    /**\n     * {@link LRUCache.OptionsBase.noDisposeOnSet}\n     */\n    noDisposeOnSet;\n    /**\n     * {@link LRUCache.OptionsBase.noUpdateTTL}\n     */\n    noUpdateTTL;\n    /**\n     * {@link LRUCache.OptionsBase.maxEntrySize}\n     */\n    maxEntrySize;\n    /**\n     * {@link LRUCache.OptionsBase.sizeCalculation}\n     */\n    sizeCalculation;\n    /**\n     * {@link LRUCache.OptionsBase.noDeleteOnFetchRejection}\n     */\n    noDeleteOnFetchRejection;\n    /**\n     * {@link LRUCache.OptionsBase.noDeleteOnStaleGet}\n     */\n    noDeleteOnStaleGet;\n    /**\n     * {@link LRUCache.OptionsBase.allowStaleOnFetchAbort}\n     */\n    allowStaleOnFetchAbort;\n    /**\n     * {@link LRUCache.OptionsBase.allowStaleOnFetchRejection}\n     */\n    allowStaleOnFetchRejection;\n    /**\n     * {@link LRUCache.OptionsBase.ignoreFetchAbort}\n     */\n    ignoreFetchAbort;\n    // computed properties\n    #size;\n    #calculatedSize;\n    #keyMap;\n    #keyList;\n    #valList;\n    #next;\n    #prev;\n    #head;\n    #tail;\n    #free;\n    #disposed;\n    #sizes;\n    #starts;\n    #ttls;\n    #autopurgeTimers;\n    #hasDispose;\n    #hasFetchMethod;\n    #hasDisposeAfter;\n    #hasOnInsert;\n    /**\n     * Do not call this method unless you need to inspect the\n     * inner workings of the cache.  If anything returned by this\n     * object is modified in any way, strange breakage may occur.\n     *\n     * These fields are private for a reason!\n     *\n     * @internal\n     */\n    static unsafeExposeInternals(c) {\n        return {\n            // properties\n            starts: c.#starts,\n            ttls: c.#ttls,\n            autopurgeTimers: c.#autopurgeTimers,\n            sizes: c.#sizes,\n            keyMap: c.#keyMap,\n            keyList: c.#keyList,\n            valList: c.#valList,\n            next: c.#next,\n            prev: c.#prev,\n            get head() {\n                return c.#head;\n            },\n            get tail() {\n                return c.#tail;\n            },\n            free: c.#free,\n            // methods\n            isBackgroundFetch: (p) => c.#isBackgroundFetch(p),\n            backgroundFetch: (k, index, options, context) => c.#backgroundFetch(k, index, options, context),\n            moveToTail: (index) => c.#moveToTail(index),\n            indexes: (options) => c.#indexes(options),\n            rindexes: (options) => c.#rindexes(options),\n            isStale: (index) => c.#isStale(index),\n        };\n    }\n    // Protected read-only members\n    /**\n     * {@link LRUCache.OptionsBase.max} (read-only)\n     */\n    get max() {\n        return this.#max;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.maxSize} (read-only)\n     */\n    get maxSize() {\n        return this.#maxSize;\n    }\n    /**\n     * The total computed size of items in the cache (read-only)\n     */\n    get calculatedSize() {\n        return this.#calculatedSize;\n    }\n    /**\n     * The number of items stored in the cache (read-only)\n     */\n    get size() {\n        return this.#size;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.fetchMethod} (read-only)\n     */\n    get fetchMethod() {\n        return this.#fetchMethod;\n    }\n    get memoMethod() {\n        return this.#memoMethod;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.dispose} (read-only)\n     */\n    get dispose() {\n        return this.#dispose;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.onInsert} (read-only)\n     */\n    get onInsert() {\n        return this.#onInsert;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.disposeAfter} (read-only)\n     */\n    get disposeAfter() {\n        return this.#disposeAfter;\n    }\n    constructor(options) {\n        const { max = 0, ttl, ttlResolution = 1, ttlAutopurge, updateAgeOnGet, updateAgeOnHas, allowStale, dispose, onInsert, disposeAfter, noDisposeOnSet, noUpdateTTL, maxSize = 0, maxEntrySize = 0, sizeCalculation, fetchMethod, memoMethod, noDeleteOnFetchRejection, noDeleteOnStaleGet, allowStaleOnFetchRejection, allowStaleOnFetchAbort, ignoreFetchAbort, perf, } = options;\n        if (perf !== undefined) {\n            if (typeof perf?.now !== 'function') {\n                throw new TypeError('perf option must have a now() method if specified');\n            }\n        }\n        this.#perf = perf ?? defaultPerf;\n        if (max !== 0 && !isPosInt(max)) {\n            throw new TypeError('max option must be a nonnegative integer');\n        }\n        const UintArray = max ? getUintArray(max) : Array;\n        if (!UintArray) {\n            throw new Error('invalid max value: ' + max);\n        }\n        this.#max = max;\n        this.#maxSize = maxSize;\n        this.maxEntrySize = maxEntrySize || this.#maxSize;\n        this.sizeCalculation = sizeCalculation;\n        if (this.sizeCalculation) {\n            if (!this.#maxSize && !this.maxEntrySize) {\n                throw new TypeError('cannot set sizeCalculation without setting maxSize or maxEntrySize');\n            }\n            if (typeof this.sizeCalculation !== 'function') {\n                throw new TypeError('sizeCalculation set to non-function');\n            }\n        }\n        if (memoMethod !== undefined && typeof memoMethod !== 'function') {\n            throw new TypeError('memoMethod must be a function if defined');\n        }\n        this.#memoMethod = memoMethod;\n        if (fetchMethod !== undefined && typeof fetchMethod !== 'function') {\n            throw new TypeError('fetchMethod must be a function if specified');\n        }\n        this.#fetchMethod = fetchMethod;\n        this.#hasFetchMethod = !!fetchMethod;\n        this.#keyMap = new Map();\n        this.#keyList = new Array(max).fill(undefined);\n        this.#valList = new Array(max).fill(undefined);\n        this.#next = new UintArray(max);\n        this.#prev = new UintArray(max);\n        this.#head = 0;\n        this.#tail = 0;\n        this.#free = Stack.create(max);\n        this.#size = 0;\n        this.#calculatedSize = 0;\n        if (typeof dispose === 'function') {\n            this.#dispose = dispose;\n        }\n        if (typeof onInsert === 'function') {\n            this.#onInsert = onInsert;\n        }\n        if (typeof disposeAfter === 'function') {\n            this.#disposeAfter = disposeAfter;\n            this.#disposed = [];\n        }\n        else {\n            this.#disposeAfter = undefined;\n            this.#disposed = undefined;\n        }\n        this.#hasDispose = !!this.#dispose;\n        this.#hasOnInsert = !!this.#onInsert;\n        this.#hasDisposeAfter = !!this.#disposeAfter;\n        this.noDisposeOnSet = !!noDisposeOnSet;\n        this.noUpdateTTL = !!noUpdateTTL;\n        this.noDeleteOnFetchRejection = !!noDeleteOnFetchRejection;\n        this.allowStaleOnFetchRejection = !!allowStaleOnFetchRejection;\n        this.allowStaleOnFetchAbort = !!allowStaleOnFetchAbort;\n        this.ignoreFetchAbort = !!ignoreFetchAbort;\n        // NB: maxEntrySize is set to maxSize if it's set\n        if (this.maxEntrySize !== 0) {\n            if (this.#maxSize !== 0) {\n                if (!isPosInt(this.#maxSize)) {\n                    throw new TypeError('maxSize must be a positive integer if specified');\n                }\n            }\n            if (!isPosInt(this.maxEntrySize)) {\n                throw new TypeError('maxEntrySize must be a positive integer if specified');\n            }\n            this.#initializeSizeTracking();\n        }\n        this.allowStale = !!allowStale;\n        this.noDeleteOnStaleGet = !!noDeleteOnStaleGet;\n        this.updateAgeOnGet = !!updateAgeOnGet;\n        this.updateAgeOnHas = !!updateAgeOnHas;\n        this.ttlResolution =\n            isPosInt(ttlResolution) || ttlResolution === 0 ? ttlResolution : 1;\n        this.ttlAutopurge = !!ttlAutopurge;\n        this.ttl = ttl || 0;\n        if (this.ttl) {\n            if (!isPosInt(this.ttl)) {\n                throw new TypeError('ttl must be a positive integer if specified');\n            }\n            this.#initializeTTLTracking();\n        }\n        // do not allow completely unbounded caches\n        if (this.#max === 0 && this.ttl === 0 && this.#maxSize === 0) {\n            throw new TypeError('At least one of max, maxSize, or ttl is required');\n        }\n        if (!this.ttlAutopurge && !this.#max && !this.#maxSize) {\n            const code = 'LRU_CACHE_UNBOUNDED';\n            if (shouldWarn(code)) {\n                warned.add(code);\n                const msg = 'TTL caching without ttlAutopurge, max, or maxSize can ' +\n                    'result in unbounded memory consumption.';\n                emitWarning(msg, 'UnboundedCacheWarning', code, LRUCache);\n            }\n        }\n    }\n    /**\n     * Return the number of ms left in the item's TTL. If item is not in cache,\n     * returns `0`. Returns `Infinity` if item is in cache without a defined TTL.\n     */\n    getRemainingTTL(key) {\n        return this.#keyMap.has(key) ? Infinity : 0;\n    }\n    #initializeTTLTracking() {\n        const ttls = new ZeroArray(this.#max);\n        const starts = new ZeroArray(this.#max);\n        this.#ttls = ttls;\n        this.#starts = starts;\n        const purgeTimers = this.ttlAutopurge ?\n            new Array(this.#max)\n            : undefined;\n        this.#autopurgeTimers = purgeTimers;\n        this.#setItemTTL = (index, ttl, start = this.#perf.now()) => {\n            starts[index] = ttl !== 0 ? start : 0;\n            ttls[index] = ttl;\n            // clear out the purge timer if we're setting TTL to 0, and\n            // previously had a ttl purge timer running, so it doesn't\n            // fire unnecessarily.\n            if (purgeTimers?.[index]) {\n                clearTimeout(purgeTimers[index]);\n                purgeTimers[index] = undefined;\n            }\n            if (ttl !== 0 && purgeTimers) {\n                const t = setTimeout(() => {\n                    if (this.#isStale(index)) {\n                        this.#delete(this.#keyList[index], 'expire');\n                    }\n                }, ttl + 1);\n                // unref() not supported on all platforms\n                /* c8 ignore start */\n                if (t.unref) {\n                    t.unref();\n                }\n                /* c8 ignore stop */\n                purgeTimers[index] = t;\n            }\n        };\n        this.#updateItemAge = index => {\n            starts[index] = ttls[index] !== 0 ? this.#perf.now() : 0;\n        };\n        this.#statusTTL = (status, index) => {\n            if (ttls[index]) {\n                const ttl = ttls[index];\n                const start = starts[index];\n                /* c8 ignore next */\n                if (!ttl || !start)\n                    return;\n                status.ttl = ttl;\n                status.start = start;\n                status.now = cachedNow || getNow();\n                const age = status.now - start;\n                status.remainingTTL = ttl - age;\n            }\n        };\n        // debounce calls to perf.now() to 1s so we're not hitting\n        // that costly call repeatedly.\n        let cachedNow = 0;\n        const getNow = () => {\n            const n = this.#perf.now();\n            if (this.ttlResolution > 0) {\n                cachedNow = n;\n                const t = setTimeout(() => (cachedNow = 0), this.ttlResolution);\n                // not available on all platforms\n                /* c8 ignore start */\n                if (t.unref) {\n                    t.unref();\n                }\n                /* c8 ignore stop */\n            }\n            return n;\n        };\n        this.getRemainingTTL = key => {\n            const index = this.#keyMap.get(key);\n            if (index === undefined) {\n                return 0;\n            }\n            const ttl = ttls[index];\n            const start = starts[index];\n            if (!ttl || !start) {\n                return Infinity;\n            }\n            const age = (cachedNow || getNow()) - start;\n            return ttl - age;\n        };\n        this.#isStale = index => {\n            const s = starts[index];\n            const t = ttls[index];\n            return !!t && !!s && (cachedNow || getNow()) - s > t;\n        };\n    }\n    // conditionally set private methods related to TTL\n    #updateItemAge = () => { };\n    #statusTTL = () => { };\n    #setItemTTL = () => { };\n    /* c8 ignore stop */\n    #isStale = () => false;\n    #initializeSizeTracking() {\n        const sizes = new ZeroArray(this.#max);\n        this.#calculatedSize = 0;\n        this.#sizes = sizes;\n        this.#removeItemSize = index => {\n            this.#calculatedSize -= sizes[index];\n            sizes[index] = 0;\n        };\n        this.#requireSize = (k, v, size, sizeCalculation) => {\n            // provisionally accept background fetches.\n            // actual value size will be checked when they return.\n            if (this.#isBackgroundFetch(v)) {\n                return 0;\n            }\n            if (!isPosInt(size)) {\n                if (sizeCalculation) {\n                    if (typeof sizeCalculation !== 'function') {\n                        throw new TypeError('sizeCalculation must be a function');\n                    }\n                    size = sizeCalculation(v, k);\n                    if (!isPosInt(size)) {\n                        throw new TypeError('sizeCalculation return invalid (expect positive integer)');\n                    }\n                }\n                else {\n                    throw new TypeError('invalid size value (must be positive integer). ' +\n                        'When maxSize or maxEntrySize is used, sizeCalculation ' +\n                        'or size must be set.');\n                }\n            }\n            return size;\n        };\n        this.#addItemSize = (index, size, status) => {\n            sizes[index] = size;\n            if (this.#maxSize) {\n                const maxSize = this.#maxSize - sizes[index];\n                while (this.#calculatedSize > maxSize) {\n                    this.#evict(true);\n                }\n            }\n            this.#calculatedSize += sizes[index];\n            if (status) {\n                status.entrySize = size;\n                status.totalCalculatedSize = this.#calculatedSize;\n            }\n        };\n    }\n    #removeItemSize = _i => { };\n    #addItemSize = (_i, _s, _st) => { };\n    #requireSize = (_k, _v, size, sizeCalculation) => {\n        if (size || sizeCalculation) {\n            throw new TypeError('cannot set size without setting maxSize or maxEntrySize on cache');\n        }\n        return 0;\n    };\n    *#indexes({ allowStale = this.allowStale } = {}) {\n        if (this.#size) {\n            for (let i = this.#tail; true;) {\n                if (!this.#isValidIndex(i)) {\n                    break;\n                }\n                if (allowStale || !this.#isStale(i)) {\n                    yield i;\n                }\n                if (i === this.#head) {\n                    break;\n                }\n                else {\n                    i = this.#prev[i];\n                }\n            }\n        }\n    }\n    *#rindexes({ allowStale = this.allowStale } = {}) {\n        if (this.#size) {\n            for (let i = this.#head; true;) {\n                if (!this.#isValidIndex(i)) {\n                    break;\n                }\n                if (allowStale || !this.#isStale(i)) {\n                    yield i;\n                }\n                if (i === this.#tail) {\n                    break;\n                }\n                else {\n                    i = this.#next[i];\n                }\n            }\n        }\n    }\n    #isValidIndex(index) {\n        return (index !== undefined &&\n            this.#keyMap.get(this.#keyList[index]) === index);\n    }\n    /**\n     * Return a generator yielding `[key, value]` pairs,\n     * in order from most recently used to least recently used.\n     */\n    *entries() {\n        for (const i of this.#indexes()) {\n            if (this.#valList[i] !== undefined &&\n                this.#keyList[i] !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield [this.#keyList[i], this.#valList[i]];\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.entries}\n     *\n     * Return a generator yielding `[key, value]` pairs,\n     * in order from least recently used to most recently used.\n     */\n    *rentries() {\n        for (const i of this.#rindexes()) {\n            if (this.#valList[i] !== undefined &&\n                this.#keyList[i] !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield [this.#keyList[i], this.#valList[i]];\n            }\n        }\n    }\n    /**\n     * Return a generator yielding the keys in the cache,\n     * in order from most recently used to least recently used.\n     */\n    *keys() {\n        for (const i of this.#indexes()) {\n            const k = this.#keyList[i];\n            if (k !== undefined && !this.#isBackgroundFetch(this.#valList[i])) {\n                yield k;\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.keys}\n     *\n     * Return a generator yielding the keys in the cache,\n     * in order from least recently used to most recently used.\n     */\n    *rkeys() {\n        for (const i of this.#rindexes()) {\n            const k = this.#keyList[i];\n            if (k !== undefined && !this.#isBackgroundFetch(this.#valList[i])) {\n                yield k;\n            }\n        }\n    }\n    /**\n     * Return a generator yielding the values in the cache,\n     * in order from most recently used to least recently used.\n     */\n    *values() {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            if (v !== undefined && !this.#isBackgroundFetch(this.#valList[i])) {\n                yield this.#valList[i];\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.values}\n     *\n     * Return a generator yielding the values in the cache,\n     * in order from least recently used to most recently used.\n     */\n    *rvalues() {\n        for (const i of this.#rindexes()) {\n            const v = this.#valList[i];\n            if (v !== undefined && !this.#isBackgroundFetch(this.#valList[i])) {\n                yield this.#valList[i];\n            }\n        }\n    }\n    /**\n     * Iterating over the cache itself yields the same results as\n     * {@link LRUCache.entries}\n     */\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    /**\n     * A String value that is used in the creation of the default string\n     * description of an object. Called by the built-in method\n     * `Object.prototype.toString`.\n     */\n    [Symbol.toStringTag] = 'LRUCache';\n    /**\n     * Find a value for which the supplied fn method returns a truthy value,\n     * similar to `Array.find()`. fn is called as `fn(value, key, cache)`.\n     */\n    find(fn, getOptions = {}) {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v;\n            if (value === undefined)\n                continue;\n            if (fn(value, this.#keyList[i], this)) {\n                return this.get(this.#keyList[i], getOptions);\n            }\n        }\n    }\n    /**\n     * Call the supplied function on each item in the cache, in order from most\n     * recently used to least recently used.\n     *\n     * `fn` is called as `fn(value, key, cache)`.\n     *\n     * If `thisp` is provided, function will be called in the `this`-context of\n     * the provided object, or the cache if no `thisp` object is provided.\n     *\n     * Does not update age or recenty of use, or iterate over stale values.\n     */\n    forEach(fn, thisp = this) {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v;\n            if (value === undefined)\n                continue;\n            fn.call(thisp, value, this.#keyList[i], this);\n        }\n    }\n    /**\n     * The same as {@link LRUCache.forEach} but items are iterated over in\n     * reverse order.  (ie, less recently used items are iterated over first.)\n     */\n    rforEach(fn, thisp = this) {\n        for (const i of this.#rindexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v;\n            if (value === undefined)\n                continue;\n            fn.call(thisp, value, this.#keyList[i], this);\n        }\n    }\n    /**\n     * Delete any stale entries. Returns true if anything was removed,\n     * false otherwise.\n     */\n    purgeStale() {\n        let deleted = false;\n        for (const i of this.#rindexes({ allowStale: true })) {\n            if (this.#isStale(i)) {\n                this.#delete(this.#keyList[i], 'expire');\n                deleted = true;\n            }\n        }\n        return deleted;\n    }\n    /**\n     * Get the extended info about a given entry, to get its value, size, and\n     * TTL info simultaneously. Returns `undefined` if the key is not present.\n     *\n     * Unlike {@link LRUCache#dump}, which is designed to be portable and survive\n     * serialization, the `start` value is always the current timestamp, and the\n     * `ttl` is a calculated remaining time to live (negative if expired).\n     *\n     * Always returns stale values, if their info is found in the cache, so be\n     * sure to check for expirations (ie, a negative {@link LRUCache.Entry#ttl})\n     * if relevant.\n     */\n    info(key) {\n        const i = this.#keyMap.get(key);\n        if (i === undefined)\n            return undefined;\n        const v = this.#valList[i];\n        /* c8 ignore start - this isn't tested for the info function,\n         * but it's the same logic as found in other places. */\n        const value = this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v;\n        if (value === undefined)\n            return undefined;\n        /* c8 ignore end */\n        const entry = { value };\n        if (this.#ttls && this.#starts) {\n            const ttl = this.#ttls[i];\n            const start = this.#starts[i];\n            if (ttl && start) {\n                const remain = ttl - (this.#perf.now() - start);\n                entry.ttl = remain;\n                entry.start = Date.now();\n            }\n        }\n        if (this.#sizes) {\n            entry.size = this.#sizes[i];\n        }\n        return entry;\n    }\n    /**\n     * Return an array of [key, {@link LRUCache.Entry}] tuples which can be\n     * passed to {@link LRUCache#load}.\n     *\n     * The `start` fields are calculated relative to a portable `Date.now()`\n     * timestamp, even if `performance.now()` is available.\n     *\n     * Stale entries are always included in the `dump`, even if\n     * {@link LRUCache.OptionsBase.allowStale} is false.\n     *\n     * Note: this returns an actual array, not a generator, so it can be more\n     * easily passed around.\n     */\n    dump() {\n        const arr = [];\n        for (const i of this.#indexes({ allowStale: true })) {\n            const key = this.#keyList[i];\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v;\n            if (value === undefined || key === undefined)\n                continue;\n            const entry = { value };\n            if (this.#ttls && this.#starts) {\n                entry.ttl = this.#ttls[i];\n                // always dump the start relative to a portable timestamp\n                // it's ok for this to be a bit slow, it's a rare operation.\n                const age = this.#perf.now() - this.#starts[i];\n                entry.start = Math.floor(Date.now() - age);\n            }\n            if (this.#sizes) {\n                entry.size = this.#sizes[i];\n            }\n            arr.unshift([key, entry]);\n        }\n        return arr;\n    }\n    /**\n     * Reset the cache and load in the items in entries in the order listed.\n     *\n     * The shape of the resulting cache may be different if the same options are\n     * not used in both caches.\n     *\n     * The `start` fields are assumed to be calculated relative to a portable\n     * `Date.now()` timestamp, even if `performance.now()` is available.\n     */\n    load(arr) {\n        this.clear();\n        for (const [key, entry] of arr) {\n            if (entry.start) {\n                // entry.start is a portable timestamp, but we may be using\n                // node's performance.now(), so calculate the offset, so that\n                // we get the intended remaining TTL, no matter how long it's\n                // been on ice.\n                //\n                // it's ok for this to be a bit slow, it's a rare operation.\n                const age = Date.now() - entry.start;\n                entry.start = this.#perf.now() - age;\n            }\n            this.set(key, entry.value, entry);\n        }\n    }\n    /**\n     * Add a value to the cache.\n     *\n     * Note: if `undefined` is specified as a value, this is an alias for\n     * {@link LRUCache#delete}\n     *\n     * Fields on the {@link LRUCache.SetOptions} options param will override\n     * their corresponding values in the constructor options for the scope\n     * of this single `set()` operation.\n     *\n     * If `start` is provided, then that will set the effective start\n     * time for the TTL calculation. Note that this must be a previous\n     * value of `performance.now()` if supported, or a previous value of\n     * `Date.now()` if not.\n     *\n     * Options object may also include `size`, which will prevent\n     * calling the `sizeCalculation` function and just use the specified\n     * number if it is a positive integer, and `noDisposeOnSet` which\n     * will prevent calling a `dispose` function in the case of\n     * overwrites.\n     *\n     * If the `size` (or return value of `sizeCalculation`) for a given\n     * entry is greater than `maxEntrySize`, then the item will not be\n     * added to the cache.\n     *\n     * Will update the recency of the entry.\n     *\n     * If the value is `undefined`, then this is an alias for\n     * `cache.delete(key)`. `undefined` is never stored in the cache.\n     */\n    set(k, v, setOptions = {}) {\n        if (v === undefined) {\n            this.delete(k);\n            return this;\n        }\n        const { ttl = this.ttl, start, noDisposeOnSet = this.noDisposeOnSet, sizeCalculation = this.sizeCalculation, status, } = setOptions;\n        let { noUpdateTTL = this.noUpdateTTL } = setOptions;\n        const size = this.#requireSize(k, v, setOptions.size || 0, sizeCalculation);\n        // if the item doesn't fit, don't do anything\n        // NB: maxEntrySize set to maxSize by default\n        if (this.maxEntrySize && size > this.maxEntrySize) {\n            if (status) {\n                status.set = 'miss';\n                status.maxEntrySizeExceeded = true;\n            }\n            // have to delete, in case something is there already.\n            this.#delete(k, 'set');\n            return this;\n        }\n        let index = this.#size === 0 ? undefined : this.#keyMap.get(k);\n        if (index === undefined) {\n            // addition\n            index = (this.#size === 0 ? this.#tail\n                : this.#free.length !== 0 ? this.#free.pop()\n                    : this.#size === this.#max ? this.#evict(false)\n                        : this.#size);\n            this.#keyList[index] = k;\n            this.#valList[index] = v;\n            this.#keyMap.set(k, index);\n            this.#next[this.#tail] = index;\n            this.#prev[index] = this.#tail;\n            this.#tail = index;\n            this.#size++;\n            this.#addItemSize(index, size, status);\n            if (status)\n                status.set = 'add';\n            noUpdateTTL = false;\n            if (this.#hasOnInsert) {\n                this.#onInsert?.(v, k, 'add');\n            }\n        }\n        else {\n            // update\n            this.#moveToTail(index);\n            const oldVal = this.#valList[index];\n            if (v !== oldVal) {\n                if (this.#hasFetchMethod && this.#isBackgroundFetch(oldVal)) {\n                    oldVal.__abortController.abort(new Error('replaced'));\n                    const { __staleWhileFetching: s } = oldVal;\n                    if (s !== undefined && !noDisposeOnSet) {\n                        if (this.#hasDispose) {\n                            this.#dispose?.(s, k, 'set');\n                        }\n                        if (this.#hasDisposeAfter) {\n                            this.#disposed?.push([s, k, 'set']);\n                        }\n                    }\n                }\n                else if (!noDisposeOnSet) {\n                    if (this.#hasDispose) {\n                        this.#dispose?.(oldVal, k, 'set');\n                    }\n                    if (this.#hasDisposeAfter) {\n                        this.#disposed?.push([oldVal, k, 'set']);\n                    }\n                }\n                this.#removeItemSize(index);\n                this.#addItemSize(index, size, status);\n                this.#valList[index] = v;\n                if (status) {\n                    status.set = 'replace';\n                    const oldValue = oldVal && this.#isBackgroundFetch(oldVal) ?\n                        oldVal.__staleWhileFetching\n                        : oldVal;\n                    if (oldValue !== undefined)\n                        status.oldValue = oldValue;\n                }\n            }\n            else if (status) {\n                status.set = 'update';\n            }\n            if (this.#hasOnInsert) {\n                this.onInsert?.(v, k, v === oldVal ? 'update' : 'replace');\n            }\n        }\n        if (ttl !== 0 && !this.#ttls) {\n            this.#initializeTTLTracking();\n        }\n        if (this.#ttls) {\n            if (!noUpdateTTL) {\n                this.#setItemTTL(index, ttl, start);\n            }\n            if (status)\n                this.#statusTTL(status, index);\n        }\n        if (!noDisposeOnSet && this.#hasDisposeAfter && this.#disposed) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n        return this;\n    }\n    /**\n     * Evict the least recently used item, returning its value or\n     * `undefined` if cache is empty.\n     */\n    pop() {\n        try {\n            while (this.#size) {\n                const val = this.#valList[this.#head];\n                this.#evict(true);\n                if (this.#isBackgroundFetch(val)) {\n                    if (val.__staleWhileFetching) {\n                        return val.__staleWhileFetching;\n                    }\n                }\n                else if (val !== undefined) {\n                    return val;\n                }\n            }\n        }\n        finally {\n            if (this.#hasDisposeAfter && this.#disposed) {\n                const dt = this.#disposed;\n                let task;\n                while ((task = dt?.shift())) {\n                    this.#disposeAfter?.(...task);\n                }\n            }\n        }\n    }\n    #evict(free) {\n        const head = this.#head;\n        const k = this.#keyList[head];\n        const v = this.#valList[head];\n        if (this.#hasFetchMethod && this.#isBackgroundFetch(v)) {\n            v.__abortController.abort(new Error('evicted'));\n        }\n        else if (this.#hasDispose || this.#hasDisposeAfter) {\n            if (this.#hasDispose) {\n                this.#dispose?.(v, k, 'evict');\n            }\n            if (this.#hasDisposeAfter) {\n                this.#disposed?.push([v, k, 'evict']);\n            }\n        }\n        this.#removeItemSize(head);\n        if (this.#autopurgeTimers?.[head]) {\n            clearTimeout(this.#autopurgeTimers[head]);\n            this.#autopurgeTimers[head] = undefined;\n        }\n        // if we aren't about to use the index, then null these out\n        if (free) {\n            this.#keyList[head] = undefined;\n            this.#valList[head] = undefined;\n            this.#free.push(head);\n        }\n        if (this.#size === 1) {\n            this.#head = this.#tail = 0;\n            this.#free.length = 0;\n        }\n        else {\n            this.#head = this.#next[head];\n        }\n        this.#keyMap.delete(k);\n        this.#size--;\n        return head;\n    }\n    /**\n     * Check if a key is in the cache, without updating the recency of use.\n     * Will return false if the item is stale, even though it is technically\n     * in the cache.\n     *\n     * Check if a key is in the cache, without updating the recency of\n     * use. Age is updated if {@link LRUCache.OptionsBase.updateAgeOnHas} is set\n     * to `true` in either the options or the constructor.\n     *\n     * Will return `false` if the item is stale, even though it is technically in\n     * the cache. The difference can be determined (if it matters) by using a\n     * `status` argument, and inspecting the `has` field.\n     *\n     * Will not update item age unless\n     * {@link LRUCache.OptionsBase.updateAgeOnHas} is set.\n     */\n    has(k, hasOptions = {}) {\n        const { updateAgeOnHas = this.updateAgeOnHas, status } = hasOptions;\n        const index = this.#keyMap.get(k);\n        if (index !== undefined) {\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v) &&\n                v.__staleWhileFetching === undefined) {\n                return false;\n            }\n            if (!this.#isStale(index)) {\n                if (updateAgeOnHas) {\n                    this.#updateItemAge(index);\n                }\n                if (status) {\n                    status.has = 'hit';\n                    this.#statusTTL(status, index);\n                }\n                return true;\n            }\n            else if (status) {\n                status.has = 'stale';\n                this.#statusTTL(status, index);\n            }\n        }\n        else if (status) {\n            status.has = 'miss';\n        }\n        return false;\n    }\n    /**\n     * Like {@link LRUCache#get} but doesn't update recency or delete stale\n     * items.\n     *\n     * Returns `undefined` if the item is stale, unless\n     * {@link LRUCache.OptionsBase.allowStale} is set.\n     */\n    peek(k, peekOptions = {}) {\n        const { allowStale = this.allowStale } = peekOptions;\n        const index = this.#keyMap.get(k);\n        if (index === undefined || (!allowStale && this.#isStale(index))) {\n            return;\n        }\n        const v = this.#valList[index];\n        // either stale and allowed, or forcing a refresh of non-stale value\n        return this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v;\n    }\n    #backgroundFetch(k, index, options, context) {\n        const v = index === undefined ? undefined : this.#valList[index];\n        if (this.#isBackgroundFetch(v)) {\n            return v;\n        }\n        const ac = new AC();\n        const { signal } = options;\n        // when/if our AC signals, then stop listening to theirs.\n        signal?.addEventListener('abort', () => ac.abort(signal.reason), {\n            signal: ac.signal,\n        });\n        const fetchOpts = {\n            signal: ac.signal,\n            options,\n            context,\n        };\n        const cb = (v, updateCache = false) => {\n            const { aborted } = ac.signal;\n            const ignoreAbort = options.ignoreFetchAbort && v !== undefined;\n            if (options.status) {\n                if (aborted && !updateCache) {\n                    options.status.fetchAborted = true;\n                    options.status.fetchError = ac.signal.reason;\n                    if (ignoreAbort)\n                        options.status.fetchAbortIgnored = true;\n                }\n                else {\n                    options.status.fetchResolved = true;\n                }\n            }\n            if (aborted && !ignoreAbort && !updateCache) {\n                return fetchFail(ac.signal.reason);\n            }\n            // either we didn't abort, and are still here, or we did, and ignored\n            const bf = p;\n            // if nothing else has been written there but we're set to update the\n            // cache and ignore the abort, or if it's still pending on this specific\n            // background request, then write it to the cache.\n            const vl = this.#valList[index];\n            if (vl === p || (ignoreAbort && updateCache && vl === undefined)) {\n                if (v === undefined) {\n                    if (bf.__staleWhileFetching !== undefined) {\n                        this.#valList[index] = bf.__staleWhileFetching;\n                    }\n                    else {\n                        this.#delete(k, 'fetch');\n                    }\n                }\n                else {\n                    if (options.status)\n                        options.status.fetchUpdated = true;\n                    this.set(k, v, fetchOpts.options);\n                }\n            }\n            return v;\n        };\n        const eb = (er) => {\n            if (options.status) {\n                options.status.fetchRejected = true;\n                options.status.fetchError = er;\n            }\n            return fetchFail(er);\n        };\n        const fetchFail = (er) => {\n            const { aborted } = ac.signal;\n            const allowStaleAborted = aborted && options.allowStaleOnFetchAbort;\n            const allowStale = allowStaleAborted || options.allowStaleOnFetchRejection;\n            const noDelete = allowStale || options.noDeleteOnFetchRejection;\n            const bf = p;\n            if (this.#valList[index] === p) {\n                // if we allow stale on fetch rejections, then we need to ensure that\n                // the stale value is not removed from the cache when the fetch fails.\n                const del = !noDelete || bf.__staleWhileFetching === undefined;\n                if (del) {\n                    this.#delete(k, 'fetch');\n                }\n                else if (!allowStaleAborted) {\n                    // still replace the *promise* with the stale value,\n                    // since we are done with the promise at this point.\n                    // leave it untouched if we're still waiting for an\n                    // aborted background fetch that hasn't yet returned.\n                    this.#valList[index] = bf.__staleWhileFetching;\n                }\n            }\n            if (allowStale) {\n                if (options.status && bf.__staleWhileFetching !== undefined) {\n                    options.status.returnedStale = true;\n                }\n                return bf.__staleWhileFetching;\n            }\n            else if (bf.__returned === bf) {\n                throw er;\n            }\n        };\n        const pcall = (res, rej) => {\n            const fmp = this.#fetchMethod?.(k, v, fetchOpts);\n            if (fmp && fmp instanceof Promise) {\n                fmp.then(v => res(v === undefined ? undefined : v), rej);\n            }\n            // ignored, we go until we finish, regardless.\n            // defer check until we are actually aborting,\n            // so fetchMethod can override.\n            ac.signal.addEventListener('abort', () => {\n                if (!options.ignoreFetchAbort || options.allowStaleOnFetchAbort) {\n                    res(undefined);\n                    // when it eventually resolves, update the cache.\n                    if (options.allowStaleOnFetchAbort) {\n                        res = v => cb(v, true);\n                    }\n                }\n            });\n        };\n        if (options.status)\n            options.status.fetchDispatched = true;\n        const p = new Promise(pcall).then(cb, eb);\n        const bf = Object.assign(p, {\n            __abortController: ac,\n            __staleWhileFetching: v,\n            __returned: undefined,\n        });\n        if (index === undefined) {\n            // internal, don't expose status.\n            this.set(k, bf, { ...fetchOpts.options, status: undefined });\n            index = this.#keyMap.get(k);\n        }\n        else {\n            this.#valList[index] = bf;\n        }\n        return bf;\n    }\n    #isBackgroundFetch(p) {\n        if (!this.#hasFetchMethod)\n            return false;\n        const b = p;\n        return (!!b &&\n            b instanceof Promise &&\n            b.hasOwnProperty('__staleWhileFetching') &&\n            b.__abortController instanceof AC);\n    }\n    async fetch(k, fetchOptions = {}) {\n        const { \n        // get options\n        allowStale = this.allowStale, updateAgeOnGet = this.updateAgeOnGet, noDeleteOnStaleGet = this.noDeleteOnStaleGet, \n        // set options\n        ttl = this.ttl, noDisposeOnSet = this.noDisposeOnSet, size = 0, sizeCalculation = this.sizeCalculation, noUpdateTTL = this.noUpdateTTL, \n        // fetch exclusive options\n        noDeleteOnFetchRejection = this.noDeleteOnFetchRejection, allowStaleOnFetchRejection = this.allowStaleOnFetchRejection, ignoreFetchAbort = this.ignoreFetchAbort, allowStaleOnFetchAbort = this.allowStaleOnFetchAbort, context, forceRefresh = false, status, signal, } = fetchOptions;\n        if (!this.#hasFetchMethod) {\n            if (status)\n                status.fetch = 'get';\n            return this.get(k, {\n                allowStale,\n                updateAgeOnGet,\n                noDeleteOnStaleGet,\n                status,\n            });\n        }\n        const options = {\n            allowStale,\n            updateAgeOnGet,\n            noDeleteOnStaleGet,\n            ttl,\n            noDisposeOnSet,\n            size,\n            sizeCalculation,\n            noUpdateTTL,\n            noDeleteOnFetchRejection,\n            allowStaleOnFetchRejection,\n            allowStaleOnFetchAbort,\n            ignoreFetchAbort,\n            status,\n            signal,\n        };\n        let index = this.#keyMap.get(k);\n        if (index === undefined) {\n            if (status)\n                status.fetch = 'miss';\n            const p = this.#backgroundFetch(k, index, options, context);\n            return (p.__returned = p);\n        }\n        else {\n            // in cache, maybe already fetching\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v)) {\n                const stale = allowStale && v.__staleWhileFetching !== undefined;\n                if (status) {\n                    status.fetch = 'inflight';\n                    if (stale)\n                        status.returnedStale = true;\n                }\n                return stale ? v.__staleWhileFetching : (v.__returned = v);\n            }\n            // if we force a refresh, that means do NOT serve the cached value,\n            // unless we are already in the process of refreshing the cache.\n            const isStale = this.#isStale(index);\n            if (!forceRefresh && !isStale) {\n                if (status)\n                    status.fetch = 'hit';\n                this.#moveToTail(index);\n                if (updateAgeOnGet) {\n                    this.#updateItemAge(index);\n                }\n                if (status)\n                    this.#statusTTL(status, index);\n                return v;\n            }\n            // ok, it is stale or a forced refresh, and not already fetching.\n            // refresh the cache.\n            const p = this.#backgroundFetch(k, index, options, context);\n            const hasStale = p.__staleWhileFetching !== undefined;\n            const staleVal = hasStale && allowStale;\n            if (status) {\n                status.fetch = isStale ? 'stale' : 'refresh';\n                if (staleVal && isStale)\n                    status.returnedStale = true;\n            }\n            return staleVal ? p.__staleWhileFetching : (p.__returned = p);\n        }\n    }\n    async forceFetch(k, fetchOptions = {}) {\n        const v = await this.fetch(k, fetchOptions);\n        if (v === undefined)\n            throw new Error('fetch() returned undefined');\n        return v;\n    }\n    memo(k, memoOptions = {}) {\n        const memoMethod = this.#memoMethod;\n        if (!memoMethod) {\n            throw new Error('no memoMethod provided to constructor');\n        }\n        const { context, forceRefresh, ...options } = memoOptions;\n        const v = this.get(k, options);\n        if (!forceRefresh && v !== undefined)\n            return v;\n        const vv = memoMethod(k, v, {\n            options,\n            context,\n        });\n        this.set(k, vv, options);\n        return vv;\n    }\n    /**\n     * Return a value from the cache. Will update the recency of the cache\n     * entry found.\n     *\n     * If the key is not found, get() will return `undefined`.\n     */\n    get(k, getOptions = {}) {\n        const { allowStale = this.allowStale, updateAgeOnGet = this.updateAgeOnGet, noDeleteOnStaleGet = this.noDeleteOnStaleGet, status, } = getOptions;\n        const index = this.#keyMap.get(k);\n        if (index !== undefined) {\n            const value = this.#valList[index];\n            const fetching = this.#isBackgroundFetch(value);\n            if (status)\n                this.#statusTTL(status, index);\n            if (this.#isStale(index)) {\n                if (status)\n                    status.get = 'stale';\n                // delete only if not an in-flight background fetch\n                if (!fetching) {\n                    if (!noDeleteOnStaleGet) {\n                        this.#delete(k, 'expire');\n                    }\n                    if (status && allowStale)\n                        status.returnedStale = true;\n                    return allowStale ? value : undefined;\n                }\n                else {\n                    if (status &&\n                        allowStale &&\n                        value.__staleWhileFetching !== undefined) {\n                        status.returnedStale = true;\n                    }\n                    return allowStale ? value.__staleWhileFetching : undefined;\n                }\n            }\n            else {\n                if (status)\n                    status.get = 'hit';\n                // if we're currently fetching it, we don't actually have it yet\n                // it's not stale, which means this isn't a staleWhileRefetching.\n                // If it's not stale, and fetching, AND has a __staleWhileFetching\n                // value, then that means the user fetched with {forceRefresh:true},\n                // so it's safe to return that value.\n                if (fetching) {\n                    return value.__staleWhileFetching;\n                }\n                this.#moveToTail(index);\n                if (updateAgeOnGet) {\n                    this.#updateItemAge(index);\n                }\n                return value;\n            }\n        }\n        else if (status) {\n            status.get = 'miss';\n        }\n    }\n    #connect(p, n) {\n        this.#prev[n] = p;\n        this.#next[p] = n;\n    }\n    #moveToTail(index) {\n        // if tail already, nothing to do\n        // if head, move head to next[index]\n        // else\n        //   move next[prev[index]] to next[index] (head has no prev)\n        //   move prev[next[index]] to prev[index]\n        // prev[index] = tail\n        // next[tail] = index\n        // tail = index\n        if (index !== this.#tail) {\n            if (index === this.#head) {\n                this.#head = this.#next[index];\n            }\n            else {\n                this.#connect(this.#prev[index], this.#next[index]);\n            }\n            this.#connect(this.#tail, index);\n            this.#tail = index;\n        }\n    }\n    /**\n     * Deletes a key out of the cache.\n     *\n     * Returns true if the key was deleted, false otherwise.\n     */\n    delete(k) {\n        return this.#delete(k, 'delete');\n    }\n    #delete(k, reason) {\n        let deleted = false;\n        if (this.#size !== 0) {\n            const index = this.#keyMap.get(k);\n            if (index !== undefined) {\n                if (this.#autopurgeTimers?.[index]) {\n                    clearTimeout(this.#autopurgeTimers?.[index]);\n                    this.#autopurgeTimers[index] = undefined;\n                }\n                deleted = true;\n                if (this.#size === 1) {\n                    this.#clear(reason);\n                }\n                else {\n                    this.#removeItemSize(index);\n                    const v = this.#valList[index];\n                    if (this.#isBackgroundFetch(v)) {\n                        v.__abortController.abort(new Error('deleted'));\n                    }\n                    else if (this.#hasDispose || this.#hasDisposeAfter) {\n                        if (this.#hasDispose) {\n                            this.#dispose?.(v, k, reason);\n                        }\n                        if (this.#hasDisposeAfter) {\n                            this.#disposed?.push([v, k, reason]);\n                        }\n                    }\n                    this.#keyMap.delete(k);\n                    this.#keyList[index] = undefined;\n                    this.#valList[index] = undefined;\n                    if (index === this.#tail) {\n                        this.#tail = this.#prev[index];\n                    }\n                    else if (index === this.#head) {\n                        this.#head = this.#next[index];\n                    }\n                    else {\n                        const pi = this.#prev[index];\n                        this.#next[pi] = this.#next[index];\n                        const ni = this.#next[index];\n                        this.#prev[ni] = this.#prev[index];\n                    }\n                    this.#size--;\n                    this.#free.push(index);\n                }\n            }\n        }\n        if (this.#hasDisposeAfter && this.#disposed?.length) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n        return deleted;\n    }\n    /**\n     * Clear the cache entirely, throwing away all values.\n     */\n    clear() {\n        return this.#clear('delete');\n    }\n    #clear(reason) {\n        for (const index of this.#rindexes({ allowStale: true })) {\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v)) {\n                v.__abortController.abort(new Error('deleted'));\n            }\n            else {\n                const k = this.#keyList[index];\n                if (this.#hasDispose) {\n                    this.#dispose?.(v, k, reason);\n                }\n                if (this.#hasDisposeAfter) {\n                    this.#disposed?.push([v, k, reason]);\n                }\n            }\n        }\n        this.#keyMap.clear();\n        this.#valList.fill(undefined);\n        this.#keyList.fill(undefined);\n        if (this.#ttls && this.#starts) {\n            this.#ttls.fill(0);\n            this.#starts.fill(0);\n            for (const t of this.#autopurgeTimers ?? []) {\n                if (t !== undefined)\n                    clearTimeout(t);\n            }\n            this.#autopurgeTimers?.fill(undefined);\n        }\n        if (this.#sizes) {\n            this.#sizes.fill(0);\n        }\n        this.#head = 0;\n        this.#tail = 0;\n        this.#free.length = 0;\n        this.#calculatedSize = 0;\n        this.#size = 0;\n        if (this.#hasDisposeAfter && this.#disposed) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n    }\n}\n//# sourceMappingURL=index.js.map","/**\n * common\n */\n\n/* numeric constants */\nconst TYPE_FROM = 8;\nconst TYPE_TO = -1;\n\n/**\n * get type\n * @param o - object to check\n * @returns type of object\n */\nexport const getType = (o: unknown): string =>\n  Object.prototype.toString.call(o).slice(TYPE_FROM, TYPE_TO);\n\n/**\n * is string\n * @param o - object to check\n * @returns result\n */\nexport const isString = (o: unknown): o is string =>\n  typeof o === 'string' || o instanceof String;\n\n/**\n * is string or number\n * @param o - object to check\n * @returns result\n */\nexport const isStringOrNumber = (o: unknown): boolean =>\n  isString(o) || typeof o === 'number';\n","/**\n * constant\n */\n\n/* values and units */\nconst _DIGIT = '(?:0|[1-9]\\\\d*)';\nconst _COMPARE = 'clamp|max|min';\nconst _EXPO = 'exp|hypot|log|pow|sqrt';\nconst _SIGN = 'abs|sign';\nconst _STEP = 'mod|rem|round';\nconst _TRIG = 'a?(?:cos|sin|tan)|atan2';\nconst _MATH = `${_COMPARE}|${_EXPO}|${_SIGN}|${_STEP}|${_TRIG}`;\nconst _CALC = `calc|${_MATH}`;\nconst _VAR = `var|${_CALC}`;\nexport const ANGLE = 'deg|g?rad|turn';\nexport const LENGTH =\n  '[cm]m|[dls]?v(?:[bhiw]|max|min)|in|p[ctx]|q|r?(?:[cl]h|cap|e[mx]|ic)';\nexport const NUM = `[+-]?(?:${_DIGIT}(?:\\\\.\\\\d*)?|\\\\.\\\\d+)(?:e-?${_DIGIT})?`;\nexport const NUM_POSITIVE = `\\\\+?(?:${_DIGIT}(?:\\\\.\\\\d*)?|\\\\.\\\\d+)(?:e-?${_DIGIT})?`;\nexport const NONE = 'none';\nexport const PCT = `${NUM}%`;\nexport const SYN_FN_CALC = `^(?:${_CALC})\\\\(|(?<=[*\\\\/\\\\s\\\\(])(?:${_CALC})\\\\(`;\nexport const SYN_FN_MATH_START = `^(?:${_MATH})\\\\($`;\nexport const SYN_FN_VAR = '^var\\\\(|(?<=[*\\\\/\\\\s\\\\(])var\\\\(';\nexport const SYN_FN_VAR_START = `^(?:${_VAR})\\\\(`;\n\n/* colors */\nconst _ALPHA = `(?:\\\\s*\\\\/\\\\s*(?:${NUM}|${PCT}|${NONE}))?`;\nconst _ALPHA_LV3 = `(?:\\\\s*,\\\\s*(?:${NUM}|${PCT}))?`;\nconst _COLOR_FUNC = '(?:ok)?l(?:ab|ch)|color|hsla?|hwb|rgba?';\nconst _COLOR_KEY = '[a-z]+|#[\\\\da-f]{3}|#[\\\\da-f]{4}|#[\\\\da-f]{6}|#[\\\\da-f]{8}';\nconst _CS_HUE = '(?:ok)?lch|hsl|hwb';\nconst _CS_HUE_ARC = '(?:de|in)creasing|longer|shorter';\nconst _NUM_ANGLE = `${NUM}(?:${ANGLE})?`;\nconst _NUM_ANGLE_NONE = `(?:${NUM}(?:${ANGLE})?|${NONE})`;\nconst _NUM_PCT_NONE = `(?:${NUM}|${PCT}|${NONE})`;\nexport const CS_HUE = `(?:${_CS_HUE})(?:\\\\s(?:${_CS_HUE_ARC})\\\\shue)?`;\nexport const CS_HUE_CAPT = `(${_CS_HUE})(?:\\\\s(${_CS_HUE_ARC})\\\\shue)?`;\nexport const CS_LAB = '(?:ok)?lab';\nexport const CS_LCH = '(?:ok)?lch';\nexport const CS_SRGB = 'srgb(?:-linear)?';\nexport const CS_RGB = `(?:a98|prophoto)-rgb|display-p3|rec2020|${CS_SRGB}`;\nexport const CS_XYZ = 'xyz(?:-d(?:50|65))?';\nexport const CS_RECT = `${CS_LAB}|${CS_RGB}|${CS_XYZ}`;\nexport const CS_MIX = `${CS_HUE}|${CS_RECT}`;\nexport const FN_COLOR = 'color(';\nexport const FN_LIGHT_DARK = 'light-dark(';\nexport const FN_MIX = 'color-mix(';\nexport const FN_REL = `(?:${_COLOR_FUNC})\\\\(\\\\s*from\\\\s+`;\nexport const FN_REL_CAPT = `(${_COLOR_FUNC})\\\\(\\\\s*from\\\\s+`;\nexport const FN_VAR = 'var(';\nexport const SYN_FN_COLOR = `(?:${CS_RGB}|${CS_XYZ})(?:\\\\s+${_NUM_PCT_NONE}){3}${_ALPHA}`;\nexport const SYN_FN_LIGHT_DARK = '^light-dark\\\\(';\nexport const SYN_FN_REL = `^${FN_REL}|(?<=[\\\\s])${FN_REL}`;\nexport const SYN_HSL = `${_NUM_ANGLE_NONE}(?:\\\\s+${_NUM_PCT_NONE}){2}${_ALPHA}`;\nexport const SYN_HSL_LV3 = `${_NUM_ANGLE}(?:\\\\s*,\\\\s*${PCT}){2}${_ALPHA_LV3}`;\nexport const SYN_LCH = `(?:${_NUM_PCT_NONE}\\\\s+){2}${_NUM_ANGLE_NONE}${_ALPHA}`;\nexport const SYN_MOD = `${_NUM_PCT_NONE}(?:\\\\s+${_NUM_PCT_NONE}){2}${_ALPHA}`;\nexport const SYN_RGB_LV3 = `(?:${NUM}(?:\\\\s*,\\\\s*${NUM}){2}|${PCT}(?:\\\\s*,\\\\s*${PCT}){2})${_ALPHA_LV3}`;\nexport const SYN_COLOR_TYPE = `${_COLOR_KEY}|hsla?\\\\(\\\\s*${SYN_HSL_LV3}\\\\s*\\\\)|rgba?\\\\(\\\\s*${SYN_RGB_LV3}\\\\s*\\\\)|(?:hsla?|hwb)\\\\(\\\\s*${SYN_HSL}\\\\s*\\\\)|(?:(?:ok)?lab|rgba?)\\\\(\\\\s*${SYN_MOD}\\\\s*\\\\)|(?:ok)?lch\\\\(\\\\s*${SYN_LCH}\\\\s*\\\\)|color\\\\(\\\\s*${SYN_FN_COLOR}\\\\s*\\\\)`;\nexport const SYN_MIX_PART = `(?:${SYN_COLOR_TYPE})(?:\\\\s+${PCT})?`;\nexport const SYN_MIX = `color-mix\\\\(\\\\s*in\\\\s+(?:${CS_MIX})\\\\s*,\\\\s*${SYN_MIX_PART}\\\\s*,\\\\s*${SYN_MIX_PART}\\\\s*\\\\)`;\nexport const SYN_MIX_CAPT = `color-mix\\\\(\\\\s*in\\\\s+(${CS_MIX})\\\\s*,\\\\s*(${SYN_MIX_PART})\\\\s*,\\\\s*(${SYN_MIX_PART})\\\\s*\\\\)`;\n\n/* formats */\nexport const VAL_COMP = 'computedValue';\nexport const VAL_MIX = 'mixValue';\nexport const VAL_SPEC = 'specifiedValue';\n","/**\n * color\n *\n * Ref: CSS Color Module Level 4\n *      Sample code for Color Conversions\n *      https://w3c.github.io/csswg-drafts/css-color-4/#color-conversion-code\n */\n\nimport {\n  CacheItem,\n  NullObject,\n  createCacheKey,\n  getCache,\n  setCache\n} from './cache';\nimport { isString } from './common';\nimport { resolveColor } from './resolve';\nimport { interpolateHue, roundToPrecision, splitValue } from './util';\nimport {\n  ColorChannels,\n  ComputedColorChannels,\n  Options,\n  MatchedRegExp,\n  SpecifiedColorChannels,\n  StringColorChannels,\n  StringColorSpacedChannels\n} from './typedef';\n\n/* constants */\nimport {\n  ANGLE,\n  CS_HUE_CAPT,\n  CS_MIX,\n  CS_RGB,\n  CS_XYZ,\n  FN_COLOR,\n  FN_LIGHT_DARK,\n  FN_MIX,\n  NONE,\n  NUM,\n  PCT,\n  SYN_COLOR_TYPE,\n  SYN_FN_COLOR,\n  SYN_HSL,\n  SYN_HSL_LV3,\n  SYN_LCH,\n  SYN_MIX,\n  SYN_MIX_CAPT,\n  SYN_MIX_PART,\n  SYN_MOD,\n  SYN_RGB_LV3,\n  VAL_COMP,\n  VAL_MIX,\n  VAL_SPEC\n} from './constant';\nconst NAMESPACE = 'color';\n\n/* numeric constants */\nconst PPTH = 0.001;\nconst HALF = 0.5;\nconst DUO = 2;\nconst TRIA = 3;\nconst QUAD = 4;\nconst OCT = 8;\nconst DEC = 10;\nconst DOZ = 12;\nconst HEX = 16;\nconst SEXA = 60;\nconst DEG_HALF = 180;\nconst DEG = 360;\nconst MAX_PCT = 100;\nconst MAX_RGB = 255;\nconst POW_SQR = 2;\nconst POW_CUBE = 3;\nconst POW_LINEAR = 2.4;\nconst LINEAR_COEF = 12.92;\nconst LINEAR_OFFSET = 0.055;\nconst LAB_L = 116;\nconst LAB_A = 500;\nconst LAB_B = 200;\nconst LAB_EPSILON = 216 / 24389;\nconst LAB_KAPPA = 24389 / 27;\n\n/* type definitions */\n/**\n * @type NumStrColorChannels - string or numeric color channels\n */\ntype NumStrColorChannels = [\n  x: number | string,\n  y: number | string,\n  z: number | string,\n  alpha: number | string\n];\n\n/**\n * @type TriColorChannels - color channels without alpha\n */\ntype TriColorChannels = [x: number, y: number, z: number];\n\n/**\n * @type ColorMatrix - color matrix\n */\ntype ColorMatrix = [\n  r1: TriColorChannels,\n  r2: TriColorChannels,\n  r3: TriColorChannels\n];\n\n/* white point */\nconst D50: TriColorChannels = [\n  0.3457 / 0.3585,\n  1.0,\n  (1.0 - 0.3457 - 0.3585) / 0.3585\n];\nconst MATRIX_D50_TO_D65: ColorMatrix = [\n  [0.955473421488075, -0.02309845494876471, 0.06325924320057072],\n  [-0.0283697093338637, 1.0099953980813041, 0.021041441191917323],\n  [0.012314014864481998, -0.020507649298898964, 1.330365926242124]\n];\nconst MATRIX_D65_TO_D50: ColorMatrix = [\n  [1.0479297925449969, 0.022946870601609652, -0.05019226628920524],\n  [0.02962780877005599, 0.9904344267538799, -0.017073799063418826],\n  [-0.009243040646204504, 0.015055191490298152, 0.7518742814281371]\n];\n\n/* color space */\nconst MATRIX_L_RGB_TO_XYZ: ColorMatrix = [\n  [506752 / 1228815, 87881 / 245763, 12673 / 70218],\n  [87098 / 409605, 175762 / 245763, 12673 / 175545],\n  [7918 / 409605, 87881 / 737289, 1001167 / 1053270]\n];\nconst MATRIX_XYZ_TO_L_RGB: ColorMatrix = [\n  [12831 / 3959, -329 / 214, -1974 / 3959],\n  [-851781 / 878810, 1648619 / 878810, 36519 / 878810],\n  [705 / 12673, -2585 / 12673, 705 / 667]\n];\nconst MATRIX_XYZ_TO_LMS: ColorMatrix = [\n  [0.819022437996703, 0.3619062600528904, -0.1288737815209879],\n  [0.0329836539323885, 0.9292868615863434, 0.0361446663506424],\n  [0.0481771893596242, 0.2642395317527308, 0.6335478284694309]\n];\nconst MATRIX_LMS_TO_XYZ: ColorMatrix = [\n  [1.2268798758459243, -0.5578149944602171, 0.2813910456659647],\n  [-0.0405757452148008, 1.112286803280317, -0.0717110580655164],\n  [-0.0763729366746601, -0.4214933324022432, 1.5869240198367816]\n];\nconst MATRIX_OKLAB_TO_LMS: ColorMatrix = [\n  [1.0, 0.3963377773761749, 0.2158037573099136],\n  [1.0, -0.1055613458156586, -0.0638541728258133],\n  [1.0, -0.0894841775298119, -1.2914855480194092]\n];\nconst MATRIX_LMS_TO_OKLAB: ColorMatrix = [\n  [0.210454268309314, 0.7936177747023054, -0.0040720430116193],\n  [1.9779985324311684, -2.4285922420485799, 0.450593709617411],\n  [0.0259040424655478, 0.7827717124575296, -0.8086757549230774]\n];\nconst MATRIX_P3_TO_XYZ: ColorMatrix = [\n  [608311 / 1250200, 189793 / 714400, 198249 / 1000160],\n  [35783 / 156275, 247089 / 357200, 198249 / 2500400],\n  [0 / 1, 32229 / 714400, 5220557 / 5000800]\n];\nconst MATRIX_REC2020_TO_XYZ: ColorMatrix = [\n  [63426534 / 99577255, 20160776 / 139408157, 47086771 / 278816314],\n  [26158966 / 99577255, 472592308 / 697040785, 8267143 / 139408157],\n  [0 / 1, 19567812 / 697040785, 295819943 / 278816314]\n];\nconst MATRIX_A98_TO_XYZ: ColorMatrix = [\n  [573536 / 994567, 263643 / 1420810, 187206 / 994567],\n  [591459 / 1989134, 6239551 / 9945670, 374412 / 4972835],\n  [53769 / 1989134, 351524 / 4972835, 4929758 / 4972835]\n];\nconst MATRIX_PROPHOTO_TO_XYZ_D50: ColorMatrix = [\n  [0.7977666449006423, 0.13518129740053308, 0.0313477341283922],\n  [0.2880748288194013, 0.711835234241873, 0.00008993693872564],\n  [0.0, 0.0, 0.8251046025104602]\n];\n\n/* regexp */\nconst REG_COLOR = new RegExp(`^(?:${SYN_COLOR_TYPE})$`);\nconst REG_CS_HUE = new RegExp(`^${CS_HUE_CAPT}$`);\nconst REG_CS_XYZ = /^xyz(?:-d(?:50|65))?$/;\nconst REG_CURRENT = /^currentColor$/i;\nconst REG_FN_COLOR = new RegExp(`^color\\\\(\\\\s*(${SYN_FN_COLOR})\\\\s*\\\\)$`);\nconst REG_HSL = new RegExp(`^hsla?\\\\(\\\\s*(${SYN_HSL}|${SYN_HSL_LV3})\\\\s*\\\\)$`);\nconst REG_HWB = new RegExp(`^hwb\\\\(\\\\s*(${SYN_HSL})\\\\s*\\\\)$`);\nconst REG_LAB = new RegExp(`^lab\\\\(\\\\s*(${SYN_MOD})\\\\s*\\\\)$`);\nconst REG_LCH = new RegExp(`^lch\\\\(\\\\s*(${SYN_LCH})\\\\s*\\\\)$`);\nconst REG_MIX = new RegExp(`^${SYN_MIX}$`);\nconst REG_MIX_CAPT = new RegExp(`^${SYN_MIX_CAPT}$`);\nconst REG_MIX_NEST = new RegExp(`${SYN_MIX}`, 'g');\nconst REG_OKLAB = new RegExp(`^oklab\\\\(\\\\s*(${SYN_MOD})\\\\s*\\\\)$`);\nconst REG_OKLCH = new RegExp(`^oklch\\\\(\\\\s*(${SYN_LCH})\\\\s*\\\\)$`);\nconst REG_SPEC = /^(?:specifi|comput)edValue$/;\n\n/**\n * named colors\n */\nexport const NAMED_COLORS = {\n  aliceblue: [0xf0, 0xf8, 0xff],\n  antiquewhite: [0xfa, 0xeb, 0xd7],\n  aqua: [0x00, 0xff, 0xff],\n  aquamarine: [0x7f, 0xff, 0xd4],\n  azure: [0xf0, 0xff, 0xff],\n  beige: [0xf5, 0xf5, 0xdc],\n  bisque: [0xff, 0xe4, 0xc4],\n  black: [0x00, 0x00, 0x00],\n  blanchedalmond: [0xff, 0xeb, 0xcd],\n  blue: [0x00, 0x00, 0xff],\n  blueviolet: [0x8a, 0x2b, 0xe2],\n  brown: [0xa5, 0x2a, 0x2a],\n  burlywood: [0xde, 0xb8, 0x87],\n  cadetblue: [0x5f, 0x9e, 0xa0],\n  chartreuse: [0x7f, 0xff, 0x00],\n  chocolate: [0xd2, 0x69, 0x1e],\n  coral: [0xff, 0x7f, 0x50],\n  cornflowerblue: [0x64, 0x95, 0xed],\n  cornsilk: [0xff, 0xf8, 0xdc],\n  crimson: [0xdc, 0x14, 0x3c],\n  cyan: [0x00, 0xff, 0xff],\n  darkblue: [0x00, 0x00, 0x8b],\n  darkcyan: [0x00, 0x8b, 0x8b],\n  darkgoldenrod: [0xb8, 0x86, 0x0b],\n  darkgray: [0xa9, 0xa9, 0xa9],\n  darkgreen: [0x00, 0x64, 0x00],\n  darkgrey: [0xa9, 0xa9, 0xa9],\n  darkkhaki: [0xbd, 0xb7, 0x6b],\n  darkmagenta: [0x8b, 0x00, 0x8b],\n  darkolivegreen: [0x55, 0x6b, 0x2f],\n  darkorange: [0xff, 0x8c, 0x00],\n  darkorchid: [0x99, 0x32, 0xcc],\n  darkred: [0x8b, 0x00, 0x00],\n  darksalmon: [0xe9, 0x96, 0x7a],\n  darkseagreen: [0x8f, 0xbc, 0x8f],\n  darkslateblue: [0x48, 0x3d, 0x8b],\n  darkslategray: [0x2f, 0x4f, 0x4f],\n  darkslategrey: [0x2f, 0x4f, 0x4f],\n  darkturquoise: [0x00, 0xce, 0xd1],\n  darkviolet: [0x94, 0x00, 0xd3],\n  deeppink: [0xff, 0x14, 0x93],\n  deepskyblue: [0x00, 0xbf, 0xff],\n  dimgray: [0x69, 0x69, 0x69],\n  dimgrey: [0x69, 0x69, 0x69],\n  dodgerblue: [0x1e, 0x90, 0xff],\n  firebrick: [0xb2, 0x22, 0x22],\n  floralwhite: [0xff, 0xfa, 0xf0],\n  forestgreen: [0x22, 0x8b, 0x22],\n  fuchsia: [0xff, 0x00, 0xff],\n  gainsboro: [0xdc, 0xdc, 0xdc],\n  ghostwhite: [0xf8, 0xf8, 0xff],\n  gold: [0xff, 0xd7, 0x00],\n  goldenrod: [0xda, 0xa5, 0x20],\n  gray: [0x80, 0x80, 0x80],\n  green: [0x00, 0x80, 0x00],\n  greenyellow: [0xad, 0xff, 0x2f],\n  grey: [0x80, 0x80, 0x80],\n  honeydew: [0xf0, 0xff, 0xf0],\n  hotpink: [0xff, 0x69, 0xb4],\n  indianred: [0xcd, 0x5c, 0x5c],\n  indigo: [0x4b, 0x00, 0x82],\n  ivory: [0xff, 0xff, 0xf0],\n  khaki: [0xf0, 0xe6, 0x8c],\n  lavender: [0xe6, 0xe6, 0xfa],\n  lavenderblush: [0xff, 0xf0, 0xf5],\n  lawngreen: [0x7c, 0xfc, 0x00],\n  lemonchiffon: [0xff, 0xfa, 0xcd],\n  lightblue: [0xad, 0xd8, 0xe6],\n  lightcoral: [0xf0, 0x80, 0x80],\n  lightcyan: [0xe0, 0xff, 0xff],\n  lightgoldenrodyellow: [0xfa, 0xfa, 0xd2],\n  lightgray: [0xd3, 0xd3, 0xd3],\n  lightgreen: [0x90, 0xee, 0x90],\n  lightgrey: [0xd3, 0xd3, 0xd3],\n  lightpink: [0xff, 0xb6, 0xc1],\n  lightsalmon: [0xff, 0xa0, 0x7a],\n  lightseagreen: [0x20, 0xb2, 0xaa],\n  lightskyblue: [0x87, 0xce, 0xfa],\n  lightslategray: [0x77, 0x88, 0x99],\n  lightslategrey: [0x77, 0x88, 0x99],\n  lightsteelblue: [0xb0, 0xc4, 0xde],\n  lightyellow: [0xff, 0xff, 0xe0],\n  lime: [0x00, 0xff, 0x00],\n  limegreen: [0x32, 0xcd, 0x32],\n  linen: [0xfa, 0xf0, 0xe6],\n  magenta: [0xff, 0x00, 0xff],\n  maroon: [0x80, 0x00, 0x00],\n  mediumaquamarine: [0x66, 0xcd, 0xaa],\n  mediumblue: [0x00, 0x00, 0xcd],\n  mediumorchid: [0xba, 0x55, 0xd3],\n  mediumpurple: [0x93, 0x70, 0xdb],\n  mediumseagreen: [0x3c, 0xb3, 0x71],\n  mediumslateblue: [0x7b, 0x68, 0xee],\n  mediumspringgreen: [0x00, 0xfa, 0x9a],\n  mediumturquoise: [0x48, 0xd1, 0xcc],\n  mediumvioletred: [0xc7, 0x15, 0x85],\n  midnightblue: [0x19, 0x19, 0x70],\n  mintcream: [0xf5, 0xff, 0xfa],\n  mistyrose: [0xff, 0xe4, 0xe1],\n  moccasin: [0xff, 0xe4, 0xb5],\n  navajowhite: [0xff, 0xde, 0xad],\n  navy: [0x00, 0x00, 0x80],\n  oldlace: [0xfd, 0xf5, 0xe6],\n  olive: [0x80, 0x80, 0x00],\n  olivedrab: [0x6b, 0x8e, 0x23],\n  orange: [0xff, 0xa5, 0x00],\n  orangered: [0xff, 0x45, 0x00],\n  orchid: [0xda, 0x70, 0xd6],\n  palegoldenrod: [0xee, 0xe8, 0xaa],\n  palegreen: [0x98, 0xfb, 0x98],\n  paleturquoise: [0xaf, 0xee, 0xee],\n  palevioletred: [0xdb, 0x70, 0x93],\n  papayawhip: [0xff, 0xef, 0xd5],\n  peachpuff: [0xff, 0xda, 0xb9],\n  peru: [0xcd, 0x85, 0x3f],\n  pink: [0xff, 0xc0, 0xcb],\n  plum: [0xdd, 0xa0, 0xdd],\n  powderblue: [0xb0, 0xe0, 0xe6],\n  purple: [0x80, 0x00, 0x80],\n  rebeccapurple: [0x66, 0x33, 0x99],\n  red: [0xff, 0x00, 0x00],\n  rosybrown: [0xbc, 0x8f, 0x8f],\n  royalblue: [0x41, 0x69, 0xe1],\n  saddlebrown: [0x8b, 0x45, 0x13],\n  salmon: [0xfa, 0x80, 0x72],\n  sandybrown: [0xf4, 0xa4, 0x60],\n  seagreen: [0x2e, 0x8b, 0x57],\n  seashell: [0xff, 0xf5, 0xee],\n  sienna: [0xa0, 0x52, 0x2d],\n  silver: [0xc0, 0xc0, 0xc0],\n  skyblue: [0x87, 0xce, 0xeb],\n  slateblue: [0x6a, 0x5a, 0xcd],\n  slategray: [0x70, 0x80, 0x90],\n  slategrey: [0x70, 0x80, 0x90],\n  snow: [0xff, 0xfa, 0xfa],\n  springgreen: [0x00, 0xff, 0x7f],\n  steelblue: [0x46, 0x82, 0xb4],\n  tan: [0xd2, 0xb4, 0x8c],\n  teal: [0x00, 0x80, 0x80],\n  thistle: [0xd8, 0xbf, 0xd8],\n  tomato: [0xff, 0x63, 0x47],\n  turquoise: [0x40, 0xe0, 0xd0],\n  violet: [0xee, 0x82, 0xee],\n  wheat: [0xf5, 0xde, 0xb3],\n  white: [0xff, 0xff, 0xff],\n  whitesmoke: [0xf5, 0xf5, 0xf5],\n  yellow: [0xff, 0xff, 0x00],\n  yellowgreen: [0x9a, 0xcd, 0x32]\n} as const satisfies {\n  [key: string]: TriColorChannels;\n};\n\n/**\n * cache invalid color value\n * @param key - cache key\n * @param nullable - is nullable\n * @returns cached value\n */\nexport const cacheInvalidColorValue = (\n  cacheKey: string,\n  format: string,\n  nullable: boolean = false\n): SpecifiedColorChannels | string | NullObject => {\n  if (format === VAL_SPEC) {\n    const res = '';\n    setCache(cacheKey, res);\n    return res;\n  }\n  if (nullable) {\n    setCache(cacheKey, null);\n    return new NullObject();\n  }\n  const res: SpecifiedColorChannels = ['rgb', 0, 0, 0, 0];\n  setCache(cacheKey, res);\n  return res;\n};\n\n/**\n * resolve invalid color value\n * @param format - output format\n * @param nullable - is nullable\n * @returns resolved value\n */\nexport const resolveInvalidColorValue = (\n  format: string,\n  nullable: boolean = false\n): SpecifiedColorChannels | string | NullObject => {\n  switch (format) {\n    case 'hsl':\n    case 'hwb':\n    case VAL_MIX: {\n      return new NullObject();\n    }\n    case VAL_SPEC: {\n      return '';\n    }\n    default: {\n      if (nullable) {\n        return new NullObject();\n      }\n      return ['rgb', 0, 0, 0, 0] as SpecifiedColorChannels;\n    }\n  }\n};\n\n/**\n * validate color components\n * @param arr - color components\n * @param [opt] - options\n * @param [opt.alpha] - alpha channel\n * @param [opt.minLength] - min length\n * @param [opt.maxLength] - max length\n * @param [opt.minRange] - min range\n * @param [opt.maxRange] - max range\n * @param [opt.validateRange] - validate range\n * @returns result - validated color components\n */\nexport const validateColorComponents = (\n  arr: ColorChannels | TriColorChannels,\n  opt: {\n    alpha?: boolean;\n    minLength?: number;\n    maxLength?: number;\n    minRange?: number;\n    maxRange?: number;\n    validateRange?: boolean;\n  } = {}\n): ColorChannels | TriColorChannels => {\n  if (!Array.isArray(arr)) {\n    throw new TypeError(`${arr} is not an array.`);\n  }\n  const {\n    alpha = false,\n    minLength = TRIA,\n    maxLength = QUAD,\n    minRange = 0,\n    maxRange = 1,\n    validateRange = true\n  } = opt;\n  if (!Number.isFinite(minLength)) {\n    throw new TypeError(`${minLength} is not a number.`);\n  }\n  if (!Number.isFinite(maxLength)) {\n    throw new TypeError(`${maxLength} is not a number.`);\n  }\n  if (!Number.isFinite(minRange)) {\n    throw new TypeError(`${minRange} is not a number.`);\n  }\n  if (!Number.isFinite(maxRange)) {\n    throw new TypeError(`${maxRange} is not a number.`);\n  }\n  const l = arr.length;\n  if (l < minLength || l > maxLength) {\n    throw new Error(`Unexpected array length ${l}.`);\n  }\n  let i = 0;\n  while (i < l) {\n    const v = arr[i] as number;\n    if (!Number.isFinite(v)) {\n      throw new TypeError(`${v} is not a number.`);\n    } else if (i < TRIA && validateRange && (v < minRange || v > maxRange)) {\n      throw new RangeError(`${v} is not between ${minRange} and ${maxRange}.`);\n    } else if (i === TRIA && (v < 0 || v > 1)) {\n      throw new RangeError(`${v} is not between 0 and 1.`);\n    }\n    i++;\n  }\n  if (alpha && l === TRIA) {\n    arr.push(1);\n  }\n  return arr;\n};\n\n/**\n * transform matrix\n * @param mtx - 3 * 3 matrix\n * @param vct - vector\n * @param [skip] - skip validate\n * @returns TriColorChannels - [p1, p2, p3]\n */\nexport const transformMatrix = (\n  mtx: ColorMatrix,\n  vct: TriColorChannels,\n  skip: boolean = false\n): TriColorChannels => {\n  if (!Array.isArray(mtx)) {\n    throw new TypeError(`${mtx} is not an array.`);\n  } else if (mtx.length !== TRIA) {\n    throw new Error(`Unexpected array length ${mtx.length}.`);\n  } else if (!skip) {\n    for (let i of mtx) {\n      i = validateColorComponents(i as TriColorChannels, {\n        maxLength: TRIA,\n        validateRange: false\n      }) as TriColorChannels;\n    }\n  }\n  const [[r1c1, r1c2, r1c3], [r2c1, r2c2, r2c3], [r3c1, r3c2, r3c3]] = mtx;\n  let v1, v2, v3;\n  if (skip) {\n    [v1, v2, v3] = vct;\n  } else {\n    [v1, v2, v3] = validateColorComponents(vct, {\n      maxLength: TRIA,\n      validateRange: false\n    });\n  }\n  const p1 = r1c1 * v1 + r1c2 * v2 + r1c3 * v3;\n  const p2 = r2c1 * v1 + r2c2 * v2 + r2c3 * v3;\n  const p3 = r3c1 * v1 + r3c2 * v2 + r3c3 * v3;\n  return [p1, p2, p3];\n};\n\n/**\n * normalize color components\n * @param colorA - color components [v1, v2, v3, v4]\n * @param colorB - color components [v1, v2, v3, v4]\n * @param [skip] - skip validate\n * @returns result - [colorA, colorB]\n */\nexport const normalizeColorComponents = (\n  colorA: [number | string, number | string, number | string, number | string],\n  colorB: [number | string, number | string, number | string, number | string],\n  skip: boolean = false\n): [ColorChannels, ColorChannels] => {\n  if (!Array.isArray(colorA)) {\n    throw new TypeError(`${colorA} is not an array.`);\n  } else if (colorA.length !== QUAD) {\n    throw new Error(`Unexpected array length ${colorA.length}.`);\n  }\n  if (!Array.isArray(colorB)) {\n    throw new TypeError(`${colorB} is not an array.`);\n  } else if (colorB.length !== QUAD) {\n    throw new Error(`Unexpected array length ${colorB.length}.`);\n  }\n  let i = 0;\n  while (i < QUAD) {\n    if (colorA[i] === NONE && colorB[i] === NONE) {\n      colorA[i] = 0;\n      colorB[i] = 0;\n    } else if (colorA[i] === NONE) {\n      colorA[i] = colorB[i] as number;\n    } else if (colorB[i] === NONE) {\n      colorB[i] = colorA[i] as number;\n    }\n    i++;\n  }\n  if (skip) {\n    return [colorA as ColorChannels, colorB as ColorChannels];\n  }\n  const validatedColorA = validateColorComponents(colorA as ColorChannels, {\n    minLength: QUAD,\n    validateRange: false\n  });\n  const validatedColorB = validateColorComponents(colorB as ColorChannels, {\n    minLength: QUAD,\n    validateRange: false\n  });\n  return [validatedColorA as ColorChannels, validatedColorB as ColorChannels];\n};\n\n/**\n * number to hex string\n * @param value - numeric value\n * @returns hex string\n */\nexport const numberToHexString = (value: number): string => {\n  if (!Number.isFinite(value)) {\n    throw new TypeError(`${value} is not a number.`);\n  } else {\n    value = Math.round(value);\n    if (value < 0 || value > MAX_RGB) {\n      throw new RangeError(`${value} is not between 0 and ${MAX_RGB}.`);\n    }\n  }\n  let hex = value.toString(HEX);\n  if (hex.length === 1) {\n    hex = `0${hex}`;\n  }\n  return hex;\n};\n\n/**\n * angle to deg\n * @param angle\n * @returns deg: 0..360\n */\nexport const angleToDeg = (angle: string): number => {\n  if (isString(angle)) {\n    angle = angle.trim();\n  } else {\n    throw new TypeError(`${angle} is not a string.`);\n  }\n  const GRAD = DEG / 400;\n  const RAD = DEG / (Math.PI * DUO);\n  const reg = new RegExp(`^(${NUM})(${ANGLE})?$`);\n  if (!reg.test(angle)) {\n    throw new SyntaxError(`Invalid property value: ${angle}`);\n  }\n  const [, value, unit] = angle.match(reg) as MatchedRegExp;\n  let deg;\n  switch (unit) {\n    case 'grad':\n      deg = parseFloat(value) * GRAD;\n      break;\n    case 'rad':\n      deg = parseFloat(value) * RAD;\n      break;\n    case 'turn':\n      deg = parseFloat(value) * DEG;\n      break;\n    default:\n      deg = parseFloat(value);\n  }\n  deg %= DEG;\n  if (deg < 0) {\n    deg += DEG;\n  } else if (Object.is(deg, -0)) {\n    deg = 0;\n  }\n  return deg;\n};\n\n/**\n * parse alpha\n * @param [alpha] - alpha value\n * @returns alpha: 0..1\n */\nexport const parseAlpha = (alpha: string = ''): number => {\n  if (isString(alpha)) {\n    alpha = alpha.trim();\n    if (!alpha) {\n      alpha = '1';\n    } else if (alpha === NONE) {\n      alpha = '0';\n    } else {\n      let a;\n      if (alpha.endsWith('%')) {\n        a = parseFloat(alpha) / MAX_PCT;\n      } else {\n        a = parseFloat(alpha);\n      }\n      if (!Number.isFinite(a)) {\n        throw new TypeError(`${a} is not a finite number.`);\n      }\n      if (a < PPTH) {\n        alpha = '0';\n      } else if (a > 1) {\n        alpha = '1';\n      } else {\n        alpha = a.toFixed(TRIA);\n      }\n    }\n  } else {\n    alpha = '1';\n  }\n  return parseFloat(alpha);\n};\n\n/**\n * parse hex alpha\n * @param value - alpha value in hex string\n * @returns alpha: 0..1\n */\nexport const parseHexAlpha = (value: string): number => {\n  if (isString(value)) {\n    if (value === '') {\n      throw new SyntaxError('Invalid property value: (empty string)');\n    }\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  let alpha = parseInt(value, HEX);\n  if (alpha <= 0) {\n    return 0;\n  }\n  if (alpha >= MAX_RGB) {\n    return 1;\n  }\n  const alphaMap = new Map();\n  for (let i = 1; i < MAX_PCT; i++) {\n    alphaMap.set(Math.round((i * MAX_RGB) / MAX_PCT), i);\n  }\n  if (alphaMap.has(alpha)) {\n    alpha = alphaMap.get(alpha) / MAX_PCT;\n  } else {\n    alpha = Math.round(alpha / MAX_RGB / PPTH) * PPTH;\n  }\n  return parseFloat(alpha.toFixed(TRIA));\n};\n\n/**\n * transform rgb to linear rgb\n * @param rgb - [r, g, b] r|g|b: 0..255\n * @param [skip] - skip validate\n * @returns TriColorChannels - [r, g, b] r|g|b: 0..1\n */\nexport const transformRgbToLinearRgb = (\n  rgb: TriColorChannels,\n  skip: boolean = false\n): TriColorChannels => {\n  let rr, gg, bb;\n  if (skip) {\n    [rr, gg, bb] = rgb;\n  } else {\n    [rr, gg, bb] = validateColorComponents(rgb, {\n      maxLength: TRIA,\n      maxRange: MAX_RGB\n    });\n  }\n  let r = rr / MAX_RGB;\n  let g = gg / MAX_RGB;\n  let b = bb / MAX_RGB;\n  const COND_POW = 0.04045;\n  if (r > COND_POW) {\n    r = Math.pow((r + LINEAR_OFFSET) / (1 + LINEAR_OFFSET), POW_LINEAR);\n  } else {\n    r /= LINEAR_COEF;\n  }\n  if (g > COND_POW) {\n    g = Math.pow((g + LINEAR_OFFSET) / (1 + LINEAR_OFFSET), POW_LINEAR);\n  } else {\n    g /= LINEAR_COEF;\n  }\n  if (b > COND_POW) {\n    b = Math.pow((b + LINEAR_OFFSET) / (1 + LINEAR_OFFSET), POW_LINEAR);\n  } else {\n    b /= LINEAR_COEF;\n  }\n  return [r, g, b];\n};\n\n/**\n * transform rgb to xyz\n * @param rgb - [r, g, b] r|g|b: 0..255\n * @param [skip] - skip validate\n * @returns TriColorChannels - [x, y, z]\n */\nexport const transformRgbToXyz = (\n  rgb: TriColorChannels,\n  skip: boolean = false\n): TriColorChannels => {\n  if (!skip) {\n    rgb = validateColorComponents(rgb, {\n      maxLength: TRIA,\n      maxRange: MAX_RGB\n    }) as TriColorChannels;\n  }\n  rgb = transformRgbToLinearRgb(rgb, true);\n  const xyz = transformMatrix(MATRIX_L_RGB_TO_XYZ, rgb, true);\n  return xyz;\n};\n\n/**\n * transform rgb to xyz-d50\n * @param rgb - [r, g, b] r|g|b: 0..255 alpha: 0..1\n * @returns TriColorChannels - [x, y, z]\n */\nexport const transformRgbToXyzD50 = (\n  rgb: TriColorChannels\n): TriColorChannels => {\n  let xyz = transformRgbToXyz(rgb);\n  xyz = transformMatrix(MATRIX_D65_TO_D50, xyz, true);\n  return xyz;\n};\n\n/**\n * transform linear rgb to rgb\n * @param rgb - [r, g, b] r|g|b: 0..1\n * @param [round] - round result\n * @returns TriColorChannels - [r, g, b] r|g|b: 0..255\n */\nexport const transformLinearRgbToRgb = (\n  rgb: TriColorChannels,\n  round: boolean = false\n): TriColorChannels => {\n  let [r, g, b] = validateColorComponents(rgb, {\n    maxLength: TRIA\n  });\n  const COND_POW = 809 / 258400;\n  if (r > COND_POW) {\n    r = Math.pow(r, 1 / POW_LINEAR) * (1 + LINEAR_OFFSET) - LINEAR_OFFSET;\n  } else {\n    r *= LINEAR_COEF;\n  }\n  r *= MAX_RGB;\n  if (g > COND_POW) {\n    g = Math.pow(g, 1 / POW_LINEAR) * (1 + LINEAR_OFFSET) - LINEAR_OFFSET;\n  } else {\n    g *= LINEAR_COEF;\n  }\n  g *= MAX_RGB;\n  if (b > COND_POW) {\n    b = Math.pow(b, 1 / POW_LINEAR) * (1 + LINEAR_OFFSET) - LINEAR_OFFSET;\n  } else {\n    b *= LINEAR_COEF;\n  }\n  b *= MAX_RGB;\n  return [\n    round ? Math.round(r) : r,\n    round ? Math.round(g) : g,\n    round ? Math.round(b) : b\n  ];\n};\n\n/**\n * transform xyz to rgb\n * @param xyz - [x, y, z]\n * @param [skip] - skip validate\n * @returns TriColorChannels - [r, g, b] r|g|b: 0..255\n */\nexport const transformXyzToRgb = (\n  xyz: TriColorChannels,\n  skip: boolean = false\n): TriColorChannels => {\n  if (!skip) {\n    xyz = validateColorComponents(xyz, {\n      maxLength: TRIA,\n      validateRange: false\n    }) as TriColorChannels;\n  }\n  let [r, g, b] = transformMatrix(MATRIX_XYZ_TO_L_RGB, xyz, true);\n  [r, g, b] = transformLinearRgbToRgb(\n    [\n      Math.min(Math.max(r, 0), 1),\n      Math.min(Math.max(g, 0), 1),\n      Math.min(Math.max(b, 0), 1)\n    ],\n    true\n  );\n  return [r, g, b];\n};\n\n/**\n * transform xyz to xyz-d50\n * @param xyz - [x, y, z]\n * @returns TriColorChannels - [x, y, z]\n */\nexport const transformXyzToXyzD50 = (\n  xyz: TriColorChannels\n): TriColorChannels => {\n  xyz = validateColorComponents(xyz, {\n    maxLength: TRIA,\n    validateRange: false\n  }) as TriColorChannels;\n  xyz = transformMatrix(MATRIX_D65_TO_D50, xyz, true);\n  return xyz;\n};\n\n/**\n * transform xyz to hsl\n * @param xyz - [x, y, z]\n * @param [skip] - skip validate\n * @returns TriColorChannels - [h, s, l]\n */\nexport const transformXyzToHsl = (\n  xyz: TriColorChannels,\n  skip: boolean = false\n): TriColorChannels => {\n  const [rr, gg, bb] = transformXyzToRgb(xyz, skip);\n  const r = rr / MAX_RGB;\n  const g = gg / MAX_RGB;\n  const b = bb / MAX_RGB;\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  const d = max - min;\n  const l = (max + min) * HALF * MAX_PCT;\n  let h, s;\n  if (Math.round(l) === 0 || Math.round(l) === MAX_PCT) {\n    h = 0;\n    s = 0;\n  } else {\n    s = (d / (1 - Math.abs(max + min - 1))) * MAX_PCT;\n    if (s === 0) {\n      h = 0;\n    } else {\n      switch (max) {\n        case r:\n          h = (g - b) / d;\n          break;\n        case g:\n          h = (b - r) / d + DUO;\n          break;\n        case b:\n        default:\n          h = (r - g) / d + QUAD;\n          break;\n      }\n      h = (h * SEXA) % DEG;\n      if (h < 0) {\n        h += DEG;\n      }\n    }\n  }\n  return [h, s, l];\n};\n\n/**\n * transform xyz to hwb\n * @param xyz - [x, y, z]\n * @param [skip] - skip validate\n * @returns TriColorChannels - [h, w, b]\n */\nexport const transformXyzToHwb = (\n  xyz: TriColorChannels,\n  skip: boolean = false\n): TriColorChannels => {\n  const [r, g, b] = transformXyzToRgb(xyz, skip);\n  const wh = Math.min(r, g, b) / MAX_RGB;\n  const bk = 1 - Math.max(r, g, b) / MAX_RGB;\n  let h;\n  if (wh + bk === 1) {\n    h = 0;\n  } else {\n    [h] = transformXyzToHsl(xyz);\n  }\n  return [h, wh * MAX_PCT, bk * MAX_PCT];\n};\n\n/**\n * transform xyz to oklab\n * @param xyz - [x, y, z]\n * @param [skip] - skip validate\n * @returns TriColorChannels - [l, a, b]\n */\nexport const transformXyzToOklab = (\n  xyz: TriColorChannels,\n  skip: boolean = false\n): TriColorChannels => {\n  if (!skip) {\n    xyz = validateColorComponents(xyz, {\n      maxLength: TRIA,\n      validateRange: false\n    }) as TriColorChannels;\n  }\n  const lms = transformMatrix(MATRIX_XYZ_TO_LMS, xyz, true);\n  const xyzLms = lms.map(c => Math.cbrt(c)) as TriColorChannels;\n  let [l, a, b] = transformMatrix(MATRIX_LMS_TO_OKLAB, xyzLms, true);\n  l = Math.min(Math.max(l, 0), 1);\n  const lPct = Math.round(parseFloat(l.toFixed(QUAD)) * MAX_PCT);\n  if (lPct === 0 || lPct === MAX_PCT) {\n    a = 0;\n    b = 0;\n  }\n  return [l, a, b];\n};\n\n/**\n * transform xyz to oklch\n * @param xyz - [x, y, z]\n * @param [skip] - skip validate\n * @returns TriColorChannels - [l, c, h]\n */\nexport const transformXyzToOklch = (\n  xyz: TriColorChannels,\n  skip: boolean = false\n): TriColorChannels => {\n  const [l, a, b] = transformXyzToOklab(xyz, skip);\n  let c, h;\n  const lPct = Math.round(parseFloat(l.toFixed(QUAD)) * MAX_PCT);\n  if (lPct === 0 || lPct === MAX_PCT) {\n    c = 0;\n    h = 0;\n  } else {\n    c = Math.max(Math.sqrt(Math.pow(a, POW_SQR) + Math.pow(b, POW_SQR)), 0);\n    if (parseFloat(c.toFixed(QUAD)) === 0) {\n      h = 0;\n    } else {\n      h = (Math.atan2(b, a) * DEG_HALF) / Math.PI;\n      if (h < 0) {\n        h += DEG;\n      }\n    }\n  }\n  return [l, c, h];\n};\n\n/**\n * transform xyz D50 to rgb\n * @param xyz - [x, y, z]\n * @param [skip] - skip validate\n * @returns TriColorChannels - [r, g, b] r|g|b: 0..255\n */\nexport const transformXyzD50ToRgb = (\n  xyz: TriColorChannels,\n  skip: boolean = false\n): TriColorChannels => {\n  if (!skip) {\n    xyz = validateColorComponents(xyz, {\n      maxLength: TRIA,\n      validateRange: false\n    }) as TriColorChannels;\n  }\n  const xyzD65 = transformMatrix(MATRIX_D50_TO_D65, xyz, true);\n  const rgb = transformXyzToRgb(xyzD65, true);\n  return rgb;\n};\n\n/**\n * transform xyz-d50 to lab\n * @param xyz - [x, y, z]\n * @param [skip] - skip validate\n * @returns TriColorChannels - [l, a, b]\n */\nexport const transformXyzD50ToLab = (\n  xyz: TriColorChannels,\n  skip: boolean = false\n): TriColorChannels => {\n  if (!skip) {\n    xyz = validateColorComponents(xyz, {\n      maxLength: TRIA,\n      validateRange: false\n    }) as TriColorChannels;\n  }\n  const xyzD50 = xyz.map((val, i) => val / (D50[i] as number));\n  const [f0, f1, f2] = xyzD50.map(val =>\n    val > LAB_EPSILON ? Math.cbrt(val) : (val * LAB_KAPPA + HEX) / LAB_L\n  ) as TriColorChannels;\n  const l = Math.min(Math.max(LAB_L * f1 - HEX, 0), MAX_PCT);\n  let a, b;\n  if (l === 0 || l === MAX_PCT) {\n    a = 0;\n    b = 0;\n  } else {\n    a = (f0 - f1) * LAB_A;\n    b = (f1 - f2) * LAB_B;\n  }\n  return [l, a, b];\n};\n\n/**\n * transform xyz-d50 to lch\n * @param xyz - [x, y, z]\n * @param [skip] - skip validate\n * @returns TriColorChannels - [l, c, h]\n */\nexport const transformXyzD50ToLch = (\n  xyz: TriColorChannels,\n  skip: boolean = false\n): TriColorChannels => {\n  const [l, a, b] = transformXyzD50ToLab(xyz, skip);\n  let c, h;\n  if (l === 0 || l === MAX_PCT) {\n    c = 0;\n    h = 0;\n  } else {\n    c = Math.max(Math.sqrt(Math.pow(a, POW_SQR) + Math.pow(b, POW_SQR)), 0);\n    h = (Math.atan2(b, a) * DEG_HALF) / Math.PI;\n    if (h < 0) {\n      h += DEG;\n    }\n  }\n  return [l, c, h];\n};\n\n/**\n * convert rgb to hex color\n * @param rgb - [r, g, b, alpha] r|g|b: 0..255 alpha: 0..1\n * @returns hex color\n */\nexport const convertRgbToHex = (rgb: ColorChannels): string => {\n  const [r, g, b, alpha] = validateColorComponents(rgb, {\n    alpha: true,\n    maxRange: MAX_RGB\n  }) as ColorChannels;\n  const rr = numberToHexString(r);\n  const gg = numberToHexString(g);\n  const bb = numberToHexString(b);\n  const aa = numberToHexString(alpha * MAX_RGB);\n  let hex;\n  if (aa === 'ff') {\n    hex = `#${rr}${gg}${bb}`;\n  } else {\n    hex = `#${rr}${gg}${bb}${aa}`;\n  }\n  return hex;\n};\n\n/**\n * convert linear rgb to hex color\n * @param rgb - [r, g, b, alpha] r|g|b|alpha: 0..1\n * @param [skip] - skip validate\n * @returns hex color\n */\nexport const convertLinearRgbToHex = (\n  rgb: ColorChannels,\n  skip: boolean = false\n): string => {\n  let r, g, b, alpha;\n  if (skip) {\n    [r, g, b, alpha] = rgb;\n  } else {\n    [r, g, b, alpha] = validateColorComponents(rgb, {\n      minLength: QUAD\n    }) as ColorChannels;\n  }\n  [r, g, b] = transformLinearRgbToRgb([r, g, b], true);\n  const rr = numberToHexString(r);\n  const gg = numberToHexString(g);\n  const bb = numberToHexString(b);\n  const aa = numberToHexString(alpha * MAX_RGB);\n  let hex;\n  if (aa === 'ff') {\n    hex = `#${rr}${gg}${bb}`;\n  } else {\n    hex = `#${rr}${gg}${bb}${aa}`;\n  }\n  return hex;\n};\n\n/**\n * convert xyz to hex color\n * @param xyz - [x, y, z, alpha]\n * @returns hex color\n */\nexport const convertXyzToHex = (xyz: ColorChannels): string => {\n  const [x, y, z, alpha] = validateColorComponents(xyz, {\n    minLength: QUAD,\n    validateRange: false\n  }) as ColorChannels;\n  const [r, g, b] = transformMatrix(MATRIX_XYZ_TO_L_RGB, [x, y, z], true);\n  const hex = convertLinearRgbToHex(\n    [\n      Math.min(Math.max(r, 0), 1),\n      Math.min(Math.max(g, 0), 1),\n      Math.min(Math.max(b, 0), 1),\n      alpha\n    ],\n    true\n  );\n  return hex;\n};\n\n/**\n * convert xyz D50 to hex color\n * @param xyz - [x, y, z, alpha]\n * @returns hex color\n */\nexport const convertXyzD50ToHex = (xyz: ColorChannels): string => {\n  const [x, y, z, alpha] = validateColorComponents(xyz, {\n    minLength: QUAD,\n    validateRange: false\n  }) as ColorChannels;\n  const xyzD65 = transformMatrix(MATRIX_D50_TO_D65, [x, y, z], true);\n  const [r, g, b] = transformMatrix(MATRIX_XYZ_TO_L_RGB, xyzD65, true);\n  const hex = convertLinearRgbToHex([\n    Math.min(Math.max(r, 0), 1),\n    Math.min(Math.max(g, 0), 1),\n    Math.min(Math.max(b, 0), 1),\n    alpha\n  ]);\n  return hex;\n};\n\n/**\n * convert hex color to rgb\n * @param value - hex color value\n * @returns ColorChannels - [r, g, b, alpha] r|g|b: 0..255 alpha: 0..1\n */\nexport const convertHexToRgb = (value: string): ColorChannels => {\n  if (isString(value)) {\n    value = value.toLowerCase().trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  if (\n    !(\n      /^#[\\da-f]{6}$/.test(value) ||\n      /^#[\\da-f]{3}$/.test(value) ||\n      /^#[\\da-f]{8}$/.test(value) ||\n      /^#[\\da-f]{4}$/.test(value)\n    )\n  ) {\n    throw new SyntaxError(`Invalid property value: ${value}`);\n  }\n  const arr: number[] = [];\n  if (/^#[\\da-f]{3}$/.test(value)) {\n    const [, r, g, b] = value.match(\n      /^#([\\da-f])([\\da-f])([\\da-f])$/\n    ) as MatchedRegExp;\n    arr.push(\n      parseInt(`${r}${r}`, HEX),\n      parseInt(`${g}${g}`, HEX),\n      parseInt(`${b}${b}`, HEX),\n      1\n    );\n  } else if (/^#[\\da-f]{4}$/.test(value)) {\n    const [, r, g, b, alpha] = value.match(\n      /^#([\\da-f])([\\da-f])([\\da-f])([\\da-f])$/\n    ) as MatchedRegExp;\n    arr.push(\n      parseInt(`${r}${r}`, HEX),\n      parseInt(`${g}${g}`, HEX),\n      parseInt(`${b}${b}`, HEX),\n      parseHexAlpha(`${alpha}${alpha}`)\n    );\n  } else if (/^#[\\da-f]{8}$/.test(value)) {\n    const [, r, g, b, alpha] = value.match(\n      /^#([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})$/\n    ) as MatchedRegExp;\n    arr.push(\n      parseInt(r, HEX),\n      parseInt(g, HEX),\n      parseInt(b, HEX),\n      parseHexAlpha(alpha)\n    );\n  } else {\n    const [, r, g, b] = value.match(\n      /^#([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})$/\n    ) as MatchedRegExp;\n    arr.push(parseInt(r, HEX), parseInt(g, HEX), parseInt(b, HEX), 1);\n  }\n  return arr as ColorChannels;\n};\n\n/**\n * convert hex color to linear rgb\n * @param value - hex color value\n * @returns ColorChannels - [r, g, b, alpha] r|g|b|alpha: 0..1\n */\nexport const convertHexToLinearRgb = (value: string): ColorChannels => {\n  const [rr, gg, bb, alpha] = convertHexToRgb(value);\n  const [r, g, b] = transformRgbToLinearRgb([rr, gg, bb], true);\n  return [r, g, b, alpha];\n};\n\n/**\n * convert hex color to xyz\n * @param value - hex color value\n * @returns ColorChannels - [x, y, z, alpha]\n */\nexport const convertHexToXyz = (value: string): ColorChannels => {\n  const [r, g, b, alpha] = convertHexToLinearRgb(value);\n  const [x, y, z] = transformMatrix(MATRIX_L_RGB_TO_XYZ, [r, g, b], true);\n  return [x, y, z, alpha];\n};\n\n/**\n * parse rgb()\n * @param value - rgb color value\n * @param [opt] - options\n * @returns parsed color - ['rgb', r, g, b, alpha], '(empty)', NullObject\n */\nexport const parseRgb = (\n  value: string,\n  opt: Options = {}\n): SpecifiedColorChannels | string | NullObject => {\n  if (isString(value)) {\n    value = value.toLowerCase().trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { format = '', nullable = false } = opt;\n  const reg = new RegExp(`^rgba?\\\\(\\\\s*(${SYN_MOD}|${SYN_RGB_LV3})\\\\s*\\\\)$`);\n  if (!reg.test(value)) {\n    const res = resolveInvalidColorValue(format, nullable);\n    if (res instanceof NullObject) {\n      return res;\n    }\n    if (isString(res)) {\n      return res as string;\n    }\n    return res as SpecifiedColorChannels;\n  }\n  const [, val] = value.match(reg) as MatchedRegExp;\n  const [v1, v2, v3, v4 = ''] = val\n    .replace(/[,/]/g, ' ')\n    .split(/\\s+/) as StringColorChannels;\n  let r, g, b;\n  if (v1 === NONE) {\n    r = 0;\n  } else {\n    if (v1.endsWith('%')) {\n      r = (parseFloat(v1) * MAX_RGB) / MAX_PCT;\n    } else {\n      r = parseFloat(v1);\n    }\n    r = Math.min(Math.max(roundToPrecision(r, OCT), 0), MAX_RGB);\n  }\n  if (v2 === NONE) {\n    g = 0;\n  } else {\n    if (v2.endsWith('%')) {\n      g = (parseFloat(v2) * MAX_RGB) / MAX_PCT;\n    } else {\n      g = parseFloat(v2);\n    }\n    g = Math.min(Math.max(roundToPrecision(g, OCT), 0), MAX_RGB);\n  }\n  if (v3 === NONE) {\n    b = 0;\n  } else {\n    if (v3.endsWith('%')) {\n      b = (parseFloat(v3) * MAX_RGB) / MAX_PCT;\n    } else {\n      b = parseFloat(v3);\n    }\n    b = Math.min(Math.max(roundToPrecision(b, OCT), 0), MAX_RGB);\n  }\n  const alpha = parseAlpha(v4);\n  return ['rgb', r, g, b, format === VAL_MIX && v4 === NONE ? NONE : alpha];\n};\n\n/**\n * parse hsl()\n * @param value - hsl color value\n * @param [opt] - options\n * @returns parsed color - ['rgb', r, g, b, alpha], '(empty)', NullObject\n */\nexport const parseHsl = (\n  value: string,\n  opt: Options = {}\n): SpecifiedColorChannels | string | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { format = '', nullable = false } = opt;\n  if (!REG_HSL.test(value)) {\n    const res = resolveInvalidColorValue(format, nullable);\n    if (res instanceof NullObject) {\n      return res;\n    }\n    if (isString(res)) {\n      return res as string;\n    }\n    return res as SpecifiedColorChannels;\n  }\n  const [, val] = value.match(REG_HSL) as MatchedRegExp;\n  const [v1, v2, v3, v4 = ''] = val\n    .replace(/[,/]/g, ' ')\n    .split(/\\s+/) as StringColorChannels;\n  let h, s, l;\n  if (v1 === NONE) {\n    h = 0;\n  } else {\n    h = angleToDeg(v1);\n  }\n  if (v2 === NONE) {\n    s = 0;\n  } else {\n    s = Math.min(Math.max(parseFloat(v2), 0), MAX_PCT);\n  }\n  if (v3 === NONE) {\n    l = 0;\n  } else {\n    l = Math.min(Math.max(parseFloat(v3), 0), MAX_PCT);\n  }\n  const alpha = parseAlpha(v4);\n  if (format === 'hsl') {\n    return [\n      format,\n      v1 === NONE ? v1 : h,\n      v2 === NONE ? v2 : s,\n      v3 === NONE ? v3 : l,\n      v4 === NONE ? v4 : alpha\n    ];\n  }\n  h = (h / DEG) * DOZ;\n  l /= MAX_PCT;\n  const sa = (s / MAX_PCT) * Math.min(l, 1 - l);\n  const rk = h % DOZ;\n  const gk = (8 + h) % DOZ;\n  const bk = (4 + h) % DOZ;\n  const r = l - sa * Math.max(-1, Math.min(rk - TRIA, TRIA ** POW_SQR - rk, 1));\n  const g = l - sa * Math.max(-1, Math.min(gk - TRIA, TRIA ** POW_SQR - gk, 1));\n  const b = l - sa * Math.max(-1, Math.min(bk - TRIA, TRIA ** POW_SQR - bk, 1));\n  return [\n    'rgb',\n    Math.min(Math.max(roundToPrecision(r * MAX_RGB, OCT), 0), MAX_RGB),\n    Math.min(Math.max(roundToPrecision(g * MAX_RGB, OCT), 0), MAX_RGB),\n    Math.min(Math.max(roundToPrecision(b * MAX_RGB, OCT), 0), MAX_RGB),\n    alpha\n  ];\n};\n\n/**\n * parse hwb()\n * @param value - hwb color value\n * @param [opt] - options\n * @returns parsed color - ['rgb', r, g, b, alpha], '(empty)', NullObject\n */\nexport const parseHwb = (\n  value: string,\n  opt: Options = {}\n): SpecifiedColorChannels | string | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { format = '', nullable = false } = opt;\n  if (!REG_HWB.test(value)) {\n    const res = resolveInvalidColorValue(format, nullable);\n    if (res instanceof NullObject) {\n      return res;\n    }\n    if (isString(res)) {\n      return res as string;\n    }\n    return res as SpecifiedColorChannels;\n  }\n  const [, val] = value.match(REG_HWB) as MatchedRegExp;\n  const [v1, v2, v3, v4 = ''] = val\n    .replace('/', ' ')\n    .split(/\\s+/) as StringColorChannels;\n  let h, wh, bk;\n  if (v1 === NONE) {\n    h = 0;\n  } else {\n    h = angleToDeg(v1);\n  }\n  if (v2 === NONE) {\n    wh = 0;\n  } else {\n    wh = Math.min(Math.max(parseFloat(v2), 0), MAX_PCT) / MAX_PCT;\n  }\n  if (v3 === NONE) {\n    bk = 0;\n  } else {\n    bk = Math.min(Math.max(parseFloat(v3), 0), MAX_PCT) / MAX_PCT;\n  }\n  const alpha = parseAlpha(v4);\n  if (format === 'hwb') {\n    return [\n      format,\n      v1 === NONE ? v1 : h,\n      v2 === NONE ? v2 : wh * MAX_PCT,\n      v3 === NONE ? v3 : bk * MAX_PCT,\n      v4 === NONE ? v4 : alpha\n    ];\n  }\n  if (wh + bk >= 1) {\n    const v = roundToPrecision((wh / (wh + bk)) * MAX_RGB, OCT);\n    return ['rgb', v, v, v, alpha];\n  }\n  const factor = (1 - wh - bk) / MAX_RGB;\n  let [, r, g, b] = parseHsl(`hsl(${h} 100 50)`) as ComputedColorChannels;\n  r = roundToPrecision((r * factor + wh) * MAX_RGB, OCT);\n  g = roundToPrecision((g * factor + wh) * MAX_RGB, OCT);\n  b = roundToPrecision((b * factor + wh) * MAX_RGB, OCT);\n  return [\n    'rgb',\n    Math.min(Math.max(r, 0), MAX_RGB),\n    Math.min(Math.max(g, 0), MAX_RGB),\n    Math.min(Math.max(b, 0), MAX_RGB),\n    alpha\n  ];\n};\n\n/**\n * parse lab()\n * @param value - lab color value\n * @param [opt] - options\n * @returns parsed color\n *   - [xyz-d50, x, y, z, alpha], ['lab', l, a, b, alpha], '(empty)', NullObject\n */\nexport const parseLab = (\n  value: string,\n  opt: Options = {}\n): SpecifiedColorChannels | string | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { format = '', nullable = false } = opt;\n  if (!REG_LAB.test(value)) {\n    const res = resolveInvalidColorValue(format, nullable);\n    if (res instanceof NullObject) {\n      return res;\n    }\n    if (isString(res)) {\n      return res as string;\n    }\n    return res as SpecifiedColorChannels;\n  }\n  const COEF_PCT = 1.25;\n  const COND_POW = 8;\n  const [, val] = value.match(REG_LAB) as MatchedRegExp;\n  const [v1, v2, v3, v4 = ''] = val\n    .replace('/', ' ')\n    .split(/\\s+/) as StringColorChannels;\n  let l, a, b;\n  if (v1 === NONE) {\n    l = 0;\n  } else {\n    if (v1.endsWith('%')) {\n      l = parseFloat(v1);\n      if (l > MAX_PCT) {\n        l = MAX_PCT;\n      }\n    } else {\n      l = parseFloat(v1);\n    }\n    if (l < 0) {\n      l = 0;\n    }\n  }\n  if (v2 === NONE) {\n    a = 0;\n  } else {\n    a = v2.endsWith('%') ? parseFloat(v2) * COEF_PCT : parseFloat(v2);\n  }\n  if (v3 === NONE) {\n    b = 0;\n  } else {\n    b = v3.endsWith('%') ? parseFloat(v3) * COEF_PCT : parseFloat(v3);\n  }\n  const alpha = parseAlpha(v4);\n  if (REG_SPEC.test(format)) {\n    return [\n      'lab',\n      v1 === NONE ? v1 : roundToPrecision(l, HEX),\n      v2 === NONE ? v2 : roundToPrecision(a, HEX),\n      v3 === NONE ? v3 : roundToPrecision(b, HEX),\n      v4 === NONE ? v4 : alpha\n    ];\n  }\n  const fl = (l + HEX) / LAB_L;\n  const fa = a / LAB_A + fl;\n  const fb = fl - b / LAB_B;\n  const powFl = Math.pow(fl, POW_CUBE);\n  const powFa = Math.pow(fa, POW_CUBE);\n  const powFb = Math.pow(fb, POW_CUBE);\n  const xyz = [\n    powFa > LAB_EPSILON ? powFa : (fa * LAB_L - HEX) / LAB_KAPPA,\n    l > COND_POW ? powFl : l / LAB_KAPPA,\n    powFb > LAB_EPSILON ? powFb : (fb * LAB_L - HEX) / LAB_KAPPA\n  ];\n  const [x, y, z] = xyz.map(\n    (val, i) => val * (D50[i] as number)\n  ) as TriColorChannels;\n  return [\n    'xyz-d50',\n    roundToPrecision(x, HEX),\n    roundToPrecision(y, HEX),\n    roundToPrecision(z, HEX),\n    alpha\n  ];\n};\n\n/**\n * parse lch()\n * @param value - lch color value\n * @param [opt] - options\n * @returns parsed color\n *   - ['xyz-d50', x, y, z, alpha], ['lch', l, c, h, alpha]\n *   - '(empty)', NullObject\n */\nexport const parseLch = (\n  value: string,\n  opt: Options = {}\n): SpecifiedColorChannels | string | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { format = '', nullable = false } = opt;\n  if (!REG_LCH.test(value)) {\n    const res = resolveInvalidColorValue(format, nullable);\n    if (res instanceof NullObject) {\n      return res;\n    }\n    if (isString(res)) {\n      return res as string;\n    }\n    return res as SpecifiedColorChannels;\n  }\n  const COEF_PCT = 1.5;\n  const [, val] = value.match(REG_LCH) as MatchedRegExp;\n  const [v1, v2, v3, v4 = ''] = val\n    .replace('/', ' ')\n    .split(/\\s+/) as StringColorChannels;\n  let l, c, h;\n  if (v1 === NONE) {\n    l = 0;\n  } else {\n    l = parseFloat(v1);\n    if (l < 0) {\n      l = 0;\n    }\n  }\n  if (v2 === NONE) {\n    c = 0;\n  } else {\n    c = v2.endsWith('%') ? parseFloat(v2) * COEF_PCT : parseFloat(v2);\n  }\n  if (v3 === NONE) {\n    h = 0;\n  } else {\n    h = angleToDeg(v3);\n  }\n  const alpha = parseAlpha(v4);\n  if (REG_SPEC.test(format)) {\n    return [\n      'lch',\n      v1 === NONE ? v1 : roundToPrecision(l, HEX),\n      v2 === NONE ? v2 : roundToPrecision(c, HEX),\n      v3 === NONE ? v3 : roundToPrecision(h, HEX),\n      v4 === NONE ? v4 : alpha\n    ];\n  }\n  const a = c * Math.cos((h * Math.PI) / DEG_HALF);\n  const b = c * Math.sin((h * Math.PI) / DEG_HALF);\n  const [, x, y, z] = parseLab(`lab(${l} ${a} ${b})`) as ComputedColorChannels;\n  return [\n    'xyz-d50',\n    roundToPrecision(x, HEX),\n    roundToPrecision(y, HEX),\n    roundToPrecision(z, HEX),\n    alpha as number\n  ];\n};\n\n/**\n * parse oklab()\n * @param value - oklab color value\n * @param [opt] - options\n * @returns parsed color\n *   - ['xyz-d65', x, y, z, alpha], ['oklab', l, a, b, alpha]\n *   - '(empty)', NullObject\n */\nexport const parseOklab = (\n  value: string,\n  opt: Options = {}\n): SpecifiedColorChannels | string | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { format = '', nullable = false } = opt;\n  if (!REG_OKLAB.test(value)) {\n    const res = resolveInvalidColorValue(format, nullable);\n    if (res instanceof NullObject) {\n      return res;\n    }\n    if (isString(res)) {\n      return res as string;\n    }\n    return res as SpecifiedColorChannels;\n  }\n  const COEF_PCT = 0.4;\n  const [, val] = value.match(REG_OKLAB) as MatchedRegExp;\n  const [v1, v2, v3, v4 = ''] = val\n    .replace('/', ' ')\n    .split(/\\s+/) as StringColorChannels;\n  let l, a, b;\n  if (v1 === NONE) {\n    l = 0;\n  } else {\n    l = v1.endsWith('%') ? parseFloat(v1) / MAX_PCT : parseFloat(v1);\n    if (l < 0) {\n      l = 0;\n    }\n  }\n  if (v2 === NONE) {\n    a = 0;\n  } else if (v2.endsWith('%')) {\n    a = (parseFloat(v2) * COEF_PCT) / MAX_PCT;\n  } else {\n    a = parseFloat(v2);\n  }\n  if (v3 === NONE) {\n    b = 0;\n  } else if (v3.endsWith('%')) {\n    b = (parseFloat(v3) * COEF_PCT) / MAX_PCT;\n  } else {\n    b = parseFloat(v3);\n  }\n  const alpha = parseAlpha(v4);\n  if (REG_SPEC.test(format)) {\n    return [\n      'oklab',\n      v1 === NONE ? v1 : roundToPrecision(l, HEX),\n      v2 === NONE ? v2 : roundToPrecision(a, HEX),\n      v3 === NONE ? v3 : roundToPrecision(b, HEX),\n      v4 === NONE ? v4 : alpha\n    ];\n  }\n  const lms = transformMatrix(MATRIX_OKLAB_TO_LMS, [l, a, b]);\n  const xyzLms = lms.map(c => Math.pow(c, POW_CUBE)) as TriColorChannels;\n  const [x, y, z] = transformMatrix(MATRIX_LMS_TO_XYZ, xyzLms, true);\n  return [\n    'xyz-d65',\n    roundToPrecision(x, HEX),\n    roundToPrecision(y, HEX),\n    roundToPrecision(z, HEX),\n    alpha as number\n  ];\n};\n\n/**\n * parse oklch()\n * @param value - oklch color value\n * @param [opt] - options\n * @returns parsed color\n *   - ['xyz-d65', x, y, z, alpha], ['oklch', l, c, h, alpha]\n *   - '(empty)', NullObject\n */\nexport const parseOklch = (\n  value: string,\n  opt: Options = {}\n): SpecifiedColorChannels | string | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { format = '', nullable = false } = opt;\n  if (!REG_OKLCH.test(value)) {\n    const res = resolveInvalidColorValue(format, nullable);\n    if (res instanceof NullObject) {\n      return res;\n    }\n    if (isString(res)) {\n      return res as string;\n    }\n    return res as SpecifiedColorChannels;\n  }\n  const COEF_PCT = 0.4;\n  const [, val] = value.match(REG_OKLCH) as MatchedRegExp;\n  const [v1, v2, v3, v4 = ''] = val\n    .replace('/', ' ')\n    .split(/\\s+/) as StringColorChannels;\n  let l, c, h;\n  if (v1 === NONE) {\n    l = 0;\n  } else {\n    l = v1.endsWith('%') ? parseFloat(v1) / MAX_PCT : parseFloat(v1);\n    if (l < 0) {\n      l = 0;\n    }\n  }\n  if (v2 === NONE) {\n    c = 0;\n  } else {\n    if (v2.endsWith('%')) {\n      c = (parseFloat(v2) * COEF_PCT) / MAX_PCT;\n    } else {\n      c = parseFloat(v2);\n    }\n    if (c < 0) {\n      c = 0;\n    }\n  }\n  if (v3 === NONE) {\n    h = 0;\n  } else {\n    h = angleToDeg(v3);\n  }\n  const alpha = parseAlpha(v4);\n  if (REG_SPEC.test(format)) {\n    return [\n      'oklch',\n      v1 === NONE ? v1 : roundToPrecision(l, HEX),\n      v2 === NONE ? v2 : roundToPrecision(c, HEX),\n      v3 === NONE ? v3 : roundToPrecision(h, HEX),\n      v4 === NONE ? v4 : alpha\n    ];\n  }\n  const a = c * Math.cos((h * Math.PI) / DEG_HALF);\n  const b = c * Math.sin((h * Math.PI) / DEG_HALF);\n  const lms = transformMatrix(MATRIX_OKLAB_TO_LMS, [l, a, b]);\n  const xyzLms = lms.map(cc => Math.pow(cc, POW_CUBE)) as TriColorChannels;\n  const [x, y, z] = transformMatrix(MATRIX_LMS_TO_XYZ, xyzLms, true);\n  return [\n    'xyz-d65',\n    roundToPrecision(x, HEX),\n    roundToPrecision(y, HEX),\n    roundToPrecision(z, HEX),\n    alpha\n  ];\n};\n\n/**\n * parse color()\n * @param value - color function value\n * @param [opt] - options\n * @returns parsed color\n *   - ['xyz-(d50|d65)', x, y, z, alpha], [cs, r, g, b, alpha]\n *   - '(empty)', NullObject\n */\nexport const parseColorFunc = (\n  value: string,\n  opt: Options = {}\n): SpecifiedColorChannels | string | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { colorSpace = '', d50 = false, format = '', nullable = false } = opt;\n  if (!REG_FN_COLOR.test(value)) {\n    const res = resolveInvalidColorValue(format, nullable);\n    if (res instanceof NullObject) {\n      return res;\n    }\n    if (isString(res)) {\n      return res as string;\n    }\n    return res as SpecifiedColorChannels;\n  }\n  const [, val] = value.match(REG_FN_COLOR) as MatchedRegExp;\n  let [cs, v1, v2, v3, v4 = ''] = val\n    .replace('/', ' ')\n    .split(/\\s+/) as StringColorSpacedChannels;\n  let r, g, b;\n  if (cs === 'xyz') {\n    cs = 'xyz-d65';\n  }\n  if (v1 === NONE) {\n    r = 0;\n  } else {\n    r = v1.endsWith('%') ? parseFloat(v1) / MAX_PCT : parseFloat(v1);\n  }\n  if (v2 === NONE) {\n    g = 0;\n  } else {\n    g = v2.endsWith('%') ? parseFloat(v2) / MAX_PCT : parseFloat(v2);\n  }\n  if (v3 === NONE) {\n    b = 0;\n  } else {\n    b = v3.endsWith('%') ? parseFloat(v3) / MAX_PCT : parseFloat(v3);\n  }\n  const alpha = parseAlpha(v4);\n  if (REG_SPEC.test(format) || (format === VAL_MIX && cs === colorSpace)) {\n    return [\n      cs,\n      v1 === NONE ? v1 : roundToPrecision(r, DEC),\n      v2 === NONE ? v2 : roundToPrecision(g, DEC),\n      v3 === NONE ? v3 : roundToPrecision(b, DEC),\n      v4 === NONE ? v4 : alpha\n    ];\n  }\n  let x = 0;\n  let y = 0;\n  let z = 0;\n  // srgb-linear\n  if (cs === 'srgb-linear') {\n    [x, y, z] = transformMatrix(MATRIX_L_RGB_TO_XYZ, [r, g, b]);\n    if (d50) {\n      [x, y, z] = transformMatrix(MATRIX_D65_TO_D50, [x, y, z], true);\n    }\n    // display-p3\n  } else if (cs === 'display-p3') {\n    const linearRgb = transformRgbToLinearRgb([\n      r * MAX_RGB,\n      g * MAX_RGB,\n      b * MAX_RGB\n    ]);\n    [x, y, z] = transformMatrix(MATRIX_P3_TO_XYZ, linearRgb);\n    if (d50) {\n      [x, y, z] = transformMatrix(MATRIX_D65_TO_D50, [x, y, z], true);\n    }\n    // rec2020\n  } else if (cs === 'rec2020') {\n    const ALPHA = 1.09929682680944;\n    const BETA = 0.018053968510807;\n    const REC_COEF = 0.45;\n    const rgb = [r, g, b].map(c => {\n      let cl;\n      if (c < BETA * REC_COEF * DEC) {\n        cl = c / (REC_COEF * DEC);\n      } else {\n        cl = Math.pow((c + ALPHA - 1) / ALPHA, 1 / REC_COEF);\n      }\n      return cl;\n    }) as TriColorChannels;\n    [x, y, z] = transformMatrix(MATRIX_REC2020_TO_XYZ, rgb);\n    if (d50) {\n      [x, y, z] = transformMatrix(MATRIX_D65_TO_D50, [x, y, z], true);\n    }\n    // a98-rgb\n  } else if (cs === 'a98-rgb') {\n    const POW_A98 = 563 / 256;\n    const rgb = [r, g, b].map(c => {\n      const cl = Math.pow(c, POW_A98);\n      return cl;\n    }) as TriColorChannels;\n    [x, y, z] = transformMatrix(MATRIX_A98_TO_XYZ, rgb);\n    if (d50) {\n      [x, y, z] = transformMatrix(MATRIX_D65_TO_D50, [x, y, z], true);\n    }\n    // prophoto-rgb\n  } else if (cs === 'prophoto-rgb') {\n    const POW_PROPHOTO = 1.8;\n    const rgb = [r, g, b].map(c => {\n      let cl;\n      if (c > 1 / (HEX * DUO)) {\n        cl = Math.pow(c, POW_PROPHOTO);\n      } else {\n        cl = c / HEX;\n      }\n      return cl;\n    }) as TriColorChannels;\n    [x, y, z] = transformMatrix(MATRIX_PROPHOTO_TO_XYZ_D50, rgb);\n    if (!d50) {\n      [x, y, z] = transformMatrix(MATRIX_D50_TO_D65, [x, y, z], true);\n    }\n    // xyz, xyz-d50, xyz-d65\n  } else if (/^xyz(?:-d(?:50|65))?$/.test(cs)) {\n    [x, y, z] = [r, g, b];\n    if (cs === 'xyz-d50') {\n      if (!d50) {\n        [x, y, z] = transformMatrix(MATRIX_D50_TO_D65, [x, y, z]);\n      }\n    } else if (d50) {\n      [x, y, z] = transformMatrix(MATRIX_D65_TO_D50, [x, y, z], true);\n    }\n    // srgb\n  } else {\n    [x, y, z] = transformRgbToXyz([r * MAX_RGB, g * MAX_RGB, b * MAX_RGB]);\n    if (d50) {\n      [x, y, z] = transformMatrix(MATRIX_D65_TO_D50, [x, y, z], true);\n    }\n  }\n  return [\n    d50 ? 'xyz-d50' : 'xyz-d65',\n    roundToPrecision(x, HEX),\n    roundToPrecision(y, HEX),\n    roundToPrecision(z, HEX),\n    format === VAL_MIX && v4 === NONE ? v4 : alpha\n  ];\n};\n\n/**\n * parse color value\n * @param value - CSS color value\n * @param [opt] - options\n * @returns parsed color\n *   - ['xyz-(d50|d65)', x, y, z, alpha], ['rgb', r, g, b, alpha]\n *   - value, '(empty)', NullObject\n */\nexport const parseColorValue = (\n  value: string,\n  opt: Options = {}\n): SpecifiedColorChannels | string | NullObject => {\n  if (isString(value)) {\n    value = value.toLowerCase().trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { d50 = false, format = '', nullable = false } = opt;\n  if (!REG_COLOR.test(value)) {\n    const res = resolveInvalidColorValue(format, nullable);\n    if (res instanceof NullObject) {\n      return res;\n    }\n    if (isString(res)) {\n      return res as string;\n    }\n    return res as SpecifiedColorChannels;\n  }\n  let x = 0;\n  let y = 0;\n  let z = 0;\n  let alpha = 0;\n  // complement currentcolor as a missing color\n  if (REG_CURRENT.test(value)) {\n    if (format === VAL_COMP) {\n      return ['rgb', 0, 0, 0, 0];\n    }\n    if (format === VAL_SPEC) {\n      return value;\n    }\n    // named-color\n  } else if (/^[a-z]+$/.test(value)) {\n    if (Object.hasOwn(NAMED_COLORS, value)) {\n      if (format === VAL_SPEC) {\n        return value;\n      }\n      const [r, g, b] = NAMED_COLORS[\n        value as keyof typeof NAMED_COLORS\n      ] as TriColorChannels;\n      alpha = 1;\n      if (format === VAL_COMP) {\n        return ['rgb', r, g, b, alpha];\n      }\n      [x, y, z] = transformRgbToXyz([r, g, b], true);\n      if (d50) {\n        [x, y, z] = transformMatrix(MATRIX_D65_TO_D50, [x, y, z], true);\n      }\n    } else {\n      switch (format) {\n        case VAL_COMP: {\n          if (nullable && value !== 'transparent') {\n            return new NullObject();\n          }\n          return ['rgb', 0, 0, 0, 0];\n        }\n        case VAL_SPEC: {\n          if (value === 'transparent') {\n            return value;\n          }\n          return '';\n        }\n        case VAL_MIX: {\n          if (value === 'transparent') {\n            return ['rgb', 0, 0, 0, 0];\n          }\n          return new NullObject();\n        }\n        default:\n      }\n    }\n    // hex-color\n  } else if (value[0] === '#') {\n    if (REG_SPEC.test(format)) {\n      const rgb = convertHexToRgb(value);\n      return ['rgb', ...rgb];\n    }\n    [x, y, z, alpha] = convertHexToXyz(value);\n    if (d50) {\n      [x, y, z] = transformMatrix(MATRIX_D65_TO_D50, [x, y, z], true);\n    }\n    // lab()\n  } else if (value.startsWith('lab')) {\n    if (REG_SPEC.test(format)) {\n      return parseLab(value, opt);\n    }\n    [, x, y, z, alpha] = parseLab(value) as ComputedColorChannels;\n    if (!d50) {\n      [x, y, z] = transformMatrix(MATRIX_D50_TO_D65, [x, y, z], true);\n    }\n    // lch()\n  } else if (value.startsWith('lch')) {\n    if (REG_SPEC.test(format)) {\n      return parseLch(value, opt);\n    }\n    [, x, y, z, alpha] = parseLch(value) as ComputedColorChannels;\n    if (!d50) {\n      [x, y, z] = transformMatrix(MATRIX_D50_TO_D65, [x, y, z], true);\n    }\n    // oklab()\n  } else if (value.startsWith('oklab')) {\n    if (REG_SPEC.test(format)) {\n      return parseOklab(value, opt);\n    }\n    [, x, y, z, alpha] = parseOklab(value) as ComputedColorChannels;\n    if (d50) {\n      [x, y, z] = transformMatrix(MATRIX_D65_TO_D50, [x, y, z], true);\n    }\n    // oklch()\n  } else if (value.startsWith('oklch')) {\n    if (REG_SPEC.test(format)) {\n      return parseOklch(value, opt);\n    }\n    [, x, y, z, alpha] = parseOklch(value) as ComputedColorChannels;\n    if (d50) {\n      [x, y, z] = transformMatrix(MATRIX_D65_TO_D50, [x, y, z], true);\n    }\n  } else {\n    let r, g, b;\n    // hsl()\n    if (value.startsWith('hsl')) {\n      [, r, g, b, alpha] = parseHsl(value) as ComputedColorChannels;\n      // hwb()\n    } else if (value.startsWith('hwb')) {\n      [, r, g, b, alpha] = parseHwb(value) as ComputedColorChannels;\n      // rgb()\n    } else {\n      [, r, g, b, alpha] = parseRgb(value, opt) as ComputedColorChannels;\n    }\n    if (REG_SPEC.test(format)) {\n      return ['rgb', Math.round(r), Math.round(g), Math.round(b), alpha];\n    }\n    [x, y, z] = transformRgbToXyz([r, g, b]);\n    if (d50) {\n      [x, y, z] = transformMatrix(MATRIX_D65_TO_D50, [x, y, z], true);\n    }\n  }\n  return [\n    d50 ? 'xyz-d50' : 'xyz-d65',\n    roundToPrecision(x, HEX),\n    roundToPrecision(y, HEX),\n    roundToPrecision(z, HEX),\n    alpha\n  ];\n};\n\n/**\n * resolve color value\n * @param value - CSS color value\n * @param [opt] - options\n * @returns resolved color\n *   - [cs, v1, v2, v3, alpha], value, '(empty)', NullObject\n */\nexport const resolveColorValue = (\n  value: string,\n  opt: Options = {}\n): SpecifiedColorChannels | string | NullObject => {\n  if (isString(value)) {\n    value = value.toLowerCase().trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { colorSpace = '', format = '', nullable = false } = opt;\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'resolveColorValue',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    if (cachedResult.isNull) {\n      return cachedResult as NullObject;\n    }\n    const cachedItem = cachedResult.item;\n    if (isString(cachedItem)) {\n      return cachedItem as string;\n    }\n    return cachedItem as SpecifiedColorChannels;\n  }\n  if (!REG_COLOR.test(value)) {\n    const res = resolveInvalidColorValue(format, nullable);\n    if (res instanceof NullObject) {\n      setCache(cacheKey, null);\n      return res;\n    }\n    setCache(cacheKey, res);\n    if (isString(res)) {\n      return res as string;\n    }\n    return res as SpecifiedColorChannels;\n  }\n  let cs = '';\n  let r = 0;\n  let g = 0;\n  let b = 0;\n  let alpha = 0;\n  // complement currentcolor as a missing color\n  if (REG_CURRENT.test(value)) {\n    if (format === VAL_SPEC) {\n      setCache(cacheKey, value);\n      return value;\n    }\n    // named-color\n  } else if (/^[a-z]+$/.test(value)) {\n    if (Object.hasOwn(NAMED_COLORS, value)) {\n      if (format === VAL_SPEC) {\n        setCache(cacheKey, value);\n        return value;\n      }\n      [r, g, b] = NAMED_COLORS[\n        value as keyof typeof NAMED_COLORS\n      ] as TriColorChannels;\n      alpha = 1;\n    } else {\n      switch (format) {\n        case VAL_SPEC: {\n          if (value === 'transparent') {\n            setCache(cacheKey, value);\n            return value;\n          }\n          const res = '';\n          setCache(cacheKey, res);\n          return res;\n        }\n        case VAL_MIX: {\n          if (value === 'transparent') {\n            const res: SpecifiedColorChannels = ['rgb', 0, 0, 0, 0];\n            setCache(cacheKey, res);\n            return res;\n          }\n          setCache(cacheKey, null);\n          return new NullObject();\n        }\n        case VAL_COMP:\n        default: {\n          if (nullable && value !== 'transparent') {\n            setCache(cacheKey, null);\n            return new NullObject();\n          }\n          const res: SpecifiedColorChannels = ['rgb', 0, 0, 0, 0];\n          setCache(cacheKey, res);\n          return res;\n        }\n      }\n    }\n    // hex-color\n  } else if (value[0] === '#') {\n    [r, g, b, alpha] = convertHexToRgb(value);\n    // hsl()\n  } else if (value.startsWith('hsl')) {\n    [, r, g, b, alpha] = parseHsl(value, opt) as ComputedColorChannels;\n    // hwb()\n  } else if (value.startsWith('hwb')) {\n    [, r, g, b, alpha] = parseHwb(value, opt) as ComputedColorChannels;\n    // lab(), lch()\n  } else if (/^l(?:ab|ch)/.test(value)) {\n    let x, y, z;\n    if (value.startsWith('lab')) {\n      [cs, x, y, z, alpha] = parseLab(value, opt) as ComputedColorChannels;\n    } else {\n      [cs, x, y, z, alpha] = parseLch(value, opt) as ComputedColorChannels;\n    }\n    if (REG_SPEC.test(format)) {\n      const res: SpecifiedColorChannels = [cs, x, y, z, alpha];\n      setCache(cacheKey, res);\n      return res;\n    }\n    [r, g, b] = transformXyzD50ToRgb([x, y, z]);\n    // oklab(), oklch()\n  } else if (/^okl(?:ab|ch)/.test(value)) {\n    let x, y, z;\n    if (value.startsWith('oklab')) {\n      [cs, x, y, z, alpha] = parseOklab(value, opt) as ComputedColorChannels;\n    } else {\n      [cs, x, y, z, alpha] = parseOklch(value, opt) as ComputedColorChannels;\n    }\n    if (REG_SPEC.test(format)) {\n      const res: SpecifiedColorChannels = [cs, x, y, z, alpha];\n      setCache(cacheKey, res);\n      return res;\n    }\n    [r, g, b] = transformXyzToRgb([x, y, z]);\n    // rgb()\n  } else {\n    [, r, g, b, alpha] = parseRgb(value, opt) as ComputedColorChannels;\n  }\n  if (format === VAL_MIX && colorSpace === 'srgb') {\n    const res: SpecifiedColorChannels = [\n      'srgb',\n      r / MAX_RGB,\n      g / MAX_RGB,\n      b / MAX_RGB,\n      alpha\n    ];\n    setCache(cacheKey, res);\n    return res;\n  }\n  const res: SpecifiedColorChannels = [\n    'rgb',\n    Math.round(r),\n    Math.round(g),\n    Math.round(b),\n    alpha\n  ];\n  setCache(cacheKey, res);\n  return res;\n};\n\n/**\n * resolve color()\n * @param value - color function value\n * @param [opt] - options\n * @returns resolved color - [cs, v1, v2, v3, alpha], '(empty)', NullObject\n */\nexport const resolveColorFunc = (\n  value: string,\n  opt: Options = {}\n): SpecifiedColorChannels | string | NullObject => {\n  if (isString(value)) {\n    value = value.toLowerCase().trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { colorSpace = '', format = '', nullable = false } = opt;\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'resolveColorFunc',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    if (cachedResult.isNull) {\n      return cachedResult as NullObject;\n    }\n    const cachedItem = cachedResult.item;\n    if (isString(cachedItem)) {\n      return cachedItem as string;\n    }\n    return cachedItem as SpecifiedColorChannels;\n  }\n  if (!REG_FN_COLOR.test(value)) {\n    const res = resolveInvalidColorValue(format, nullable);\n    if (res instanceof NullObject) {\n      setCache(cacheKey, null);\n      return res;\n    }\n    setCache(cacheKey, res);\n    if (isString(res)) {\n      return res as string;\n    }\n    return res as SpecifiedColorChannels;\n  }\n  const [cs, v1, v2, v3, v4] = parseColorFunc(\n    value,\n    opt\n  ) as SpecifiedColorChannels;\n  if (REG_SPEC.test(format) || (format === VAL_MIX && cs === colorSpace)) {\n    const res: SpecifiedColorChannels = [cs, v1, v2, v3, v4];\n    setCache(cacheKey, res);\n    return res;\n  }\n  const x = parseFloat(`${v1}`);\n  const y = parseFloat(`${v2}`);\n  const z = parseFloat(`${v3}`);\n  const alpha = parseAlpha(`${v4}`);\n  const [r, g, b] = transformXyzToRgb([x, y, z], true);\n  const res: SpecifiedColorChannels = ['rgb', r, g, b, alpha];\n  setCache(cacheKey, res);\n  return res;\n};\n\n/**\n * convert color value to linear rgb\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels | NullObject - [r, g, b, alpha] r|g|b|alpha: 0..1\n */\nexport const convertColorToLinearRgb = (\n  value: string,\n  opt: {\n    colorSpace?: string;\n    format?: string;\n  } = {}\n): ColorChannels | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { colorSpace = '', format = '' } = opt;\n  let cs = '';\n  let r, g, b, alpha, x, y, z;\n  if (format === VAL_MIX) {\n    let xyz;\n    if (value.startsWith(FN_COLOR)) {\n      xyz = parseColorFunc(value, opt);\n    } else {\n      xyz = parseColorValue(value, opt);\n    }\n    if (xyz instanceof NullObject) {\n      return xyz;\n    }\n    [cs, x, y, z, alpha] = xyz as ComputedColorChannels;\n    if (cs === colorSpace) {\n      return [x, y, z, alpha];\n    }\n    [r, g, b] = transformMatrix(MATRIX_XYZ_TO_L_RGB, [x, y, z], true);\n  } else if (value.startsWith(FN_COLOR)) {\n    const [, val] = value.match(REG_FN_COLOR) as MatchedRegExp;\n    const [cs] = val\n      .replace('/', ' ')\n      .split(/\\s+/) as StringColorSpacedChannels;\n    if (cs === 'srgb-linear') {\n      [, r, g, b, alpha] = resolveColorFunc(value, {\n        format: VAL_COMP\n      }) as ComputedColorChannels;\n    } else {\n      [, x, y, z, alpha] = parseColorFunc(value) as ComputedColorChannels;\n      [r, g, b] = transformMatrix(MATRIX_XYZ_TO_L_RGB, [x, y, z], true);\n    }\n  } else {\n    [, x, y, z, alpha] = parseColorValue(value) as ComputedColorChannels;\n    [r, g, b] = transformMatrix(MATRIX_XYZ_TO_L_RGB, [x, y, z], true);\n  }\n  return [\n    Math.min(Math.max(r, 0), 1),\n    Math.min(Math.max(g, 0), 1),\n    Math.min(Math.max(b, 0), 1),\n    alpha\n  ];\n};\n\n/**\n * convert color value to rgb\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels | NullObject\n *   - [r, g, b, alpha] r|g|b: 0..255 alpha: 0..1\n */\nexport const convertColorToRgb = (\n  value: string,\n  opt: Options = {}\n): ColorChannels | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { format = '' } = opt;\n  let r, g, b, alpha;\n  if (format === VAL_MIX) {\n    let rgb;\n    if (value.startsWith(FN_COLOR)) {\n      rgb = resolveColorFunc(value, opt);\n    } else {\n      rgb = resolveColorValue(value, opt);\n    }\n    if (rgb instanceof NullObject) {\n      return rgb;\n    }\n    [, r, g, b, alpha] = rgb as ComputedColorChannels;\n  } else if (value.startsWith(FN_COLOR)) {\n    const [, val] = value.match(REG_FN_COLOR) as MatchedRegExp;\n    const [cs] = val\n      .replace('/', ' ')\n      .split(/\\s+/) as StringColorSpacedChannels;\n    if (cs === 'srgb') {\n      [, r, g, b, alpha] = resolveColorFunc(value, {\n        format: VAL_COMP\n      }) as ComputedColorChannels;\n      r *= MAX_RGB;\n      g *= MAX_RGB;\n      b *= MAX_RGB;\n    } else {\n      [, r, g, b, alpha] = resolveColorFunc(value) as ComputedColorChannels;\n    }\n  } else if (/^(?:ok)?l(?:ab|ch)/.test(value)) {\n    [r, g, b, alpha] = convertColorToLinearRgb(value) as ColorChannels;\n    [r, g, b] = transformLinearRgbToRgb([r, g, b]);\n  } else {\n    [, r, g, b, alpha] = resolveColorValue(value, {\n      format: VAL_COMP\n    }) as ComputedColorChannels;\n  }\n  return [r, g, b, alpha];\n};\n\n/**\n * convert color value to xyz\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels | NullObject - [x, y, z, alpha]\n */\nexport const convertColorToXyz = (\n  value: string,\n  opt: Options = {}\n): ColorChannels | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { d50 = false, format = '' } = opt;\n  let x, y, z, alpha;\n  if (format === VAL_MIX) {\n    let xyz;\n    if (value.startsWith(FN_COLOR)) {\n      xyz = parseColorFunc(value, opt);\n    } else {\n      xyz = parseColorValue(value, opt);\n    }\n    if (xyz instanceof NullObject) {\n      return xyz;\n    }\n    [, x, y, z, alpha] = xyz as ComputedColorChannels;\n  } else if (value.startsWith(FN_COLOR)) {\n    const [, val] = value.match(REG_FN_COLOR) as MatchedRegExp;\n    const [cs] = val\n      .replace('/', ' ')\n      .split(/\\s+/) as StringColorSpacedChannels;\n    if (d50) {\n      if (cs === 'xyz-d50') {\n        [, x, y, z, alpha] = resolveColorFunc(value, {\n          format: VAL_COMP\n        }) as ComputedColorChannels;\n      } else {\n        [, x, y, z, alpha] = parseColorFunc(\n          value,\n          opt\n        ) as ComputedColorChannels;\n      }\n    } else if (/^xyz(?:-d65)?$/.test(cs)) {\n      [, x, y, z, alpha] = resolveColorFunc(value, {\n        format: VAL_COMP\n      }) as ComputedColorChannels;\n    } else {\n      [, x, y, z, alpha] = parseColorFunc(value) as ComputedColorChannels;\n    }\n  } else {\n    [, x, y, z, alpha] = parseColorValue(value, opt) as ComputedColorChannels;\n  }\n  return [x, y, z, alpha];\n};\n\n/**\n * convert color value to hsl\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels | NullObject - [h, s, l, alpha], hue may be powerless\n */\nexport const convertColorToHsl = (\n  value: string,\n  opt: Options = {}\n): ColorChannels | [number | string, number, number, number] | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { format = '' } = opt;\n  let h, s, l, alpha;\n  if (REG_HSL.test(value)) {\n    [, h, s, l, alpha] = parseHsl(value, {\n      format: 'hsl'\n    }) as ComputedColorChannels;\n    if (format === 'hsl') {\n      return [Math.round(h), Math.round(s), Math.round(l), alpha];\n    }\n    return [h, s, l, alpha];\n  }\n  let x, y, z;\n  if (format === VAL_MIX) {\n    let xyz;\n    if (value.startsWith(FN_COLOR)) {\n      xyz = parseColorFunc(value, opt);\n    } else {\n      xyz = parseColorValue(value, opt);\n    }\n    if (xyz instanceof NullObject) {\n      return xyz;\n    }\n    [, x, y, z, alpha] = xyz as ComputedColorChannels;\n  } else if (value.startsWith(FN_COLOR)) {\n    [, x, y, z, alpha] = parseColorFunc(value) as ComputedColorChannels;\n  } else {\n    [, x, y, z, alpha] = parseColorValue(value) as ComputedColorChannels;\n  }\n  [h, s, l] = transformXyzToHsl([x, y, z], true) as TriColorChannels;\n  if (format === 'hsl') {\n    return [Math.round(h), Math.round(s), Math.round(l), alpha];\n  }\n  return [format === VAL_MIX && s === 0 ? NONE : h, s, l, alpha];\n};\n\n/**\n * convert color value to hwb\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels | NullObject - [h, w, b, alpha], hue may be powerless\n */\nexport const convertColorToHwb = (\n  value: string,\n  opt: Options = {}\n): ColorChannels | [number | string, number, number, number] | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { format = '' } = opt;\n  let h, w, b, alpha;\n  if (REG_HWB.test(value)) {\n    [, h, w, b, alpha] = parseHwb(value, {\n      format: 'hwb'\n    }) as ComputedColorChannels;\n    if (format === 'hwb') {\n      return [Math.round(h), Math.round(w), Math.round(b), alpha];\n    }\n    return [h, w, b, alpha];\n  }\n  let x, y, z;\n  if (format === VAL_MIX) {\n    let xyz;\n    if (value.startsWith(FN_COLOR)) {\n      xyz = parseColorFunc(value, opt);\n    } else {\n      xyz = parseColorValue(value, opt);\n    }\n    if (xyz instanceof NullObject) {\n      return xyz;\n    }\n    [, x, y, z, alpha] = xyz as ComputedColorChannels;\n  } else if (value.startsWith(FN_COLOR)) {\n    [, x, y, z, alpha] = parseColorFunc(value) as ComputedColorChannels;\n  } else {\n    [, x, y, z, alpha] = parseColorValue(value) as ComputedColorChannels;\n  }\n  [h, w, b] = transformXyzToHwb([x, y, z], true) as TriColorChannels;\n  if (format === 'hwb') {\n    return [Math.round(h), Math.round(w), Math.round(b), alpha];\n  }\n  return [format === VAL_MIX && w + b >= 100 ? NONE : h, w, b, alpha];\n};\n\n/**\n * convert color value to lab\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels | NullObject - [l, a, b, alpha]\n */\nexport const convertColorToLab = (\n  value: string,\n  opt: Options = {}\n): ColorChannels | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { format = '' } = opt;\n  let l, a, b, alpha;\n  if (REG_LAB.test(value)) {\n    [, l, a, b, alpha] = parseLab(value, {\n      format: VAL_COMP\n    }) as ComputedColorChannels;\n    return [l, a, b, alpha];\n  }\n  let x, y, z;\n  if (format === VAL_MIX) {\n    let xyz;\n    opt.d50 = true;\n    if (value.startsWith(FN_COLOR)) {\n      xyz = parseColorFunc(value, opt);\n    } else {\n      xyz = parseColorValue(value, opt);\n    }\n    if (xyz instanceof NullObject) {\n      return xyz;\n    }\n    [, x, y, z, alpha] = xyz as ComputedColorChannels;\n  } else if (value.startsWith(FN_COLOR)) {\n    [, x, y, z, alpha] = parseColorFunc(value, {\n      d50: true\n    }) as ComputedColorChannels;\n  } else {\n    [, x, y, z, alpha] = parseColorValue(value, {\n      d50: true\n    }) as ComputedColorChannels;\n  }\n  [l, a, b] = transformXyzD50ToLab([x, y, z], true);\n  return [l, a, b, alpha];\n};\n\n/**\n * convert color value to lch\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels | NullObject - [l, c, h, alpha], hue may be powerless\n */\nexport const convertColorToLch = (\n  value: string,\n  opt: Options = {}\n): ColorChannels | [number, number, number | string, number] | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { format = '' } = opt;\n  let l, c, h, alpha;\n  if (REG_LCH.test(value)) {\n    [, l, c, h, alpha] = parseLch(value, {\n      format: VAL_COMP\n    }) as ComputedColorChannels;\n    return [l, c, h, alpha];\n  }\n  let x, y, z;\n  if (format === VAL_MIX) {\n    let xyz;\n    opt.d50 = true;\n    if (value.startsWith(FN_COLOR)) {\n      xyz = parseColorFunc(value, opt);\n    } else {\n      xyz = parseColorValue(value, opt);\n    }\n    if (xyz instanceof NullObject) {\n      return xyz;\n    }\n    [, x, y, z, alpha] = xyz as ComputedColorChannels;\n  } else if (value.startsWith(FN_COLOR)) {\n    [, x, y, z, alpha] = parseColorFunc(value, {\n      d50: true\n    }) as ComputedColorChannels;\n  } else {\n    [, x, y, z, alpha] = parseColorValue(value, {\n      d50: true\n    }) as ComputedColorChannels;\n  }\n  [l, c, h] = transformXyzD50ToLch([x, y, z], true);\n  return [l, c, format === VAL_MIX && c === 0 ? NONE : h, alpha];\n};\n\n/**\n * convert color value to oklab\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels | NullObject - [l, a, b, alpha]\n */\nexport const convertColorToOklab = (\n  value: string,\n  opt: Options = {}\n): ColorChannels | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { format = '' } = opt;\n  let l, a, b, alpha;\n  if (REG_OKLAB.test(value)) {\n    [, l, a, b, alpha] = parseOklab(value, {\n      format: VAL_COMP\n    }) as ComputedColorChannels;\n    return [l, a, b, alpha];\n  }\n  let x, y, z;\n  if (format === VAL_MIX) {\n    let xyz;\n    if (value.startsWith(FN_COLOR)) {\n      xyz = parseColorFunc(value, opt);\n    } else {\n      xyz = parseColorValue(value, opt);\n    }\n    if (xyz instanceof NullObject) {\n      return xyz;\n    }\n    [, x, y, z, alpha] = xyz as ComputedColorChannels;\n  } else if (value.startsWith(FN_COLOR)) {\n    [, x, y, z, alpha] = parseColorFunc(value) as ComputedColorChannels;\n  } else {\n    [, x, y, z, alpha] = parseColorValue(value) as ComputedColorChannels;\n  }\n  [l, a, b] = transformXyzToOklab([x, y, z], true);\n  return [l, a, b, alpha];\n};\n\n/**\n * convert color value to oklch\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels | NullObject - [l, c, h, alpha], hue may be powerless\n */\nexport const convertColorToOklch = (\n  value: string,\n  opt: Options = {}\n): ColorChannels | [number, number, number | string, number] | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { format = '' } = opt;\n  let l, c, h, alpha;\n  if (REG_OKLCH.test(value)) {\n    [, l, c, h, alpha] = parseOklch(value, {\n      format: VAL_COMP\n    }) as ComputedColorChannels;\n    return [l, c, h, alpha];\n  }\n  let x, y, z;\n  if (format === VAL_MIX) {\n    let xyz;\n    if (value.startsWith(FN_COLOR)) {\n      xyz = parseColorFunc(value, opt);\n    } else {\n      xyz = parseColorValue(value, opt);\n    }\n    if (xyz instanceof NullObject) {\n      return xyz;\n    }\n    [, x, y, z, alpha] = xyz as ComputedColorChannels;\n  } else if (value.startsWith(FN_COLOR)) {\n    [, x, y, z, alpha] = parseColorFunc(value) as ComputedColorChannels;\n  } else {\n    [, x, y, z, alpha] = parseColorValue(value) as ComputedColorChannels;\n  }\n  [l, c, h] = transformXyzToOklch([x, y, z], true) as TriColorChannels;\n  return [l, c, format === VAL_MIX && c === 0 ? NONE : h, alpha];\n};\n\n/**\n * resolve color-mix()\n * @param value - color-mix color value\n * @param [opt] - options\n * @returns resolved color - [cs, v1, v2, v3, alpha], '(empty)'\n */\nexport const resolveColorMix = (\n  value: string,\n  opt: Options = {}\n): SpecifiedColorChannels | string | NullObject => {\n  if (isString(value)) {\n    value = value.toLowerCase().trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { format = '', nullable = false } = opt;\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'resolveColorMix',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    if (cachedResult.isNull) {\n      return cachedResult as NullObject;\n    }\n    const cachedItem = cachedResult.item;\n    if (isString(cachedItem)) {\n      return cachedItem as string;\n    }\n    return cachedItem as SpecifiedColorChannels;\n  }\n  const nestedItems = [];\n  let colorSpace = '';\n  let hueArc = '';\n  let colorA = '';\n  let pctA = '';\n  let colorB = '';\n  let pctB = '';\n  let parsed = false;\n  if (!REG_MIX.test(value)) {\n    // nested color-mix()\n    if (value.startsWith(FN_MIX) && REG_MIX_NEST.test(value)) {\n      const regColorSpace = new RegExp(`^(?:${CS_RGB}|${CS_XYZ})$`);\n      const items = value.match(REG_MIX_NEST) as RegExpMatchArray;\n      for (const item of items) {\n        if (item) {\n          let val = resolveColorMix(item, {\n            format: format === VAL_SPEC ? format : VAL_COMP\n          }) as ComputedColorChannels | string;\n          // computed value\n          if (Array.isArray(val)) {\n            const [cs, v1, v2, v3, v4] = val as ComputedColorChannels;\n            if (v1 === 0 && v2 === 0 && v3 === 0 && v4 === 0) {\n              value = '';\n              break;\n            }\n            if (regColorSpace.test(cs)) {\n              if (v4 === 1) {\n                val = `color(${cs} ${v1} ${v2} ${v3})`;\n              } else {\n                val = `color(${cs} ${v1} ${v2} ${v3} / ${v4})`;\n              }\n            } else if (v4 === 1) {\n              val = `${cs}(${v1} ${v2} ${v3})`;\n            } else {\n              val = `${cs}(${v1} ${v2} ${v3} / ${v4})`;\n            }\n          } else if (!REG_MIX.test(val)) {\n            value = '';\n            break;\n          }\n          nestedItems.push(val);\n          value = value.replace(item, val);\n        }\n      }\n      if (!value) {\n        const res = cacheInvalidColorValue(cacheKey, format, nullable);\n        return res;\n      }\n      // contains light-dark()\n    } else if (\n      value.startsWith(FN_MIX) &&\n      value.endsWith(')') &&\n      value.includes(FN_LIGHT_DARK)\n    ) {\n      const regColorSpace = new RegExp(`in\\\\s+(${CS_MIX})`);\n      const colorParts = value.replace(FN_MIX, '').replace(/\\)$/, '');\n      const [csPart = '', partA = '', partB = ''] = splitValue(colorParts, {\n        delimiter: ','\n      });\n      const [colorPartA = '', pctPartA = ''] = splitValue(partA);\n      const [colorPartB = '', pctPartB = ''] = splitValue(partB);\n      const specifiedColorA = resolveColor(colorPartA, {\n        format: VAL_SPEC\n      }) as string;\n      const specifiedColorB = resolveColor(colorPartB, {\n        format: VAL_SPEC\n      }) as string;\n      if (regColorSpace.test(csPart) && specifiedColorA && specifiedColorB) {\n        if (format === VAL_SPEC) {\n          const [, cs] = csPart.match(regColorSpace) as MatchedRegExp;\n          if (REG_CS_HUE.test(cs)) {\n            [, colorSpace, hueArc] = cs.match(REG_CS_HUE) as MatchedRegExp;\n          } else {\n            colorSpace = cs;\n          }\n          colorA = specifiedColorA;\n          if (pctPartA) {\n            pctA = pctPartA;\n          }\n          colorB = specifiedColorB;\n          if (pctPartB) {\n            pctB = pctPartB;\n          }\n          value = value\n            .replace(colorPartA, specifiedColorA)\n            .replace(colorPartB, specifiedColorB);\n          parsed = true;\n        } else {\n          const resolvedColorA = resolveColor(colorPartA, opt);\n          const resolvedColorB = resolveColor(colorPartB, opt);\n          if (isString(resolvedColorA) && isString(resolvedColorB)) {\n            value = value\n              .replace(colorPartA, resolvedColorA)\n              .replace(colorPartB, resolvedColorB);\n          }\n        }\n      } else {\n        const res = cacheInvalidColorValue(cacheKey, format, nullable);\n        return res;\n      }\n    } else {\n      const res = cacheInvalidColorValue(cacheKey, format, nullable);\n      return res;\n    }\n  }\n  if (nestedItems.length && format === VAL_SPEC) {\n    const regColorSpace = new RegExp(`^color-mix\\\\(\\\\s*in\\\\s+(${CS_MIX})\\\\s*,`);\n    const [, cs] = value.match(regColorSpace) as MatchedRegExp;\n    if (REG_CS_HUE.test(cs)) {\n      [, colorSpace, hueArc] = cs.match(REG_CS_HUE) as MatchedRegExp;\n    } else {\n      colorSpace = cs;\n    }\n    if (nestedItems.length === 2) {\n      let [itemA, itemB] = nestedItems as [string, string];\n      itemA = itemA.replace(/(?=[()])/g, '\\\\');\n      itemB = itemB.replace(/(?=[()])/g, '\\\\');\n      const regA = new RegExp(`(${itemA})(?:\\\\s+(${PCT}))?`);\n      const regB = new RegExp(`(${itemB})(?:\\\\s+(${PCT}))?`);\n      [, colorA, pctA] = value.match(regA) as MatchedRegExp;\n      [, colorB, pctB] = value.match(regB) as MatchedRegExp;\n    } else {\n      let [item] = nestedItems as [string];\n      item = item.replace(/(?=[()])/g, '\\\\');\n      const itemPart = `${item}(?:\\\\s+${PCT})?`;\n      const itemPartCapt = `(${item})(?:\\\\s+(${PCT}))?`;\n      const regItemPart = new RegExp(`^${itemPartCapt}$`);\n      const regLastItem = new RegExp(`${itemPartCapt}\\\\s*\\\\)$`);\n      const regColorPart = new RegExp(`^(${SYN_COLOR_TYPE})(?:\\\\s+(${PCT}))?$`);\n      // item is at the end\n      if (regLastItem.test(value)) {\n        const reg = new RegExp(\n          `(${SYN_MIX_PART})\\\\s*,\\\\s*(${itemPart})\\\\s*\\\\)$`\n        );\n        const [, colorPartA, colorPartB] = value.match(reg) as MatchedRegExp;\n        [, colorA, pctA] = colorPartA.match(regColorPart) as MatchedRegExp;\n        [, colorB, pctB] = colorPartB.match(regItemPart) as MatchedRegExp;\n      } else {\n        const reg = new RegExp(\n          `(${itemPart})\\\\s*,\\\\s*(${SYN_MIX_PART})\\\\s*\\\\)$`\n        );\n        const [, colorPartA, colorPartB] = value.match(reg) as MatchedRegExp;\n        [, colorA, pctA] = colorPartA.match(regItemPart) as MatchedRegExp;\n        [, colorB, pctB] = colorPartB.match(regColorPart) as MatchedRegExp;\n      }\n    }\n  } else if (!parsed) {\n    const [, cs, colorPartA, colorPartB] = value.match(\n      REG_MIX_CAPT\n    ) as MatchedRegExp;\n    const reg = new RegExp(`^(${SYN_COLOR_TYPE})(?:\\\\s+(${PCT}))?$`);\n    [, colorA, pctA] = colorPartA.match(reg) as MatchedRegExp;\n    [, colorB, pctB] = colorPartB.match(reg) as MatchedRegExp;\n    if (REG_CS_HUE.test(cs)) {\n      [, colorSpace, hueArc] = cs.match(REG_CS_HUE) as MatchedRegExp;\n    } else {\n      colorSpace = cs;\n    }\n  }\n  // normalize percentages and set multipler\n  let pA, pB, m;\n  if (pctA && pctB) {\n    const p1 = parseFloat(pctA) / MAX_PCT;\n    const p2 = parseFloat(pctB) / MAX_PCT;\n    if (p1 < 0 || p1 > 1 || p2 < 0 || p2 > 1 || (p1 === 0 && p2 === 0)) {\n      const res = cacheInvalidColorValue(cacheKey, format, nullable);\n      return res;\n    }\n    const factor = p1 + p2;\n    pA = p1 / factor;\n    pB = p2 / factor;\n    m = factor < 1 ? factor : 1;\n  } else {\n    if (pctA) {\n      pA = parseFloat(pctA) / MAX_PCT;\n      if (pA < 0 || pA > 1) {\n        const res = cacheInvalidColorValue(cacheKey, format, nullable);\n        return res;\n      }\n      pB = 1 - pA;\n    } else if (pctB) {\n      pB = parseFloat(pctB) / MAX_PCT;\n      if (pB < 0 || pB > 1) {\n        const res = cacheInvalidColorValue(cacheKey, format, nullable);\n        return res;\n      }\n      pA = 1 - pB;\n    } else {\n      pA = HALF;\n      pB = HALF;\n    }\n    m = 1;\n  }\n  if (colorSpace === 'xyz') {\n    colorSpace = 'xyz-d65';\n  }\n  // specified value\n  if (format === VAL_SPEC) {\n    let valueA = '';\n    let valueB = '';\n    if (colorA.startsWith(FN_MIX) || colorA.startsWith(FN_LIGHT_DARK)) {\n      valueA = colorA;\n    } else if (colorA.startsWith(FN_COLOR)) {\n      const [cs, v1, v2, v3, v4] = parseColorFunc(\n        colorA,\n        opt\n      ) as SpecifiedColorChannels;\n      if (v4 === 1) {\n        valueA = `color(${cs} ${v1} ${v2} ${v3})`;\n      } else {\n        valueA = `color(${cs} ${v1} ${v2} ${v3} / ${v4})`;\n      }\n    } else {\n      const val = parseColorValue(colorA, opt);\n      if (Array.isArray(val)) {\n        const [cs, v1, v2, v3, v4] = val;\n        if (v4 === 1) {\n          if (cs === 'rgb') {\n            valueA = `${cs}(${v1}, ${v2}, ${v3})`;\n          } else {\n            valueA = `${cs}(${v1} ${v2} ${v3})`;\n          }\n        } else if (cs === 'rgb') {\n          valueA = `${cs}a(${v1}, ${v2}, ${v3}, ${v4})`;\n        } else {\n          valueA = `${cs}(${v1} ${v2} ${v3} / ${v4})`;\n        }\n      } else {\n        if (!isString(val) || !val) {\n          setCache(cacheKey, '');\n          return '';\n        }\n        valueA = val;\n      }\n    }\n    if (colorB.startsWith(FN_MIX) || colorB.startsWith(FN_LIGHT_DARK)) {\n      valueB = colorB;\n    } else if (colorB.startsWith(FN_COLOR)) {\n      const [cs, v1, v2, v3, v4] = parseColorFunc(\n        colorB,\n        opt\n      ) as SpecifiedColorChannels;\n      if (v4 === 1) {\n        valueB = `color(${cs} ${v1} ${v2} ${v3})`;\n      } else {\n        valueB = `color(${cs} ${v1} ${v2} ${v3} / ${v4})`;\n      }\n    } else {\n      const val = parseColorValue(colorB, opt);\n      if (Array.isArray(val)) {\n        const [cs, v1, v2, v3, v4] = val;\n        if (v4 === 1) {\n          if (cs === 'rgb') {\n            valueB = `${cs}(${v1}, ${v2}, ${v3})`;\n          } else {\n            valueB = `${cs}(${v1} ${v2} ${v3})`;\n          }\n        } else if (cs === 'rgb') {\n          valueB = `${cs}a(${v1}, ${v2}, ${v3}, ${v4})`;\n        } else {\n          valueB = `${cs}(${v1} ${v2} ${v3} / ${v4})`;\n        }\n      } else {\n        if (!isString(val) || !val) {\n          setCache(cacheKey, '');\n          return '';\n        }\n        valueB = val;\n      }\n    }\n    if (pctA && pctB) {\n      valueA += ` ${parseFloat(pctA)}%`;\n      valueB += ` ${parseFloat(pctB)}%`;\n    } else if (pctA) {\n      const pA = parseFloat(pctA);\n      if (pA !== MAX_PCT * HALF) {\n        valueA += ` ${pA}%`;\n      }\n    } else if (pctB) {\n      const pA = MAX_PCT - parseFloat(pctB);\n      if (pA !== MAX_PCT * HALF) {\n        valueA += ` ${pA}%`;\n      }\n    }\n    if (hueArc) {\n      const res = `color-mix(in ${colorSpace} ${hueArc} hue, ${valueA}, ${valueB})`;\n      setCache(cacheKey, res);\n      return res;\n    } else {\n      const res = `color-mix(in ${colorSpace}, ${valueA}, ${valueB})`;\n      setCache(cacheKey, res);\n      return res;\n    }\n  }\n  let r = 0;\n  let g = 0;\n  let b = 0;\n  let alpha = 0;\n  // in srgb, srgb-linear\n  if (/^srgb(?:-linear)?$/.test(colorSpace)) {\n    let rgbA, rgbB;\n    if (colorSpace === 'srgb') {\n      if (REG_CURRENT.test(colorA)) {\n        rgbA = [NONE, NONE, NONE, NONE];\n      } else {\n        rgbA = convertColorToRgb(colorA, {\n          colorSpace,\n          format: VAL_MIX\n        });\n      }\n      if (REG_CURRENT.test(colorB)) {\n        rgbB = [NONE, NONE, NONE, NONE];\n      } else {\n        rgbB = convertColorToRgb(colorB, {\n          colorSpace,\n          format: VAL_MIX\n        });\n      }\n    } else {\n      if (REG_CURRENT.test(colorA)) {\n        rgbA = [NONE, NONE, NONE, NONE];\n      } else {\n        rgbA = convertColorToLinearRgb(colorA, {\n          colorSpace,\n          format: VAL_MIX\n        });\n      }\n      if (REG_CURRENT.test(colorB)) {\n        rgbB = [NONE, NONE, NONE, NONE];\n      } else {\n        rgbB = convertColorToLinearRgb(colorB, {\n          colorSpace,\n          format: VAL_MIX\n        });\n      }\n    }\n    if (rgbA instanceof NullObject || rgbB instanceof NullObject) {\n      const res = cacheInvalidColorValue(cacheKey, format, nullable);\n      return res;\n    }\n    const [rrA, ggA, bbA, aaA] = rgbA as NumStrColorChannels;\n    const [rrB, ggB, bbB, aaB] = rgbB as NumStrColorChannels;\n    const rNone = rrA === NONE && rrB === NONE;\n    const gNone = ggA === NONE && ggB === NONE;\n    const bNone = bbA === NONE && bbB === NONE;\n    const alphaNone = aaA === NONE && aaB === NONE;\n    const [[rA, gA, bA, alphaA], [rB, gB, bB, alphaB]] =\n      normalizeColorComponents(\n        [rrA, ggA, bbA, aaA],\n        [rrB, ggB, bbB, aaB],\n        true\n      );\n    const factorA = alphaA * pA;\n    const factorB = alphaB * pB;\n    alpha = factorA + factorB;\n    if (alpha === 0) {\n      r = rA * pA + rB * pB;\n      g = gA * pA + gB * pB;\n      b = bA * pA + bB * pB;\n    } else {\n      r = (rA * factorA + rB * factorB) / alpha;\n      g = (gA * factorA + gB * factorB) / alpha;\n      b = (bA * factorA + bB * factorB) / alpha;\n      alpha = parseFloat(alpha.toFixed(3));\n    }\n    if (format === VAL_COMP) {\n      const res: SpecifiedColorChannels = [\n        colorSpace,\n        rNone ? NONE : roundToPrecision(r, HEX),\n        gNone ? NONE : roundToPrecision(g, HEX),\n        bNone ? NONE : roundToPrecision(b, HEX),\n        alphaNone ? NONE : alpha * m\n      ];\n      setCache(cacheKey, res);\n      return res;\n    }\n    r *= MAX_RGB;\n    g *= MAX_RGB;\n    b *= MAX_RGB;\n    // in xyz, xyz-d65, xyz-d50\n  } else if (REG_CS_XYZ.test(colorSpace)) {\n    let xyzA, xyzB;\n    if (REG_CURRENT.test(colorA)) {\n      xyzA = [NONE, NONE, NONE, NONE];\n    } else {\n      xyzA = convertColorToXyz(colorA, {\n        colorSpace,\n        d50: colorSpace === 'xyz-d50',\n        format: VAL_MIX\n      });\n    }\n    if (REG_CURRENT.test(colorB)) {\n      xyzB = [NONE, NONE, NONE, NONE];\n    } else {\n      xyzB = convertColorToXyz(colorB, {\n        colorSpace,\n        d50: colorSpace === 'xyz-d50',\n        format: VAL_MIX\n      });\n    }\n    if (xyzA instanceof NullObject || xyzB instanceof NullObject) {\n      const res = cacheInvalidColorValue(cacheKey, format, nullable);\n      return res;\n    }\n    const [xxA, yyA, zzA, aaA] = xyzA;\n    const [xxB, yyB, zzB, aaB] = xyzB;\n    const xNone = xxA === NONE && xxB === NONE;\n    const yNone = yyA === NONE && yyB === NONE;\n    const zNone = zzA === NONE && zzB === NONE;\n    const alphaNone = aaA === NONE && aaB === NONE;\n    const [[xA, yA, zA, alphaA], [xB, yB, zB, alphaB]] =\n      normalizeColorComponents(\n        [xxA, yyA, zzA, aaA],\n        [xxB, yyB, zzB, aaB],\n        true\n      );\n    const factorA = alphaA * pA;\n    const factorB = alphaB * pB;\n    alpha = factorA + factorB;\n    let x, y, z;\n    if (alpha === 0) {\n      x = xA * pA + xB * pB;\n      y = yA * pA + yB * pB;\n      z = zA * pA + zB * pB;\n    } else {\n      x = (xA * factorA + xB * factorB) / alpha;\n      y = (yA * factorA + yB * factorB) / alpha;\n      z = (zA * factorA + zB * factorB) / alpha;\n      alpha = parseFloat(alpha.toFixed(3));\n    }\n    if (format === VAL_COMP) {\n      const res: SpecifiedColorChannels = [\n        colorSpace,\n        xNone ? NONE : roundToPrecision(x, HEX),\n        yNone ? NONE : roundToPrecision(y, HEX),\n        zNone ? NONE : roundToPrecision(z, HEX),\n        alphaNone ? NONE : alpha * m\n      ];\n      setCache(cacheKey, res);\n      return res;\n    }\n    if (colorSpace === 'xyz-d50') {\n      [r, g, b] = transformXyzD50ToRgb([x, y, z], true);\n    } else {\n      [r, g, b] = transformXyzToRgb([x, y, z], true);\n    }\n    // in hsl, hwb\n  } else if (/^h(?:sl|wb)$/.test(colorSpace)) {\n    let hslA, hslB;\n    if (colorSpace === 'hsl') {\n      if (REG_CURRENT.test(colorA)) {\n        hslA = [NONE, NONE, NONE, NONE];\n      } else {\n        hslA = convertColorToHsl(colorA, {\n          colorSpace,\n          format: VAL_MIX\n        });\n      }\n      if (REG_CURRENT.test(colorB)) {\n        hslB = [NONE, NONE, NONE, NONE];\n      } else {\n        hslB = convertColorToHsl(colorB, {\n          colorSpace,\n          format: VAL_MIX\n        });\n      }\n    } else {\n      if (REG_CURRENT.test(colorA)) {\n        hslA = [NONE, NONE, NONE, NONE];\n      } else {\n        hslA = convertColorToHwb(colorA, {\n          colorSpace,\n          format: VAL_MIX\n        });\n      }\n      if (REG_CURRENT.test(colorB)) {\n        hslB = [NONE, NONE, NONE, NONE];\n      } else {\n        hslB = convertColorToHwb(colorB, {\n          colorSpace,\n          format: VAL_MIX\n        });\n      }\n    }\n    if (hslA instanceof NullObject || hslB instanceof NullObject) {\n      const res = cacheInvalidColorValue(cacheKey, format, nullable);\n      return res;\n    }\n    const [hhA, ssA, llA, aaA] = hslA;\n    const [hhB, ssB, llB, aaB] = hslB;\n    const alphaNone = aaA === NONE && aaB === NONE;\n    let [[hA, sA, lA, alphaA], [hB, sB, lB, alphaB]] = normalizeColorComponents(\n      [hhA, ssA, llA, aaA],\n      [hhB, ssB, llB, aaB],\n      true\n    );\n    if (hueArc) {\n      [hA, hB] = interpolateHue(hA, hB, hueArc);\n    }\n    const factorA = alphaA * pA;\n    const factorB = alphaB * pB;\n    alpha = factorA + factorB;\n    const h = (hA * pA + hB * pB) % DEG;\n    let s, l;\n    if (alpha === 0) {\n      s = sA * pA + sB * pB;\n      l = lA * pA + lB * pB;\n    } else {\n      s = (sA * factorA + sB * factorB) / alpha;\n      l = (lA * factorA + lB * factorB) / alpha;\n      alpha = parseFloat(alpha.toFixed(3));\n    }\n    [r, g, b] = convertColorToRgb(\n      `${colorSpace}(${h} ${s} ${l})`\n    ) as ColorChannels;\n    if (format === VAL_COMP) {\n      const res: SpecifiedColorChannels = [\n        'srgb',\n        roundToPrecision(r / MAX_RGB, HEX),\n        roundToPrecision(g / MAX_RGB, HEX),\n        roundToPrecision(b / MAX_RGB, HEX),\n        alphaNone ? NONE : alpha * m\n      ];\n      setCache(cacheKey, res);\n      return res;\n    }\n    // in lch, oklch\n  } else if (/^(?:ok)?lch$/.test(colorSpace)) {\n    let lchA, lchB;\n    if (colorSpace === 'lch') {\n      if (REG_CURRENT.test(colorA)) {\n        lchA = [NONE, NONE, NONE, NONE];\n      } else {\n        lchA = convertColorToLch(colorA, {\n          colorSpace,\n          format: VAL_MIX\n        });\n      }\n      if (REG_CURRENT.test(colorB)) {\n        lchB = [NONE, NONE, NONE, NONE];\n      } else {\n        lchB = convertColorToLch(colorB, {\n          colorSpace,\n          format: VAL_MIX\n        });\n      }\n    } else {\n      if (REG_CURRENT.test(colorA)) {\n        lchA = [NONE, NONE, NONE, NONE];\n      } else {\n        lchA = convertColorToOklch(colorA, {\n          colorSpace,\n          format: VAL_MIX\n        });\n      }\n      if (REG_CURRENT.test(colorB)) {\n        lchB = [NONE, NONE, NONE, NONE];\n      } else {\n        lchB = convertColorToOklch(colorB, {\n          colorSpace,\n          format: VAL_MIX\n        });\n      }\n    }\n    if (lchA instanceof NullObject || lchB instanceof NullObject) {\n      const res = cacheInvalidColorValue(cacheKey, format, nullable);\n      return res;\n    }\n    const [llA, ccA, hhA, aaA] = lchA;\n    const [llB, ccB, hhB, aaB] = lchB;\n    const lNone = llA === NONE && llB === NONE;\n    const cNone = ccA === NONE && ccB === NONE;\n    const hNone = hhA === NONE && hhB === NONE;\n    const alphaNone = aaA === NONE && aaB === NONE;\n    let [[lA, cA, hA, alphaA], [lB, cB, hB, alphaB]] = normalizeColorComponents(\n      [llA, ccA, hhA, aaA],\n      [llB, ccB, hhB, aaB],\n      true\n    );\n    if (hueArc) {\n      [hA, hB] = interpolateHue(hA, hB, hueArc);\n    }\n    const factorA = alphaA * pA;\n    const factorB = alphaB * pB;\n    alpha = factorA + factorB;\n    const h = (hA * pA + hB * pB) % DEG;\n    let l, c;\n    if (alpha === 0) {\n      l = lA * pA + lB * pB;\n      c = cA * pA + cB * pB;\n    } else {\n      l = (lA * factorA + lB * factorB) / alpha;\n      c = (cA * factorA + cB * factorB) / alpha;\n      alpha = parseFloat(alpha.toFixed(3));\n    }\n    if (format === VAL_COMP) {\n      const res: SpecifiedColorChannels = [\n        colorSpace,\n        lNone ? NONE : roundToPrecision(l, HEX),\n        cNone ? NONE : roundToPrecision(c, HEX),\n        hNone ? NONE : roundToPrecision(h, HEX),\n        alphaNone ? NONE : alpha * m\n      ];\n      setCache(cacheKey, res);\n      return res;\n    }\n    [, r, g, b] = resolveColorValue(\n      `${colorSpace}(${l} ${c} ${h})`\n    ) as ComputedColorChannels;\n    // in lab, oklab\n  } else {\n    let labA, labB;\n    if (colorSpace === 'lab') {\n      if (REG_CURRENT.test(colorA)) {\n        labA = [NONE, NONE, NONE, NONE];\n      } else {\n        labA = convertColorToLab(colorA, {\n          colorSpace,\n          format: VAL_MIX\n        });\n      }\n      if (REG_CURRENT.test(colorB)) {\n        labB = [NONE, NONE, NONE, NONE];\n      } else {\n        labB = convertColorToLab(colorB, {\n          colorSpace,\n          format: VAL_MIX\n        });\n      }\n    } else {\n      if (REG_CURRENT.test(colorA)) {\n        labA = [NONE, NONE, NONE, NONE];\n      } else {\n        labA = convertColorToOklab(colorA, {\n          colorSpace,\n          format: VAL_MIX\n        });\n      }\n      if (REG_CURRENT.test(colorB)) {\n        labB = [NONE, NONE, NONE, NONE];\n      } else {\n        labB = convertColorToOklab(colorB, {\n          colorSpace,\n          format: VAL_MIX\n        });\n      }\n    }\n    if (labA instanceof NullObject || labB instanceof NullObject) {\n      const res = cacheInvalidColorValue(cacheKey, format, nullable);\n      return res;\n    }\n    const [llA, aaA, bbA, alA] = labA;\n    const [llB, aaB, bbB, alB] = labB;\n    const lNone = llA === NONE && llB === NONE;\n    const aNone = aaA === NONE && aaB === NONE;\n    const bNone = bbA === NONE && bbB === NONE;\n    const alphaNone = alA === NONE && alB === NONE;\n    const [[lA, aA, bA, alphaA], [lB, aB, bB, alphaB]] =\n      normalizeColorComponents(\n        [llA, aaA, bbA, alA],\n        [llB, aaB, bbB, alB],\n        true\n      );\n    const factorA = alphaA * pA;\n    const factorB = alphaB * pB;\n    alpha = factorA + factorB;\n    let l, aO, bO;\n    if (alpha === 0) {\n      l = lA * pA + lB * pB;\n      aO = aA * pA + aB * pB;\n      bO = bA * pA + bB * pB;\n    } else {\n      l = (lA * factorA + lB * factorB) / alpha;\n      aO = (aA * factorA + aB * factorB) / alpha;\n      bO = (bA * factorA + bB * factorB) / alpha;\n      alpha = parseFloat(alpha.toFixed(3));\n    }\n    if (format === VAL_COMP) {\n      const res: SpecifiedColorChannels = [\n        colorSpace,\n        lNone ? NONE : roundToPrecision(l, HEX),\n        aNone ? NONE : roundToPrecision(aO, HEX),\n        bNone ? NONE : roundToPrecision(bO, HEX),\n        alphaNone ? NONE : alpha * m\n      ];\n      setCache(cacheKey, res);\n      return res;\n    }\n    [, r, g, b] = resolveColorValue(\n      `${colorSpace}(${l} ${aO} ${bO})`\n    ) as ComputedColorChannels;\n  }\n  const res: SpecifiedColorChannels = [\n    'rgb',\n    Math.round(r),\n    Math.round(g),\n    Math.round(b),\n    parseFloat((alpha * m).toFixed(3))\n  ];\n  setCache(cacheKey, res);\n  return res;\n};\n","/**\n * css-var\n */\n\nimport { CSSToken, TokenType, tokenize } from '@csstools/css-tokenizer';\nimport {\n  CacheItem,\n  NullObject,\n  createCacheKey,\n  getCache,\n  setCache\n} from './cache';\nimport { isString } from './common';\nimport { cssCalc } from './css-calc';\nimport { isColor } from './util';\nimport { Options } from './typedef';\n\n/* constants */\nimport { FN_VAR, SYN_FN_CALC, SYN_FN_VAR, VAL_SPEC } from './constant';\nconst {\n  CloseParen: PAREN_CLOSE,\n  Comment: COMMENT,\n  EOF,\n  Ident: IDENT,\n  Whitespace: W_SPACE\n} = TokenType;\nconst NAMESPACE = 'css-var';\n\n/* regexp */\nconst REG_FN_CALC = new RegExp(SYN_FN_CALC);\nconst REG_FN_VAR = new RegExp(SYN_FN_VAR);\n\n/**\n * resolve custom property\n * @param tokens - CSS tokens\n * @param [opt] - options\n * @returns result - [tokens, resolvedValue]\n */\nexport function resolveCustomProperty(\n  tokens: CSSToken[],\n  opt: Options = {}\n): [CSSToken[], string] {\n  if (!Array.isArray(tokens)) {\n    throw new TypeError(`${tokens} is not an array.`);\n  }\n  const { customProperty = {} } = opt;\n  const items: string[] = [];\n  while (tokens.length) {\n    const token = tokens.shift();\n    if (!Array.isArray(token)) {\n      throw new TypeError(`${token} is not an array.`);\n    }\n    const [type, value] = token as [TokenType, string];\n    // end of var()\n    if (type === PAREN_CLOSE) {\n      break;\n    }\n    // nested var()\n    if (value === FN_VAR) {\n      const [restTokens, item] = resolveCustomProperty(tokens, opt);\n      tokens = restTokens;\n      if (item) {\n        items.push(item);\n      }\n    } else if (type === IDENT) {\n      if (value.startsWith('--')) {\n        let item;\n        if (Object.hasOwn(customProperty, value)) {\n          item = customProperty[value] as string;\n        } else if (typeof customProperty.callback === 'function') {\n          item = customProperty.callback(value);\n        }\n        if (item) {\n          items.push(item);\n        }\n      } else if (value) {\n        items.push(value);\n      }\n    }\n  }\n  let resolveAsColor = false;\n  if (items.length > 1) {\n    const lastValue = items[items.length - 1];\n    resolveAsColor = isColor(lastValue);\n  }\n  let resolvedValue = '';\n  for (let item of items) {\n    item = item.trim();\n    if (REG_FN_VAR.test(item)) {\n      // recurse resolveVar()\n      const resolvedItem = resolveVar(item, opt);\n      if (isString(resolvedItem)) {\n        if (resolveAsColor) {\n          if (isColor(resolvedItem)) {\n            resolvedValue = resolvedItem;\n          }\n        } else {\n          resolvedValue = resolvedItem;\n        }\n      }\n    } else if (REG_FN_CALC.test(item)) {\n      item = cssCalc(item, opt);\n      if (resolveAsColor) {\n        if (isColor(item)) {\n          resolvedValue = item;\n        }\n      } else {\n        resolvedValue = item;\n      }\n    } else if (\n      item &&\n      !/^(?:inherit|initial|revert(?:-layer)?|unset)$/.test(item)\n    ) {\n      if (resolveAsColor) {\n        if (isColor(item)) {\n          resolvedValue = item;\n        }\n      } else {\n        resolvedValue = item;\n      }\n    }\n    if (resolvedValue) {\n      break;\n    }\n  }\n  return [tokens, resolvedValue];\n}\n\n/**\n * parse tokens\n * @param tokens - CSS tokens\n * @param [opt] - options\n * @returns parsed tokens\n */\nexport function parseTokens(\n  tokens: CSSToken[],\n  opt: Options = {}\n): string[] | NullObject {\n  const res: string[] = [];\n  while (tokens.length) {\n    const token = tokens.shift();\n    const [type = '', value = ''] = token as [TokenType, string];\n    if (value === FN_VAR) {\n      const [restTokens, resolvedValue] = resolveCustomProperty(tokens, opt);\n      if (!resolvedValue) {\n        return new NullObject();\n      }\n      tokens = restTokens;\n      res.push(resolvedValue);\n    } else {\n      switch (type) {\n        case PAREN_CLOSE: {\n          if (res.length) {\n            const lastValue = res[res.length - 1];\n            if (lastValue === ' ') {\n              res.splice(-1, 1, value);\n            } else {\n              res.push(value);\n            }\n          } else {\n            res.push(value);\n          }\n          break;\n        }\n        case W_SPACE: {\n          if (res.length) {\n            const lastValue = res[res.length - 1];\n            if (\n              isString(lastValue) &&\n              !lastValue.endsWith('(') &&\n              lastValue !== ' '\n            ) {\n              res.push(value);\n            }\n          }\n          break;\n        }\n        default: {\n          if (type !== COMMENT && type !== EOF) {\n            res.push(value);\n          }\n        }\n      }\n    }\n  }\n  return res;\n}\n\n/**\n * resolve CSS var()\n * @param value - CSS value including var()\n * @param [opt] - options\n * @returns resolved value\n */\nexport function resolveVar(\n  value: string,\n  opt: Options = {}\n): string | NullObject {\n  const { format = '' } = opt;\n  if (isString(value)) {\n    if (!REG_FN_VAR.test(value) || format === VAL_SPEC) {\n      return value;\n    }\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'resolveVar',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    if (cachedResult.isNull) {\n      return cachedResult as NullObject;\n    }\n    return cachedResult.item as string;\n  }\n  const tokens = tokenize({ css: value });\n  const values = parseTokens(tokens, opt);\n  if (Array.isArray(values)) {\n    let color = values.join('');\n    if (REG_FN_CALC.test(color)) {\n      color = cssCalc(color, opt);\n    }\n    setCache(cacheKey, color);\n    return color;\n  } else {\n    setCache(cacheKey, null);\n    return new NullObject();\n  }\n}\n\n/**\n * CSS var()\n * @param value - CSS value including var()\n * @param [opt] - options\n * @returns resolved value\n */\nexport const cssVar = (value: string, opt: Options = {}): string => {\n  const resolvedValue = resolveVar(value, opt);\n  if (isString(resolvedValue)) {\n    return resolvedValue;\n  }\n  return '';\n};\n","function multiplyMatrices(t,n){return[t[0]*n[0]+t[1]*n[1]+t[2]*n[2],t[3]*n[0]+t[4]*n[1]+t[5]*n[2],t[6]*n[0]+t[7]*n[1]+t[8]*n[2]]}const t=[.955473421488075,-.02309845494876471,.06325924320057072,-.0283697093338637,1.0099953980813041,.021041441191917323,.012314014864481998,-.020507649298898964,1.330365926242124];\n/**\n * Bradford chromatic adaptation from D50 to D65\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n */function D50_to_D65(n){return multiplyMatrices(t,n)}const n=[1.0479297925449969,.022946870601609652,-.05019226628920524,.02962780877005599,.9904344267538799,-.017073799063418826,-.009243040646204504,.015055191490298152,.7518742814281371];\n/**\n * Bradford chromatic adaptation from D65 to D50\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n * @see http://www.brucelindbloom.com/index.html?Eqn_ChromAdapt.html\n */function D65_to_D50(t){return multiplyMatrices(n,t)}\n/**\n * @param {number} hue - Hue as degrees 0..360\n * @param {number} sat - Saturation as percentage 0..100\n * @param {number} light - Lightness as percentage 0..100\n * @return {number[]} Array of sRGB components; in-gamut colors in range [0..1]\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/hslToRgb.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n * @see https://github.com/w3c/csswg-drafts/blob/main/css-color-4/hslToRgb.js\n */function HSL_to_sRGB(t){let n=t[0]%360;const _=t[1]/100,o=t[2]/100;return n<0&&(n+=360),[HSL_to_sRGB_channel(0,n,_,o),HSL_to_sRGB_channel(8,n,_,o),HSL_to_sRGB_channel(4,n,_,o)]}function HSL_to_sRGB_channel(t,n,_,o){const e=(t+n/30)%12;return o-_*Math.min(o,1-o)*Math.max(-1,Math.min(e-3,9-e,1))}\n/**\n * @param {number} hue -  Hue as degrees 0..360\n * @param {number} white -  Whiteness as percentage 0..100\n * @param {number} black -  Blackness as percentage 0..100\n * @return {number[]} Array of RGB components 0..1\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/hwbToRgb.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n * @see https://github.com/w3c/csswg-drafts/blob/main/css-color-4/hwbToRgb.js\n */function HWB_to_sRGB(t){const n=t[0],_=t[1]/100,o=t[2]/100;if(_+o>=1){const t=_/(_+o);return[t,t,t]}const e=HSL_to_sRGB([n,100,50]),a=1-_-o;return[e[0]*a+_,e[1]*a+_,e[2]*a+_]}\n/**\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n */function LCH_to_Lab(t){const n=t[2]*Math.PI/180;return[t[0],t[1]*Math.cos(n),t[1]*Math.sin(n)]}\n/**\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n */function Lab_to_LCH(t){const n=180*Math.atan2(t[2],t[1])/Math.PI;return[t[0],Math.sqrt(Math.pow(t[1],2)+Math.pow(t[2],2)),n>=0?n:n+360]}const _=[.3457/.3585,1,.2958/.3585];\n/**\n * Convert Lab to D50-adapted XYZ\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n * @see http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n */function Lab_to_XYZ(t){const n=24389/27,o=216/24389,e=(t[0]+16)/116,a=t[1]/500+e,r=e-t[2]/200;return[(Math.pow(a,3)>o?Math.pow(a,3):(116*a-16)/n)*_[0],(t[0]>8?Math.pow((t[0]+16)/116,3):t[0]/n)*_[1],(Math.pow(r,3)>o?Math.pow(r,3):(116*r-16)/n)*_[2]]}\n/**\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n * @see https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js\n */function OKLCH_to_OKLab(t){const n=t[2]*Math.PI/180;return[t[0],t[1]*Math.cos(n),t[1]*Math.sin(n)]}\n/**\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n * @see https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js\n */function OKLab_to_OKLCH(t){const n=180*Math.atan2(t[2],t[1])/Math.PI;return[t[0],Math.sqrt(t[1]**2+t[2]**2),n>=0?n:n+360]}const o=[1.2268798758459243,-.5578149944602171,.2813910456659647,-.0405757452148008,1.112286803280317,-.0717110580655164,-.0763729366746601,-.4214933324022432,1.5869240198367816],e=[1,.3963377773761749,.2158037573099136,1,-.1055613458156586,-.0638541728258133,1,-.0894841775298119,-1.2914855480194092];\n/**\n * Given OKLab, convert to XYZ relative to D65\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n * @see https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js\n */\nfunction OKLab_to_XYZ(t){const n=multiplyMatrices(e,t);return multiplyMatrices(o,[n[0]**3,n[1]**3,n[2]**3])}\n/**\n * Assuming XYZ is relative to D50, convert to CIE Lab\n * from CIE standard, which now defines these as a rational fraction\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n */function XYZ_to_Lab(t){const n=compute_f(t[0]/_[0]),o=compute_f(t[1]/_[1]);return[116*o-16,500*(n-o),200*(o-compute_f(t[2]/_[2]))]}const a=216/24389,r=24389/27;function compute_f(t){return t>a?Math.cbrt(t):(r*t+16)/116}const l=[.819022437996703,.3619062600528904,-.1288737815209879,.0329836539323885,.9292868615863434,.0361446663506424,.0481771893596242,.2642395317527308,.6335478284694309],i=[.210454268309314,.7936177747023054,-.0040720430116193,1.9779985324311684,-2.42859224204858,.450593709617411,.0259040424655478,.7827717124575296,-.8086757549230774];\n/**\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n *\n * XYZ <-> LMS matrices recalculated for consistent reference white\n * @see https://github.com/w3c/csswg-drafts/issues/6642#issuecomment-943521484\n */\nfunction XYZ_to_OKLab(t){const n=multiplyMatrices(l,t);return multiplyMatrices(i,[Math.cbrt(n[0]),Math.cbrt(n[1]),Math.cbrt(n[2])])}const c=[30757411/17917100,-6372589/17917100,-4539589/17917100,-.666684351832489,1.616481236634939,467509/29648200,792561/44930125,-1921689/44930125,.942103121235474];\n/**\n * Convert XYZ to linear-light rec2020\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n */const u=[446124/178915,-333277/357830,-72051/178915,-14852/17905,63121/35810,423/17905,11844/330415,-50337/660830,316169/330415];\n/**\n * Convert XYZ to linear-light P3\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n */function XYZ_to_lin_P3(t){return multiplyMatrices(u,t)}const s=[1.3457868816471583,-.25557208737979464,-.05110186497554526,-.5446307051249019,1.5082477428451468,.02052744743642139,0,0,1.2119675456389452];\n/**\n * Convert D50 XYZ to linear-light prophoto-rgb\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n * @see http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n */const h=[1829569/896150,-506331/896150,-308931/896150,-851781/878810,1648619/878810,36519/878810,16779/1248040,-147721/1248040,1266979/1248040];\n/**\n * Convert XYZ to linear-light a98-rgb\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n */const m=[12831/3959,-329/214,-1974/3959,-851781/878810,1648619/878810,36519/878810,705/12673,-2585/12673,705/667];\n/**\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n */function XYZ_to_lin_sRGB(t){return multiplyMatrices(m,t)}\n/**\n * Convert an array of linear-light rec2020 RGB  in the range 0.0-1.0\n * to gamma corrected form ITU-R BT.2020-2 p.4\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n */const D=1.09929682680944,b=.018053968510807;function gam_2020_channel(t){const n=t<0?-1:1,_=Math.abs(t);return _>b?n*(D*Math.pow(_,.45)-(D-1)):4.5*t}\n/**\n * Convert an array of linear-light sRGB values in the range 0.0-1.0 to gamma corrected form\n * Extended transfer function:\n *  For negative values, linear portion extends on reflection\n *  of axis, then uses reflected pow below that\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n * @see https://en.wikipedia.org/wiki/SRGB\n */function gam_sRGB(t){return[gam_sRGB_channel(t[0]),gam_sRGB_channel(t[1]),gam_sRGB_channel(t[2])]}function gam_sRGB_channel(t){const n=t<0?-1:1,_=Math.abs(t);return _>.0031308?n*(1.055*Math.pow(_,1/2.4)-.055):12.92*t}\n/**\n * Convert an array of linear-light display-p3 RGB in the range 0.0-1.0\n * to gamma corrected form\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n */function gam_P3(t){return gam_sRGB(t)}\n/**\n * Convert an array of linear-light prophoto-rgb in the range 0.0-1.0\n * to gamma corrected form.\n * Transfer curve is gamma 1.8 with a small linear portion.\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n */const g=1/512;function gam_ProPhoto_channel(t){const n=t<0?-1:1,_=Math.abs(t);return _>=g?n*Math.pow(_,1/1.8):16*t}\n/**\n * Convert an array of linear-light a98-rgb in the range 0.0-1.0\n * to gamma corrected form. Negative values are also now accepted\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n */function gam_a98rgb_channel(t){const n=t<0?-1:1,_=Math.abs(t);return n*Math.pow(_,256/563)}\n/**\n * Convert an array of rec2020 RGB values in the range 0.0 - 1.0\n * to linear light (un-companded) form.\n * ITU-R BT.2020-2 p.4\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n */const X=1.09929682680944,Y=.018053968510807;function lin_2020_channel(t){const n=t<0?-1:1,_=Math.abs(t);return _<4.5*Y?t/4.5:n*Math.pow((_+X-1)/X,1/.45)}const Z=[63426534/99577255,20160776/139408157,47086771/278816314,26158966/99577255,.677998071518871,8267143/139408157,0,19567812/697040785,1.0609850577107909];\n/**\n * Convert an array of linear-light rec2020 values to CIE XYZ\n * using  D65 (no chromatic adaptation)\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n * @see http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n */\n/**\n * Convert an array of of sRGB values where in-gamut values are in the range\n * [0 - 1] to linear light (un-companded) form.\n * Extended transfer function:\n *  For negative values, linear portion is extended on reflection of axis,\n *  then reflected power function is used.\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n * @see https://en.wikipedia.org/wiki/SRGB\n */\nfunction lin_sRGB(t){return[lin_sRGB_channel(t[0]),lin_sRGB_channel(t[1]),lin_sRGB_channel(t[2])]}function lin_sRGB_channel(t){const n=t<0?-1:1,_=Math.abs(t);return _<=.04045?t/12.92:n*Math.pow((_+.055)/1.055,2.4)}\n/**\n * Convert an array of display-p3 RGB values in the range 0.0 - 1.0\n * to linear light (un-companded) form.\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n */function lin_P3(t){return lin_sRGB(t)}const f=[608311/1250200,189793/714400,198249/1000160,35783/156275,247089/357200,198249/2500400,0,32229/714400,5220557/5000800];\n/**\n * Convert an array of linear-light display-p3 values to CIE XYZ\n * using D65 (no chromatic adaptation)\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n * @see http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n */function lin_P3_to_XYZ(t){return multiplyMatrices(f,t)}\n/**\n * Convert an array of prophoto-rgb values where in-gamut Colors are in the\n * range [0.0 - 1.0] to linear light (un-companded) form. Transfer curve is\n * gamma 1.8 with a small linear portion. Extended transfer function\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n */const M=16/512;function lin_ProPhoto_channel(t){const n=t<0?-1:1,_=Math.abs(t);return _<=M?t/16:n*Math.pow(_,1.8)}const p=[.7977666449006423,.13518129740053308,.0313477341283922,.2880748288194013,.711835234241873,8993693872564e-17,0,0,.8251046025104602];\n/**\n * Convert an array of linear-light prophoto-rgb values to CIE D50 XYZ.\n * Matrix cannot be expressed in rational form, but is calculated to 64 bit accuracy.\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n * @see see https://github.com/w3c/csswg-drafts/issues/7675\n */function lin_a98rgb_channel(t){const n=t<0?-1:1,_=Math.abs(t);return n*Math.pow(_,563/256)}const d=[573536/994567,263643/1420810,187206/994567,591459/1989134,6239551/9945670,374412/4972835,53769/1989134,351524/4972835,4929758/4972835];\n/**\n * Convert an array of linear-light a98-rgb values to CIE XYZ\n * http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n * has greater numerical precision than section 4.3.5.3 of\n * https://www.adobe.com/digitalimag/pdfs/AdobeRGB1998.pdf\n * but the values below were calculated from first principles\n * from the chromaticity coordinates of R G B W\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n * @see http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n * @see https://www.adobe.com/digitalimag/pdfs/AdobeRGB1998.pdf\n * @see https://github.com/w3c/csswg-drafts/blob/main/css-color-4/matrixmaker.html\n */const L=[506752/1228815,87881/245763,12673/70218,87098/409605,175762/245763,12673/175545,7918/409605,87881/737289,1001167/1053270];\n/**\n * Convert an array of linear-light sRGB values to CIE XYZ\n * using sRGB's own white, D65 (no chromatic adaptation)\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n */function lin_sRGB_to_XYZ(t){return multiplyMatrices(L,t)}\n/**\n * Convert an array of gamma-corrected sRGB values in the 0.0 to 1.0 range to HSL.\n *\n * @param {Color} RGB [r, g, b]\n * - Red component 0..1\n * - Green component 0..1\n * - Blue component 0..1\n * @return {number[]} Array of HSL values: Hue as degrees 0..360, Saturation and Lightness as percentages 0..100\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/utilities.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n *\n * @see https://github.com/w3c/csswg-drafts/blob/main/css-color-4/better-rgbToHsl.js\n */function sRGB_to_HSL(t){const n=t[0],_=t[1],o=t[2],e=Math.max(n,_,o),a=Math.min(n,_,o),r=(a+e)/2,l=e-a;let i=Number.NaN,c=0;if(0!==Math.round(1e5*l)){const t=Math.round(1e5*r);switch(c=0===t||1e5===t?0:(e-r)/Math.min(r,1-r),e){case n:i=(_-o)/l+(_<o?6:0);break;case _:i=(o-n)/l+2;break;case o:i=(n-_)/l+4}i*=60}return c<0&&(i+=180,c=Math.abs(c)),i>=360&&(i-=360),[i,100*c,100*r]}function sRGB_to_Hue(t){const n=t[0],_=t[1],o=t[2],e=Math.max(n,_,o),a=Math.min(n,_,o);let r=Number.NaN;const l=e-a;if(0!==l){switch(e){case n:r=(_-o)/l+(_<o?6:0);break;case _:r=(o-n)/l+2;break;case o:r=(n-_)/l+4}r*=60}return r>=360&&(r-=360),r}function sRGB_to_XYZ_D50(t){let n=t;return n=lin_sRGB(n),n=lin_sRGB_to_XYZ(n),n=D65_to_D50(n),n}function XYZ_D50_to_sRGB(t){let n=t;return n=D50_to_D65(n),n=XYZ_to_lin_sRGB(n),n=gam_sRGB(n),n}function HSL_to_XYZ_D50(t){let n=t;return n=HSL_to_sRGB(n),n=lin_sRGB(n),n=lin_sRGB_to_XYZ(n),n=D65_to_D50(n),n}function XYZ_D50_to_HSL(t){let n=t;return n=D50_to_D65(n),n=XYZ_to_lin_sRGB(n),n=gam_sRGB(n),n=sRGB_to_HSL(n),n}function HWB_to_XYZ_D50(t){let n=t;return n=HWB_to_sRGB(n),n=lin_sRGB(n),n=lin_sRGB_to_XYZ(n),n=D65_to_D50(n),n}function XYZ_D50_to_HWB(t){let n=t;n=D50_to_D65(n),n=XYZ_to_lin_sRGB(n);const _=gam_sRGB(n),o=Math.min(_[0],_[1],_[2]),e=1-Math.max(_[0],_[1],_[2]);return[sRGB_to_Hue(_),100*o,100*e]}function Lab_to_XYZ_D50(t){let n=t;return n=Lab_to_XYZ(n),n}function XYZ_D50_to_Lab(t){let n=t;return n=XYZ_to_Lab(n),n}function LCH_to_XYZ_D50(t){let n=t;return n=LCH_to_Lab(n),n=Lab_to_XYZ(n),n}function XYZ_D50_to_LCH(t){let n=t;return n=XYZ_to_Lab(n),n=Lab_to_LCH(n),n}function OKLab_to_XYZ_D50(t){let n=t;return n=OKLab_to_XYZ(n),n=D65_to_D50(n),n}function XYZ_D50_to_OKLab(t){let n=t;return n=D50_to_D65(n),n=XYZ_to_OKLab(n),n}function OKLCH_to_XYZ_D50(t){let n=t;return n=OKLCH_to_OKLab(n),n=OKLab_to_XYZ(n),n=D65_to_D50(n),n}function XYZ_D50_to_OKLCH(t){let n=t;return n=D50_to_D65(n),n=XYZ_to_OKLab(n),n=OKLab_to_OKLCH(n),n}function lin_sRGB_to_XYZ_D50(t){let n=t;return n=lin_sRGB_to_XYZ(n),n=D65_to_D50(n),n}function XYZ_D50_to_lin_sRGB(t){let n=t;return n=D50_to_D65(n),n=XYZ_to_lin_sRGB(n),n}function a98_RGB_to_XYZ_D50(t){let n=t;\n/**\n * Convert an array of a98-rgb values in the range 0.0 - 1.0\n * to linear light (un-companded) form. Negative values are also now accepted\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/conversions.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n */\nvar _;return n=[lin_a98rgb_channel((_=n)[0]),lin_a98rgb_channel(_[1]),lin_a98rgb_channel(_[2])],n=multiplyMatrices(d,n),n=D65_to_D50(n),n}function XYZ_D50_to_a98_RGB(t){let n=t;var _;return n=D50_to_D65(n),n=multiplyMatrices(h,n),n=[gam_a98rgb_channel((_=n)[0]),gam_a98rgb_channel(_[1]),gam_a98rgb_channel(_[2])],n}function P3_to_XYZ_D50(t){let n=t;return n=lin_P3(n),n=lin_P3_to_XYZ(n),n=D65_to_D50(n),n}function XYZ_D50_to_P3(t){let n=t;return n=D50_to_D65(n),n=XYZ_to_lin_P3(n),n=gam_P3(n),n}function lin_P3_to_XYZ_D50(t){let n=t;return n=lin_P3_to_XYZ(n),n=D65_to_D50(n),n}function XYZ_D50_to_lin_P3(t){let n=t;return n=D50_to_D65(n),n=XYZ_to_lin_P3(n),n}function rec_2020_to_XYZ_D50(t){let n=t;var _;return n=[lin_2020_channel((_=n)[0]),lin_2020_channel(_[1]),lin_2020_channel(_[2])],n=multiplyMatrices(Z,n),n=D65_to_D50(n),n}function XYZ_D50_to_rec_2020(t){let n=t;var _;return n=D50_to_D65(n),n=multiplyMatrices(c,n),n=[gam_2020_channel((_=n)[0]),gam_2020_channel(_[1]),gam_2020_channel(_[2])],n}function ProPhoto_RGB_to_XYZ_D50(t){let n=t;var _;return n=[lin_ProPhoto_channel((_=n)[0]),lin_ProPhoto_channel(_[1]),lin_ProPhoto_channel(_[2])],n=multiplyMatrices(p,n),n}function XYZ_D50_to_ProPhoto(t){let n=t;var _;return n=multiplyMatrices(s,n),n=[gam_ProPhoto_channel((_=n)[0]),gam_ProPhoto_channel(_[1]),gam_ProPhoto_channel(_[2])],n}function XYZ_D65_to_XYZ_D50(t){let n=t;return n=D65_to_D50(n),n}function XYZ_D50_to_XYZ_D65(t){let n=t;return n=D50_to_D65(n),n}function XYZ_D50_to_XYZ_D50(t){return t}function inGamut(t){return t[0]>=-1e-4&&t[0]<=1.0001&&t[1]>=-1e-4&&t[1]<=1.0001&&t[2]>=-1e-4&&t[2]<=1.0001}function clip(t){return[t[0]<0?0:t[0]>1?1:t[0],t[1]<0?0:t[1]>1?1:t[1],t[2]<0?0:t[2]>1?1:t[2]]}\n/**\n * @description Calculate deltaE OK which is the simple root sum of squares\n * @param {number[]} reference - Array of OKLab values: L as 0..1, a and b as -1..1\n * @param {number[]} sample - Array of OKLab values: L as 0..1, a and b as -1..1\n * @return {number} How different a color sample is from reference\n *\n * @license W3C https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n * @copyright This software or document includes material copied from or derived from https://github.com/w3c/csswg-drafts/blob/main/css-color-4/deltaEOK.js. Copyright  2022 W3C (MIT, ERCIM, Keio, Beihang).\n * @see https://github.com/w3c/csswg-drafts/blob/main/css-color-4/deltaEOK.js\n */function deltaEOK(t,n){const[_,o,e]=t,[a,r,l]=n,i=_-a,c=o-r,u=e-l;return Math.sqrt(i**2+c**2+u**2)}const B=.02,G=1e-4;function mapGamut(t,n,_){const o=t;let e=clip(n(o)),a=deltaEOK(OKLCH_to_OKLab(_(e)),OKLCH_to_OKLab(o));if(a<B)return e;let r=0,l=o[1],i=!0;for(;l-r>G;){const t=(r+l)/2;if(o[1]=t,i&&inGamut(n(o)))r=t;else if(e=clip(n(o)),a=deltaEOK(OKLCH_to_OKLab(_(e)),OKLCH_to_OKLab(o)),a<B){if(B-a<G)return e;i=!1,r=t}else l=t}return clip(n([...o]))}\n/**\n * @license MIT https://github.com/facelessuser/coloraide/blob/main/LICENSE.md\n */function mapGamutRayTrace(t,n,_){const o=t[0],e=t[2];let a=n(t);const r=n([o,0,e]);for(let t=0;t<4;t++){if(t>0){const t=_(a);t[0]=o,t[2]=e,a=n(t)}const l=rayTraceBox(r,a);if(!l)break;a=l}return clip(a)}function rayTraceBox(t,n){let _=1/0,o=-1/0;const e=[0,0,0];for(let a=0;a<3;a++){const r=t[a],l=n[a]-r;e[a]=l;const i=0,c=1;if(l){const t=1/l,n=(i-r)*t,e=(c-r)*t;o=Math.max(Math.min(n,e),o),_=Math.min(Math.max(n,e),_)}else if(r<i||r>c)return!1}return!(o>_||_<0)&&(o<0&&(o=_),!!isFinite(o)&&[t[0]+e[0]*o,t[1]+e[1]*o,t[2]+e[2]*o])}const R={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function luminance(t){const[n,_,o]=t.map(t=>t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4));return.2126*n+.7152*_+.0722*o}function contrast_ratio_wcag_2_1(t,n){const _=luminance(t),o=luminance(n);return(Math.max(_,o)+.05)/(Math.min(_,o)+.05)}export{HSL_to_XYZ_D50,HWB_to_XYZ_D50,LCH_to_XYZ_D50,Lab_to_XYZ_D50,OKLCH_to_OKLab,OKLCH_to_XYZ_D50,OKLab_to_OKLCH,OKLab_to_XYZ,OKLab_to_XYZ_D50,P3_to_XYZ_D50,ProPhoto_RGB_to_XYZ_D50,XYZ_D50_to_HSL,XYZ_D50_to_HWB,XYZ_D50_to_LCH,XYZ_D50_to_Lab,XYZ_D50_to_OKLCH,XYZ_D50_to_OKLab,XYZ_D50_to_P3,XYZ_D50_to_ProPhoto,XYZ_D50_to_XYZ_D50,XYZ_D50_to_XYZ_D65,XYZ_D50_to_a98_RGB,XYZ_D50_to_lin_P3,XYZ_D50_to_lin_sRGB,XYZ_D50_to_rec_2020,XYZ_D50_to_sRGB,XYZ_D65_to_XYZ_D50,XYZ_to_OKLab,XYZ_to_lin_P3,XYZ_to_lin_sRGB,a98_RGB_to_XYZ_D50,clip,contrast_ratio_wcag_2_1,gam_P3,gam_sRGB,inGamut,lin_P3,lin_P3_to_XYZ,lin_P3_to_XYZ_D50,lin_sRGB,lin_sRGB_to_XYZ,lin_sRGB_to_XYZ_D50,mapGamut,mapGamutRayTrace,R as namedColors,rec_2020_to_XYZ_D50,sRGB_to_XYZ_D50};\n","import{TokenType as e,NumberType as a,isTokenIdent as n,isTokenPercentage as r,isTokenNumber as o,isTokenDelim as t,isTokenNumeric as l,isTokenComma as s,isTokenDimension as u,isTokenHash as i}from\"@csstools/css-tokenizer\";import{XYZ_D50_to_XYZ_D65 as c,XYZ_D50_to_XYZ_D50 as h,XYZ_D50_to_OKLab as m,XYZ_D50_to_OKLCH as p,XYZ_D50_to_LCH as N,XYZ_D50_to_Lab as b,XYZ_D50_to_HWB as v,XYZ_D50_to_HSL as g,XYZ_D50_to_a98_RGB as f,XYZ_D50_to_ProPhoto as d,XYZ_D50_to_rec_2020 as y,XYZ_D50_to_lin_P3 as _,XYZ_D50_to_P3 as C,XYZ_D50_to_lin_sRGB as w,XYZ_D50_to_sRGB as x,XYZ_D65_to_XYZ_D50 as L,OKLCH_to_XYZ_D50 as H,LCH_to_XYZ_D50 as P,OKLab_to_XYZ_D50 as k,Lab_to_XYZ_D50 as S,HWB_to_XYZ_D50 as D,HSL_to_XYZ_D50 as M,ProPhoto_RGB_to_XYZ_D50 as F,a98_RGB_to_XYZ_D50 as z,rec_2020_to_XYZ_D50 as Z,lin_P3_to_XYZ_D50 as R,P3_to_XYZ_D50 as B,lin_sRGB_to_XYZ_D50 as V,sRGB_to_XYZ_D50 as T,namedColors as G,inGamut as A,clip as X,gam_sRGB as K,mapGamutRayTrace as Y,OKLCH_to_OKLab as I,OKLab_to_XYZ as O,XYZ_to_lin_sRGB as W,lin_sRGB_to_XYZ as E,XYZ_to_OKLab as U,OKLab_to_OKLCH as $,contrast_ratio_wcag_2_1 as j,gam_P3 as q,XYZ_to_lin_P3 as J,lin_P3_to_XYZ as Q}from\"@csstools/color-helpers\";import{isWhitespaceNode as ee,isCommentNode as ae,isTokenNode as ne,isFunctionNode as re,TokenNode as oe,isWhiteSpaceOrCommentNode as te,replaceComponentValues as le,FunctionNode as se,WhitespaceNode as ue}from\"@csstools/css-parser-algorithms\";import{mathFunctionNames as ie,calcFromComponentValues as ce}from\"@csstools/css-calc\";var he,me;function convertNaNToZero(e){return[Number.isNaN(e[0])?0:e[0],Number.isNaN(e[1])?0:e[1],Number.isNaN(e[2])?0:e[2]]}function colorData_to_XYZ_D50(e){switch(e.colorNotation){case he.HEX:case he.RGB:case he.sRGB:return{...e,colorNotation:he.XYZ_D50,channels:T(convertNaNToZero(e.channels))};case he.Linear_sRGB:return{...e,colorNotation:he.XYZ_D50,channels:V(convertNaNToZero(e.channels))};case he.Display_P3:return{...e,colorNotation:he.XYZ_D50,channels:B(convertNaNToZero(e.channels))};case he.Linear_Display_P3:return{...e,colorNotation:he.XYZ_D50,channels:R(convertNaNToZero(e.channels))};case he.Rec2020:return{...e,colorNotation:he.XYZ_D50,channels:Z(convertNaNToZero(e.channels))};case he.A98_RGB:return{...e,colorNotation:he.XYZ_D50,channels:z(convertNaNToZero(e.channels))};case he.ProPhoto_RGB:return{...e,colorNotation:he.XYZ_D50,channels:F(convertNaNToZero(e.channels))};case he.HSL:return{...e,colorNotation:he.XYZ_D50,channels:M(convertNaNToZero(e.channels))};case he.HWB:return{...e,colorNotation:he.XYZ_D50,channels:D(convertNaNToZero(e.channels))};case he.Lab:return{...e,colorNotation:he.XYZ_D50,channels:S(convertNaNToZero(e.channels))};case he.OKLab:return{...e,colorNotation:he.XYZ_D50,channels:k(convertNaNToZero(e.channels))};case he.LCH:return{...e,colorNotation:he.XYZ_D50,channels:P(convertNaNToZero(e.channels))};case he.OKLCH:return{...e,colorNotation:he.XYZ_D50,channels:H(convertNaNToZero(e.channels))};case he.XYZ_D50:return{...e,colorNotation:he.XYZ_D50,channels:h(convertNaNToZero(e.channels))};case he.XYZ_D65:return{...e,colorNotation:he.XYZ_D50,channels:L(convertNaNToZero(e.channels))};default:throw new Error(\"Unsupported color notation\")}}!function(e){e.A98_RGB=\"a98-rgb\",e.Display_P3=\"display-p3\",e.Linear_Display_P3=\"display-p3-linear\",e.HEX=\"hex\",e.HSL=\"hsl\",e.HWB=\"hwb\",e.LCH=\"lch\",e.Lab=\"lab\",e.Linear_sRGB=\"srgb-linear\",e.OKLCH=\"oklch\",e.OKLab=\"oklab\",e.ProPhoto_RGB=\"prophoto-rgb\",e.RGB=\"rgb\",e.sRGB=\"srgb\",e.Rec2020=\"rec2020\",e.XYZ_D50=\"xyz-d50\",e.XYZ_D65=\"xyz-d65\"}(he||(he={})),function(e){e.ColorKeyword=\"color-keyword\",e.HasAlpha=\"has-alpha\",e.HasDimensionValues=\"has-dimension-values\",e.HasNoneKeywords=\"has-none-keywords\",e.HasNumberValues=\"has-number-values\",e.HasPercentageAlpha=\"has-percentage-alpha\",e.HasPercentageValues=\"has-percentage-values\",e.HasVariableAlpha=\"has-variable-alpha\",e.Hex=\"hex\",e.LegacyHSL=\"legacy-hsl\",e.LegacyRGB=\"legacy-rgb\",e.NamedColor=\"named-color\",e.RelativeColorSyntax=\"relative-color-syntax\",e.ColorMix=\"color-mix\",e.ColorMixVariadic=\"color-mix-variadic\",e.ContrastColor=\"contrast-color\",e.RelativeAlphaSyntax=\"relative-alpha-syntax\",e.Experimental=\"experimental\"}(me||(me={}));const pe=new Set([he.A98_RGB,he.Display_P3,he.Linear_Display_P3,he.HEX,he.Linear_sRGB,he.ProPhoto_RGB,he.RGB,he.sRGB,he.Rec2020,he.XYZ_D50,he.XYZ_D65]);function colorDataTo(e,a){const n={...e};if(e.colorNotation!==a){const e=colorData_to_XYZ_D50(n);switch(a){case he.HEX:case he.RGB:n.colorNotation=he.RGB,n.channels=x(e.channels);break;case he.sRGB:n.colorNotation=he.sRGB,n.channels=x(e.channels);break;case he.Linear_sRGB:n.colorNotation=he.Linear_sRGB,n.channels=w(e.channels);break;case he.Display_P3:n.colorNotation=he.Display_P3,n.channels=C(e.channels);break;case he.Linear_Display_P3:n.colorNotation=he.Linear_Display_P3,n.channels=_(e.channels);break;case he.Rec2020:n.colorNotation=he.Rec2020,n.channels=y(e.channels);break;case he.ProPhoto_RGB:n.colorNotation=he.ProPhoto_RGB,n.channels=d(e.channels);break;case he.A98_RGB:n.colorNotation=he.A98_RGB,n.channels=f(e.channels);break;case he.HSL:n.colorNotation=he.HSL,n.channels=g(e.channels);break;case he.HWB:n.colorNotation=he.HWB,n.channels=v(e.channels);break;case he.Lab:n.colorNotation=he.Lab,n.channels=b(e.channels);break;case he.LCH:n.colorNotation=he.LCH,n.channels=N(e.channels);break;case he.OKLCH:n.colorNotation=he.OKLCH,n.channels=p(e.channels);break;case he.OKLab:n.colorNotation=he.OKLab,n.channels=m(e.channels);break;case he.XYZ_D50:n.colorNotation=he.XYZ_D50,n.channels=h(e.channels);break;case he.XYZ_D65:n.colorNotation=he.XYZ_D65,n.channels=c(e.channels);break;default:throw new Error(\"Unsupported color notation\")}}else n.channels=convertNaNToZero(e.channels);if(a===e.colorNotation)n.channels=carryForwardMissingComponents(e.channels,[0,1,2],n.channels,[0,1,2]);else if(pe.has(a)&&pe.has(e.colorNotation))n.channels=carryForwardMissingComponents(e.channels,[0,1,2],n.channels,[0,1,2]);else switch(a){case he.HSL:switch(e.colorNotation){case he.HWB:n.channels=carryForwardMissingComponents(e.channels,[0],n.channels,[0]);break;case he.Lab:case he.OKLab:n.channels=carryForwardMissingComponents(e.channels,[2],n.channels,[0]);break;case he.LCH:case he.OKLCH:n.channels=carryForwardMissingComponents(e.channels,[0,1,2],n.channels,[2,1,0])}break;case he.HWB:switch(e.colorNotation){case he.HSL:n.channels=carryForwardMissingComponents(e.channels,[0],n.channels,[0]);break;case he.LCH:case he.OKLCH:n.channels=carryForwardMissingComponents(e.channels,[0],n.channels,[2])}break;case he.Lab:case he.OKLab:switch(e.colorNotation){case he.HSL:n.channels=carryForwardMissingComponents(e.channels,[0],n.channels,[2]);break;case he.Lab:case he.OKLab:n.channels=carryForwardMissingComponents(e.channels,[0,1,2],n.channels,[0,1,2]);break;case he.LCH:case he.OKLCH:n.channels=carryForwardMissingComponents(e.channels,[0],n.channels,[0])}break;case he.LCH:case he.OKLCH:switch(e.colorNotation){case he.HSL:n.channels=carryForwardMissingComponents(e.channels,[0,1,2],n.channels,[2,1,0]);break;case he.HWB:n.channels=carryForwardMissingComponents(e.channels,[0],n.channels,[2]);break;case he.Lab:case he.OKLab:n.channels=carryForwardMissingComponents(e.channels,[0],n.channels,[0]);break;case he.LCH:case he.OKLCH:n.channels=carryForwardMissingComponents(e.channels,[0,1,2],n.channels,[0,1,2])}}return n.channels=convertPowerlessComponentsToMissingComponents(n.channels,a),n}function convertPowerlessComponentsToMissingComponents(e,a){const n=[...e];switch(a){case he.HSL:!Number.isNaN(n[1])&&reducePrecision(n[1],4)<=0&&(n[0]=Number.NaN);break;case he.HWB:Math.max(0,reducePrecision(n[1],4))+Math.max(0,reducePrecision(n[2],4))>=100&&(n[0]=Number.NaN);break;case he.LCH:!Number.isNaN(n[1])&&reducePrecision(n[1],4)<=0&&(n[2]=Number.NaN);break;case he.OKLCH:!Number.isNaN(n[1])&&reducePrecision(n[1],6)<=0&&(n[2]=Number.NaN)}return n}function convertPowerlessComponentsToZeroValuesForDisplay(e,a){const n=[...e];switch(a){case he.HSL:(reducePrecision(n[2])<=0||reducePrecision(n[2])>=100)&&(n[0]=Number.NaN,n[1]=Number.NaN),reducePrecision(n[1])<=0&&(n[0]=Number.NaN);break;case he.HWB:Math.max(0,reducePrecision(n[1]))+Math.max(0,reducePrecision(n[2]))>=100&&(n[0]=Number.NaN);break;case he.Lab:(reducePrecision(n[0])<=0||reducePrecision(n[0])>=100)&&(n[1]=Number.NaN,n[2]=Number.NaN);break;case he.LCH:reducePrecision(n[1])<=0&&(n[2]=Number.NaN),(reducePrecision(n[0])<=0||reducePrecision(n[0])>=100)&&(n[1]=Number.NaN,n[2]=Number.NaN);break;case he.OKLab:(reducePrecision(n[0])<=0||reducePrecision(n[0])>=1)&&(n[1]=Number.NaN,n[2]=Number.NaN);break;case he.OKLCH:reducePrecision(n[1])<=0&&(n[2]=Number.NaN),(reducePrecision(n[0])<=0||reducePrecision(n[0])>=1)&&(n[1]=Number.NaN,n[2]=Number.NaN)}return n}function carryForwardMissingComponents(e,a,n,r){const o=[...n];for(const n of a)Number.isNaN(e[a[n]])&&(o[r[n]]=Number.NaN);return o}function normalizeRelativeColorDataChannels(e){const a=new Map;switch(e.colorNotation){case he.RGB:case he.HEX:a.set(\"r\",dummyNumberToken(255*e.channels[0])),a.set(\"g\",dummyNumberToken(255*e.channels[1])),a.set(\"b\",dummyNumberToken(255*e.channels[2])),\"number\"==typeof e.alpha&&a.set(\"alpha\",dummyNumberToken(e.alpha));break;case he.HSL:a.set(\"h\",dummyNumberToken(e.channels[0])),a.set(\"s\",dummyNumberToken(e.channels[1])),a.set(\"l\",dummyNumberToken(e.channels[2])),\"number\"==typeof e.alpha&&a.set(\"alpha\",dummyNumberToken(e.alpha));break;case he.HWB:a.set(\"h\",dummyNumberToken(e.channels[0])),a.set(\"w\",dummyNumberToken(e.channels[1])),a.set(\"b\",dummyNumberToken(e.channels[2])),\"number\"==typeof e.alpha&&a.set(\"alpha\",dummyNumberToken(e.alpha));break;case he.Lab:case he.OKLab:a.set(\"l\",dummyNumberToken(e.channels[0])),a.set(\"a\",dummyNumberToken(e.channels[1])),a.set(\"b\",dummyNumberToken(e.channels[2])),\"number\"==typeof e.alpha&&a.set(\"alpha\",dummyNumberToken(e.alpha));break;case he.LCH:case he.OKLCH:a.set(\"l\",dummyNumberToken(e.channels[0])),a.set(\"c\",dummyNumberToken(e.channels[1])),a.set(\"h\",dummyNumberToken(e.channels[2])),\"number\"==typeof e.alpha&&a.set(\"alpha\",dummyNumberToken(e.alpha));break;case he.sRGB:case he.A98_RGB:case he.Display_P3:case he.Linear_Display_P3:case he.Rec2020:case he.Linear_sRGB:case he.ProPhoto_RGB:a.set(\"r\",dummyNumberToken(e.channels[0])),a.set(\"g\",dummyNumberToken(e.channels[1])),a.set(\"b\",dummyNumberToken(e.channels[2])),\"number\"==typeof e.alpha&&a.set(\"alpha\",dummyNumberToken(e.alpha));break;case he.XYZ_D50:case he.XYZ_D65:a.set(\"x\",dummyNumberToken(e.channels[0])),a.set(\"y\",dummyNumberToken(e.channels[1])),a.set(\"z\",dummyNumberToken(e.channels[2])),\"number\"==typeof e.alpha&&a.set(\"alpha\",dummyNumberToken(e.alpha))}return a}function noneToZeroInRelativeColorDataChannels(e){const a=new Map(e);for(const[n,r]of e)Number.isNaN(r[4].value)&&a.set(n,dummyNumberToken(0));return a}function dummyNumberToken(n){return Number.isNaN(n)?[e.Number,\"none\",-1,-1,{value:Number.NaN,type:a.Number}]:[e.Number,n.toString(),-1,-1,{value:n,type:a.Number}]}function reducePrecision(e,a=7){if(Number.isNaN(e))return 0;const n=Math.pow(10,a);return Math.round(e*n)/n}function colorDataFitsRGB_Gamut(e){const a={...e,channels:[...e.channels]};a.channels=convertPowerlessComponentsToZeroValuesForDisplay(a.channels,a.colorNotation);return!colorDataTo(a,he.RGB).channels.find(e=>e<-1e-5||e>1.00001)}function colorDataFitsDisplayP3_Gamut(e){const a={...e,channels:[...e.channels]};a.channels=convertPowerlessComponentsToZeroValuesForDisplay(a.channels,a.colorNotation);return!colorDataTo(a,he.Display_P3).channels.find(e=>e<-1e-5||e>1.00001)}function normalize(e,a,n,r){return Math.min(Math.max(e/a,n),r)}const Ne=/[A-Z]/g;function toLowerCaseAZ(e){return e.replace(Ne,e=>String.fromCharCode(e.charCodeAt(0)+32))}function normalize_Color_ChannelValues(t,l,s){if(n(t)&&\"none\"===toLowerCaseAZ(t[4].value))return s.syntaxFlags.add(me.HasNoneKeywords),[e.Number,\"none\",t[2],t[3],{value:Number.NaN,type:a.Number}];if(r(t)){3!==l&&s.syntaxFlags.add(me.HasPercentageValues);let n=normalize(t[4].value,100,-2147483647,2147483647);return 3===l&&(n=normalize(t[4].value,100,0,1)),[e.Number,n.toString(),t[2],t[3],{value:n,type:a.Number}]}if(o(t)){3!==l&&s.syntaxFlags.add(me.HasNumberValues);let n=normalize(t[4].value,1,-2147483647,2147483647);return 3===l&&(n=normalize(t[4].value,1,0,1)),[e.Number,n.toString(),t[2],t[3],{value:n,type:a.Number}]}return!1}const be=new Set([\"srgb\",\"srgb-linear\",\"display-p3\",\"display-p3-linear\",\"a98-rgb\",\"prophoto-rgb\",\"rec2020\",\"xyz\",\"xyz-d50\",\"xyz-d65\"]);function color$1(e,a){const r=[],s=[],u=[],i=[];let c,h,m=!1,p=!1;const N={colorNotation:he.sRGB,channels:[0,0,0],alpha:1,syntaxFlags:new Set([])};let b=r;for(let o=0;o<e.value.length;o++){let v=e.value[o];if(ee(v)||ae(v))for(;ee(e.value[o+1])||ae(e.value[o+1]);)o++;else if(b===r&&r.length&&(b=s),b===s&&s.length&&(b=u),ne(v)&&t(v.value)&&\"/\"===v.value[4].value){if(b===i)return!1;b=i}else{if(re(v)){if(b===i&&\"var\"===toLowerCaseAZ(v.getName())){N.syntaxFlags.add(me.HasVariableAlpha),b.push(v);continue}if(!ie.has(toLowerCaseAZ(v.getName())))return!1;const[[e]]=ce([[v]],{censorIntoStandardRepresentableValues:!0,globals:h,precision:-1,toCanonicalUnits:!0,rawPercentages:!0});if(!e||!ne(e)||!l(e.value))return!1;Number.isNaN(e.value[4].value)&&(e.value[4].value=0),v=e}if(b===r&&0===r.length&&ne(v)&&n(v.value)&&be.has(toLowerCaseAZ(v.value[4].value))){if(m)return!1;m=toLowerCaseAZ(v.value[4].value),N.colorNotation=colorSpaceNameToColorNotation(m),p&&(p.colorNotation!==N.colorNotation&&(p=colorDataTo(p,N.colorNotation)),c=normalizeRelativeColorDataChannels(p),h=noneToZeroInRelativeColorDataChannels(c))}else if(b===r&&0===r.length&&ne(v)&&n(v.value)&&\"from\"===toLowerCaseAZ(v.value[4].value)){if(p)return!1;if(m)return!1;for(;ee(e.value[o+1])||ae(e.value[o+1]);)o++;if(o++,v=e.value[o],p=a(v),!1===p)return!1;p.syntaxFlags.has(me.Experimental)&&N.syntaxFlags.add(me.Experimental),N.syntaxFlags.add(me.RelativeColorSyntax)}else{if(!ne(v))return!1;if(n(v.value)&&c&&c.has(toLowerCaseAZ(v.value[4].value))){b.push(new oe(c.get(toLowerCaseAZ(v.value[4].value))));continue}b.push(v)}}}if(!m)return!1;if(1!==b.length)return!1;if(1!==r.length||1!==s.length||1!==u.length)return!1;if(!ne(r[0])||!ne(s[0])||!ne(u[0]))return!1;if(c&&!c.has(\"alpha\"))return!1;const v=normalize_Color_ChannelValues(r[0].value,0,N);if(!v||!o(v))return!1;const g=normalize_Color_ChannelValues(s[0].value,1,N);if(!g||!o(g))return!1;const f=normalize_Color_ChannelValues(u[0].value,2,N);if(!f||!o(f))return!1;const d=[v,g,f];if(1===i.length)if(N.syntaxFlags.add(me.HasAlpha),ne(i[0])){const e=normalize_Color_ChannelValues(i[0].value,3,N);if(!e||!o(e))return!1;d.push(e)}else N.alpha=i[0];else if(c&&c.has(\"alpha\")){const e=normalize_Color_ChannelValues(c.get(\"alpha\"),3,N);if(!e||!o(e))return!1;d.push(e)}return N.channels=[d[0][4].value,d[1][4].value,d[2][4].value],4===d.length&&(N.alpha=d[3][4].value),N}function colorSpaceNameToColorNotation(e){switch(e){case\"srgb\":return he.sRGB;case\"srgb-linear\":return he.Linear_sRGB;case\"display-p3\":return he.Display_P3;case\"display-p3-linear\":return he.Linear_Display_P3;case\"a98-rgb\":return he.A98_RGB;case\"prophoto-rgb\":return he.ProPhoto_RGB;case\"rec2020\":return he.Rec2020;case\"xyz\":case\"xyz-d65\":return he.XYZ_D65;case\"xyz-d50\":return he.XYZ_D50;default:throw new Error(\"Unknown color space name: \"+e)}}const ve=new Set([\"srgb\",\"srgb-linear\",\"display-p3\",\"display-p3-linear\",\"a98-rgb\",\"prophoto-rgb\",\"rec2020\",\"lab\",\"oklab\",\"xyz\",\"xyz-d50\",\"xyz-d65\"]),ge=new Set([\"hsl\",\"hwb\",\"lch\",\"oklch\"]),fe=new Set([\"shorter\",\"longer\",\"increasing\",\"decreasing\"]);function colorMix(e,a){let r=null,o=null,t=null,l=!1;for(let u=0;u<e.value.length;u++){const i=e.value[u];if(!te(i)){if(!(r||ne(i)&&n(i.value)&&\"in\"===toLowerCaseAZ(i.value[4].value)))return colorMixRectangular(\"oklab\",colorMixComponents(e.value,a));if(ne(i)&&n(i.value)){if(!r&&\"in\"===toLowerCaseAZ(i.value[4].value)){r=i;continue}if(r&&!o){o=toLowerCaseAZ(i.value[4].value);continue}if(r&&o&&!t&&ge.has(o)){t=toLowerCaseAZ(i.value[4].value);continue}if(r&&o&&t&&!l&&\"hue\"===toLowerCaseAZ(i.value[4].value)){l=!0;continue}return!1}return!(!ne(i)||!s(i.value))&&(!!o&&(t||l?!!(o&&t&&l&&ge.has(o)&&fe.has(t))&&colorMixPolar(o,t,colorMixComponents(e.value.slice(u+1),a)):ve.has(o)?colorMixRectangular(o,colorMixComponents(e.value.slice(u+1),a)):!!ge.has(o)&&colorMixPolar(o,\"shorter\",colorMixComponents(e.value.slice(u+1),a))))}}return!1}function colorMixComponents(e,a){const n=[];let o=1,t=!1,u=!1;for(let o=0;o<e.length;o++){let i=e[o];if(!te(i)){if(!ne(i)||!s(i.value)){if(!t){const e=a(i);if(e){t=e;continue}}if(!u){if(re(i)&&ie.has(toLowerCaseAZ(i.getName()))){if([[i]]=ce([[i]],{censorIntoStandardRepresentableValues:!0,precision:-1,toCanonicalUnits:!0,rawPercentages:!0}),!i||!ne(i)||!l(i.value))return!1;Number.isNaN(i.value[4].value)&&(i.value[4].value=0)}if(ne(i)&&r(i.value)&&i.value[4].value>=0){u=i.value[4].value;continue}}return!1}if(!t)return!1;n.push({color:t,percentage:u}),t=!1,u=!1}}if(!t)return!1;n.push({color:t,percentage:u});let i=0,c=0;for(let e=0;e<n.length;e++){const a=n[e].percentage;if(!1!==a){if(a<0||a>100)return!1;i+=a}else c++}const h=Math.max(0,100-i);i=0;for(let e=0;e<n.length;e++)!1===n[e].percentage&&(n[e].percentage=h/c),i+=n[e].percentage;if(0===i)return{colors:[{color:{channels:[0,0,0],colorNotation:he.sRGB,alpha:0,syntaxFlags:new Set},percentage:0}],alphaMultiplier:0};if(i>100)for(let e=0;e<n.length;e++){let a=n[e].percentage;a=a/i*100,n[e].percentage=a}if(i<100){o=i/100;for(let e=0;e<n.length;e++){let a=n[e].percentage;a=a/i*100,n[e].percentage=a}}return{colors:n,alphaMultiplier:o}}function colorMixRectangular(e,a){if(!a||!a.colors.length)return!1;const n=a.colors.slice();n.reverse();let r=he.RGB;switch(e){case\"srgb\":r=he.RGB;break;case\"srgb-linear\":r=he.Linear_sRGB;break;case\"display-p3\":r=he.Display_P3;break;case\"display-p3-linear\":r=he.Linear_Display_P3;break;case\"a98-rgb\":r=he.A98_RGB;break;case\"prophoto-rgb\":r=he.ProPhoto_RGB;break;case\"rec2020\":r=he.Rec2020;break;case\"lab\":r=he.Lab;break;case\"oklab\":r=he.OKLab;break;case\"xyz-d50\":r=he.XYZ_D50;break;case\"xyz\":case\"xyz-d65\":r=he.XYZ_D65;break;default:return!1}if(1===n.length){const e=colorDataTo(n[0].color,r);return e.colorNotation=r,e.syntaxFlags.add(me.ColorMixVariadic),\"number\"!=typeof e.alpha?!1:(e.alpha=e.alpha*a.alphaMultiplier,e)}for(;n.length>=2;){const e=n.pop(),a=n.pop();if(!e||!a)return!1;const o=colorMixRectangularPair(r,e.color,e.percentage,a.color,a.percentage);if(!o)return!1;n.push({color:o,percentage:e.percentage+a.percentage})}const o=n[0]?.color;return!!o&&(a.colors.some(e=>e.color.syntaxFlags.has(me.Experimental))&&o.syntaxFlags.add(me.Experimental),\"number\"==typeof o.alpha&&(o.alpha=o.alpha*a.alphaMultiplier,2!==a.colors.length&&o.syntaxFlags.add(me.ColorMixVariadic),o))}function colorMixRectangularPair(e,a,n,r,o){const t=n/(n+o);let l=a.alpha;if(\"number\"!=typeof l)return!1;let s=r.alpha;if(\"number\"!=typeof s)return!1;l=Number.isNaN(l)?s:l,s=Number.isNaN(s)?l:s;const u=colorDataTo(a,e).channels,i=colorDataTo(r,e).channels;u[0]=fillInMissingComponent(u[0],i[0]),i[0]=fillInMissingComponent(i[0],u[0]),u[1]=fillInMissingComponent(u[1],i[1]),i[1]=fillInMissingComponent(i[1],u[1]),u[2]=fillInMissingComponent(u[2],i[2]),i[2]=fillInMissingComponent(i[2],u[2]),u[0]=premultiply(u[0],l),u[1]=premultiply(u[1],l),u[2]=premultiply(u[2],l),i[0]=premultiply(i[0],s),i[1]=premultiply(i[1],s),i[2]=premultiply(i[2],s);const c=interpolate(l,s,t);return{colorNotation:e,channels:[un_premultiply(interpolate(u[0],i[0],t),c),un_premultiply(interpolate(u[1],i[1],t),c),un_premultiply(interpolate(u[2],i[2],t),c)],alpha:c,syntaxFlags:new Set([me.ColorMix])}}function colorMixPolar(e,a,n){if(!n||!n.colors.length)return!1;const r=n.colors.slice();r.reverse();let o=he.HSL;switch(e){case\"hsl\":o=he.HSL;break;case\"hwb\":o=he.HWB;break;case\"lch\":o=he.LCH;break;case\"oklch\":o=he.OKLCH;break;default:return!1}if(1===r.length){const e=colorDataTo(r[0].color,o);return e.colorNotation=o,e.syntaxFlags.add(me.ColorMixVariadic),\"number\"!=typeof e.alpha?!1:(e.alpha=e.alpha*n.alphaMultiplier,e)}for(;r.length>=2;){const e=r.pop(),n=r.pop();if(!e||!n)return!1;const t=colorMixPolarPair(o,a,e.color,e.percentage,n.color,n.percentage);if(!t)return!1;r.push({color:t,percentage:e.percentage+n.percentage})}const t=r[0]?.color;return!!t&&(n.colors.some(e=>e.color.syntaxFlags.has(me.Experimental))&&t.syntaxFlags.add(me.Experimental),\"number\"==typeof t.alpha&&(t.alpha=t.alpha*n.alphaMultiplier,2!==n.colors.length&&t.syntaxFlags.add(me.ColorMixVariadic),t))}function colorMixPolarPair(e,a,n,r,o,t){const l=r/(r+t);let s=0,u=0,i=0,c=0,h=0,m=0,p=n.alpha;if(\"number\"!=typeof p)return!1;let N=o.alpha;if(\"number\"!=typeof N)return!1;p=Number.isNaN(p)?N:p,N=Number.isNaN(N)?p:N;const b=colorDataTo(n,e).channels,v=colorDataTo(o,e).channels;switch(e){case he.HSL:case he.HWB:s=b[0],u=v[0],i=b[1],c=v[1],h=b[2],m=v[2];break;case he.LCH:case he.OKLCH:i=b[0],c=v[0],h=b[1],m=v[1],s=b[2],u=v[2]}s=fillInMissingComponent(s,u),Number.isNaN(s)&&(s=0),u=fillInMissingComponent(u,s),Number.isNaN(u)&&(u=0),i=fillInMissingComponent(i,c),c=fillInMissingComponent(c,i),h=fillInMissingComponent(h,m),m=fillInMissingComponent(m,h);const g=u-s;switch(a){case\"shorter\":g>180?s+=360:g<-180&&(u+=360);break;case\"longer\":-180<g&&g<180&&(g>0?s+=360:u+=360);break;case\"increasing\":g<0&&(u+=360);break;case\"decreasing\":g>0&&(s+=360);break;default:throw new Error(\"Unknown hue interpolation method\")}i=premultiply(i,p),h=premultiply(h,p),c=premultiply(c,N),m=premultiply(m,N);let f=[0,0,0];const d=interpolate(p,N,l);switch(e){case he.HSL:case he.HWB:f=[interpolate(s,u,l),un_premultiply(interpolate(i,c,l),d),un_premultiply(interpolate(h,m,l),d)];break;case he.LCH:case he.OKLCH:f=[un_premultiply(interpolate(i,c,l),d),un_premultiply(interpolate(h,m,l),d),interpolate(s,u,l)]}return{colorNotation:e,channels:f,alpha:d,syntaxFlags:new Set([me.ColorMix])}}function fillInMissingComponent(e,a){return Number.isNaN(e)?a:e}function interpolate(e,a,n){return e*n+a*(1-n)}function premultiply(e,a){return Number.isNaN(a)?e:Number.isNaN(e)?Number.NaN:e*a}function un_premultiply(e,a){return 0===a||Number.isNaN(a)?e:Number.isNaN(e)?Number.NaN:e/a}function hex(e){const a=toLowerCaseAZ(e[4].value);if(a.match(/[^a-f0-9]/))return!1;const n={colorNotation:he.HEX,channels:[0,0,0],alpha:1,syntaxFlags:new Set([me.Hex])},r=a.length;if(3===r){const e=a[0],r=a[1],o=a[2];return n.channels=[parseInt(e+e,16)/255,parseInt(r+r,16)/255,parseInt(o+o,16)/255],n}if(6===r){const e=a[0]+a[1],r=a[2]+a[3],o=a[4]+a[5];return n.channels=[parseInt(e,16)/255,parseInt(r,16)/255,parseInt(o,16)/255],n}if(4===r){const e=a[0],r=a[1],o=a[2],t=a[3];return n.channels=[parseInt(e+e,16)/255,parseInt(r+r,16)/255,parseInt(o+o,16)/255],n.alpha=parseInt(t+t,16)/255,n.syntaxFlags.add(me.HasAlpha),n}if(8===r){const e=a[0]+a[1],r=a[2]+a[3],o=a[4]+a[5],t=a[6]+a[7];return n.channels=[parseInt(e,16)/255,parseInt(r,16)/255,parseInt(o,16)/255],n.alpha=parseInt(t,16)/255,n.syntaxFlags.add(me.HasAlpha),n}return!1}function normalizeHue(n){if(o(n))return n[4].value=n[4].value%360,n[1]=n[4].value.toString(),n;if(u(n)){let r=n[4].value;switch(toLowerCaseAZ(n[4].unit)){case\"deg\":break;case\"rad\":r=180*n[4].value/Math.PI;break;case\"grad\":r=.9*n[4].value;break;case\"turn\":r=360*n[4].value;break;default:return!1}return r%=360,[e.Number,r.toString(),n[2],n[3],{value:r,type:a.Number}]}return!1}function normalize_legacy_HSL_ChannelValues(n,t,l){if(0===t){const e=normalizeHue(n);return!1!==e&&(u(n)&&l.syntaxFlags.add(me.HasDimensionValues),e)}if(r(n)){3===t?l.syntaxFlags.add(me.HasPercentageAlpha):l.syntaxFlags.add(me.HasPercentageValues);let r=normalize(n[4].value,1,0,100);return 3===t&&(r=normalize(n[4].value,100,0,1)),[e.Number,r.toString(),n[2],n[3],{value:r,type:a.Number}]}if(o(n)){if(3!==t)return!1;let r=normalize(n[4].value,1,0,100);return 3===t&&(r=normalize(n[4].value,1,0,1)),[e.Number,r.toString(),n[2],n[3],{value:r,type:a.Number}]}return!1}function normalize_modern_HSL_ChannelValues(t,l,s){if(n(t)&&\"none\"===toLowerCaseAZ(t[4].value))return s.syntaxFlags.add(me.HasNoneKeywords),[e.Number,\"none\",t[2],t[3],{value:Number.NaN,type:a.Number}];if(0===l){const e=normalizeHue(t);return!1!==e&&(u(t)&&s.syntaxFlags.add(me.HasDimensionValues),e)}if(r(t)){3===l?s.syntaxFlags.add(me.HasPercentageAlpha):s.syntaxFlags.add(me.HasPercentageValues);let n=t[4].value;return 3===l?n=normalize(t[4].value,100,0,1):1===l&&(n=normalize(t[4].value,1,0,2147483647)),[e.Number,n.toString(),t[2],t[3],{value:n,type:a.Number}]}if(o(t)){3!==l&&s.syntaxFlags.add(me.HasNumberValues);let n=t[4].value;return 3===l?n=normalize(t[4].value,1,0,1):1===l&&(n=normalize(t[4].value,1,0,2147483647)),[e.Number,n.toString(),t[2],t[3],{value:n,type:a.Number}]}return!1}function threeChannelLegacySyntax(e,a,n,r){const t=[],u=[],i=[],c=[],h={colorNotation:n,channels:[0,0,0],alpha:1,syntaxFlags:new Set(r)};let m=t;for(let a=0;a<e.value.length;a++){let n=e.value[a];if(!ee(n)&&!ae(n)){if(ne(n)&&s(n.value)){if(m===t){m=u;continue}if(m===u){m=i;continue}if(m===i){m=c;continue}if(m===c)return!1}if(re(n)){if(m===c&&\"var\"===n.getName().toLowerCase()){h.syntaxFlags.add(me.HasVariableAlpha),m.push(n);continue}if(!ie.has(n.getName().toLowerCase()))return!1;const[[e]]=ce([[n]],{censorIntoStandardRepresentableValues:!0,precision:-1,toCanonicalUnits:!0,rawPercentages:!0});if(!e||!ne(e)||!l(e.value))return!1;Number.isNaN(e.value[4].value)&&(e.value[4].value=0),n=e}if(!ne(n))return!1;m.push(n)}}if(1!==m.length)return!1;if(1!==t.length||1!==u.length||1!==i.length)return!1;if(!ne(t[0])||!ne(u[0])||!ne(i[0]))return!1;const p=a(t[0].value,0,h);if(!p||!o(p))return!1;const N=a(u[0].value,1,h);if(!N||!o(N))return!1;const b=a(i[0].value,2,h);if(!b||!o(b))return!1;const v=[p,N,b];if(1===c.length)if(h.syntaxFlags.add(me.HasAlpha),ne(c[0])){const e=a(c[0].value,3,h);if(!e||!o(e))return!1;v.push(e)}else h.alpha=c[0];return h.channels=[v[0][4].value,v[1][4].value,v[2][4].value],4===v.length&&(h.alpha=v[3][4].value),h}function threeChannelSpaceSeparated(e,a,r,s,u){const i=[],c=[],h=[],m=[];let p,N,b=!1;const v={colorNotation:r,channels:[0,0,0],alpha:1,syntaxFlags:new Set(s)};let g=i;for(let a=0;a<e.value.length;a++){let o=e.value[a];if(ee(o)||ae(o))for(;ee(e.value[a+1])||ae(e.value[a+1]);)a++;else if(g===i&&i.length&&(g=c),g===c&&c.length&&(g=h),ne(o)&&t(o.value)&&\"/\"===o.value[4].value){if(g===m)return!1;g=m}else{if(re(o)){if(g===m&&\"var\"===o.getName().toLowerCase()){v.syntaxFlags.add(me.HasVariableAlpha),g.push(o);continue}if(!ie.has(o.getName().toLowerCase()))return!1;const[[e]]=ce([[o]],{censorIntoStandardRepresentableValues:!0,globals:N,precision:-1,toCanonicalUnits:!0,rawPercentages:!0});if(!e||!ne(e)||!l(e.value))return!1;Number.isNaN(e.value[4].value)&&(e.value[4].value=0),o=e}if(g===i&&0===i.length&&ne(o)&&n(o.value)&&\"from\"===o.value[4].value.toLowerCase()){if(b)return!1;for(;ee(e.value[a+1])||ae(e.value[a+1]);)a++;if(a++,o=e.value[a],b=u(o),!1===b)return!1;b.syntaxFlags.has(me.Experimental)&&v.syntaxFlags.add(me.Experimental),v.syntaxFlags.add(me.RelativeColorSyntax),b.colorNotation!==r&&(b=colorDataTo(b,r)),p=normalizeRelativeColorDataChannels(b),N=noneToZeroInRelativeColorDataChannels(p)}else{if(!ne(o))return!1;if(n(o.value)&&p){const e=o.value[4].value.toLowerCase();if(p.has(e)){g.push(new oe(p.get(e)));continue}}g.push(o)}}}if(1!==g.length)return!1;if(1!==i.length||1!==c.length||1!==h.length)return!1;if(!ne(i[0])||!ne(c[0])||!ne(h[0]))return!1;if(p&&!p.has(\"alpha\"))return!1;const f=a(i[0].value,0,v);if(!f||!o(f))return!1;const d=a(c[0].value,1,v);if(!d||!o(d))return!1;const y=a(h[0].value,2,v);if(!y||!o(y))return!1;const _=[f,d,y];if(1===m.length)if(v.syntaxFlags.add(me.HasAlpha),ne(m[0])){const e=a(m[0].value,3,v);if(!e||!o(e))return!1;_.push(e)}else v.alpha=m[0];else if(p&&p.has(\"alpha\")){const e=a(p.get(\"alpha\"),3,v);if(!e||!o(e))return!1;_.push(e)}return v.channels=[_[0][4].value,_[1][4].value,_[2][4].value],4===_.length&&(v.alpha=_[3][4].value),v}function hsl(e,a){if(e.value.some(e=>ne(e)&&s(e.value))){const a=hslCommaSeparated(e);if(!1!==a)return a}{const n=hslSpaceSeparated(e,a);if(!1!==n)return n}return!1}function hslCommaSeparated(e){return threeChannelLegacySyntax(e,normalize_legacy_HSL_ChannelValues,he.HSL,[me.LegacyHSL])}function hslSpaceSeparated(e,a){return threeChannelSpaceSeparated(e,normalize_modern_HSL_ChannelValues,he.HSL,[],a)}function normalize_HWB_ChannelValues(t,l,s){if(n(t)&&\"none\"===toLowerCaseAZ(t[4].value))return s.syntaxFlags.add(me.HasNoneKeywords),[e.Number,\"none\",t[2],t[3],{value:Number.NaN,type:a.Number}];if(0===l){const e=normalizeHue(t);return!1!==e&&(u(t)&&s.syntaxFlags.add(me.HasDimensionValues),e)}if(r(t)){3===l?s.syntaxFlags.add(me.HasPercentageAlpha):s.syntaxFlags.add(me.HasPercentageValues);let n=t[4].value;return 3===l&&(n=normalize(t[4].value,100,0,1)),[e.Number,n.toString(),t[2],t[3],{value:n,type:a.Number}]}if(o(t)){3!==l&&s.syntaxFlags.add(me.HasNumberValues);let n=t[4].value;return 3===l&&(n=normalize(t[4].value,1,0,1)),[e.Number,n.toString(),t[2],t[3],{value:n,type:a.Number}]}return!1}function normalize_Lab_ChannelValues(t,l,s){if(n(t)&&\"none\"===toLowerCaseAZ(t[4].value))return s.syntaxFlags.add(me.HasNoneKeywords),[e.Number,\"none\",t[2],t[3],{value:Number.NaN,type:a.Number}];if(r(t)){3!==l&&s.syntaxFlags.add(me.HasPercentageValues);let n=normalize(t[4].value,1,0,100);return 1===l||2===l?n=normalize(t[4].value,.8,-2147483647,2147483647):3===l&&(n=normalize(t[4].value,100,0,1)),[e.Number,n.toString(),t[2],t[3],{value:n,type:a.Number}]}if(o(t)){3!==l&&s.syntaxFlags.add(me.HasNumberValues);let n=normalize(t[4].value,1,0,100);return 1===l||2===l?n=normalize(t[4].value,1,-2147483647,2147483647):3===l&&(n=normalize(t[4].value,1,0,1)),[e.Number,n.toString(),t[2],t[3],{value:n,type:a.Number}]}return!1}function lab(e,a){return threeChannelSpaceSeparated(e,normalize_Lab_ChannelValues,he.Lab,[],a)}function normalize_LCH_ChannelValues(t,l,s){if(n(t)&&\"none\"===toLowerCaseAZ(t[4].value))return s.syntaxFlags.add(me.HasNoneKeywords),[e.Number,\"none\",t[2],t[3],{value:Number.NaN,type:a.Number}];if(2===l){const e=normalizeHue(t);return!1!==e&&(u(t)&&s.syntaxFlags.add(me.HasDimensionValues),e)}if(r(t)){3!==l&&s.syntaxFlags.add(me.HasPercentageValues);let n=normalize(t[4].value,1,0,100);return 1===l?n=normalize(t[4].value,100/150,0,2147483647):3===l&&(n=normalize(t[4].value,100,0,1)),[e.Number,n.toString(),t[2],t[3],{value:n,type:a.Number}]}if(o(t)){3!==l&&s.syntaxFlags.add(me.HasNumberValues);let n=normalize(t[4].value,1,0,100);return 1===l?n=normalize(t[4].value,1,0,2147483647):3===l&&(n=normalize(t[4].value,1,0,1)),[e.Number,n.toString(),t[2],t[3],{value:n,type:a.Number}]}return!1}function lch(e,a){return threeChannelSpaceSeparated(e,normalize_LCH_ChannelValues,he.LCH,[],a)}const de=new Map;for(const[e,a]of Object.entries(G))de.set(e,a);function namedColor(e){const a=de.get(toLowerCaseAZ(e));return!!a&&{colorNotation:he.RGB,channels:[a[0]/255,a[1]/255,a[2]/255],alpha:1,syntaxFlags:new Set([me.ColorKeyword,me.NamedColor])}}function normalize_OKLab_ChannelValues(t,l,s){if(n(t)&&\"none\"===toLowerCaseAZ(t[4].value))return s.syntaxFlags.add(me.HasNoneKeywords),[e.Number,\"none\",t[2],t[3],{value:Number.NaN,type:a.Number}];if(r(t)){3!==l&&s.syntaxFlags.add(me.HasPercentageValues);let n=normalize(t[4].value,100,0,1);return 1===l||2===l?n=normalize(t[4].value,250,-2147483647,2147483647):3===l&&(n=normalize(t[4].value,100,0,1)),[e.Number,n.toString(),t[2],t[3],{value:n,type:a.Number}]}if(o(t)){3!==l&&s.syntaxFlags.add(me.HasNumberValues);let n=normalize(t[4].value,1,0,1);return 1===l||2===l?n=normalize(t[4].value,1,-2147483647,2147483647):3===l&&(n=normalize(t[4].value,1,0,1)),[e.Number,n.toString(),t[2],t[3],{value:n,type:a.Number}]}return!1}function oklab(e,a){return threeChannelSpaceSeparated(e,normalize_OKLab_ChannelValues,he.OKLab,[],a)}function normalize_OKLCH_ChannelValues(t,l,s){if(n(t)&&\"none\"===toLowerCaseAZ(t[4].value))return s.syntaxFlags.add(me.HasNoneKeywords),[e.Number,\"none\",t[2],t[3],{value:Number.NaN,type:a.Number}];if(2===l){const e=normalizeHue(t);return!1!==e&&(u(t)&&s.syntaxFlags.add(me.HasDimensionValues),e)}if(r(t)){3!==l&&s.syntaxFlags.add(me.HasPercentageValues);let n=normalize(t[4].value,100,0,1);return 1===l?n=normalize(t[4].value,250,0,2147483647):3===l&&(n=normalize(t[4].value,100,0,1)),[e.Number,n.toString(),t[2],t[3],{value:n,type:a.Number}]}if(o(t)){3!==l&&s.syntaxFlags.add(me.HasNumberValues);let n=normalize(t[4].value,1,0,1);return 1===l?n=normalize(t[4].value,1,0,2147483647):3===l&&(n=normalize(t[4].value,1,0,1)),[e.Number,n.toString(),t[2],t[3],{value:n,type:a.Number}]}return!1}function oklch(e,a){return threeChannelSpaceSeparated(e,normalize_OKLCH_ChannelValues,he.OKLCH,[],a)}function normalize_legacy_sRGB_ChannelValues(n,t,l){if(r(n)){3===t?l.syntaxFlags.add(me.HasPercentageAlpha):l.syntaxFlags.add(me.HasPercentageValues);const r=normalize(n[4].value,100,0,1);return[e.Number,r.toString(),n[2],n[3],{value:r,type:a.Number}]}if(o(n)){3!==t&&l.syntaxFlags.add(me.HasNumberValues);let r=normalize(n[4].value,255,0,1);return 3===t&&(r=normalize(n[4].value,1,0,1)),[e.Number,r.toString(),n[2],n[3],{value:r,type:a.Number}]}return!1}function normalize_modern_sRGB_ChannelValues(t,l,s){if(n(t)&&\"none\"===t[4].value.toLowerCase())return s.syntaxFlags.add(me.HasNoneKeywords),[e.Number,\"none\",t[2],t[3],{value:Number.NaN,type:a.Number}];if(r(t)){3!==l&&s.syntaxFlags.add(me.HasPercentageValues);let n=normalize(t[4].value,100,-2147483647,2147483647);return 3===l&&(n=normalize(t[4].value,100,0,1)),[e.Number,n.toString(),t[2],t[3],{value:n,type:a.Number}]}if(o(t)){3!==l&&s.syntaxFlags.add(me.HasNumberValues);let n=normalize(t[4].value,255,-2147483647,2147483647);return 3===l&&(n=normalize(t[4].value,1,0,1)),[e.Number,n.toString(),t[2],t[3],{value:n,type:a.Number}]}return!1}function rgb(e,a){if(e.value.some(e=>ne(e)&&s(e.value))){const a=rgbCommaSeparated(e);if(!1!==a)return(!a.syntaxFlags.has(me.HasNumberValues)||!a.syntaxFlags.has(me.HasPercentageValues))&&a}else{const n=rgbSpaceSeparated(e,a);if(!1!==n)return n}return!1}function rgbCommaSeparated(e){return threeChannelLegacySyntax(e,normalize_legacy_sRGB_ChannelValues,he.RGB,[me.LegacyRGB])}function rgbSpaceSeparated(e,a){return threeChannelSpaceSeparated(e,normalize_modern_sRGB_ChannelValues,he.RGB,[],a)}function XYZ_D50_to_sRGB_Gamut(e){const a=x(e);if(A(a))return X(a);let n=e;return n=p(n),n[0]<1e-6&&(n=[0,0,0]),n[0]>.999999&&(n=[1,0,0]),K(Y(n,oklch_to_lin_srgb,lin_srgb_to_oklch))}function oklch_to_lin_srgb(e){return e=I(e),e=O(e),W(e)}function lin_srgb_to_oklch(e){return e=E(e),e=U(e),$(e)}function contrastColor(e,a){let n=!1;for(let r=0;r<e.value.length;r++){const o=e.value[r];if(!ee(o)&&!ae(o)&&(n||(n=a(o),!n)))return!1}if(!n)return!1;n.channels=convertNaNToZero(n.channels),n.channels=XYZ_D50_to_sRGB_Gamut(colorData_to_XYZ_D50(n).channels),n.colorNotation=he.sRGB;const r={colorNotation:he.sRGB,channels:[0,0,0],alpha:1,syntaxFlags:new Set([me.ContrastColor,me.Experimental])},o=j(n.channels,[1,1,1]),t=j(n.channels,[0,0,0]);return r.channels=o>t?[1,1,1]:[0,0,0],r}function alpha(e,a){let r,s,u=!1,i=!1,c=!1;const h={colorNotation:he.sRGB,channels:[0,0,0],alpha:1,syntaxFlags:new Set([])};for(let m=0;m<e.value.length;m++){let p=e.value[m];if(ee(p)||ae(p))for(;ee(e.value[m+1])||ae(e.value[m+1]);)m++;else if(c&&!u&&!i&&ne(p)&&t(p.value)&&\"/\"===p.value[4].value)u=!0;else{if(re(p)&&ie.has(toLowerCaseAZ(p.getName()))){const[[e]]=ce([[p]],{censorIntoStandardRepresentableValues:!0,globals:s,precision:-1,toCanonicalUnits:!0,rawPercentages:!0});if(!e||!ne(e)||!l(e.value))return!1;Number.isNaN(e.value[4].value)&&(e.value[4].value=0),p=e}if(u||i||!ne(p)||!n(p.value)||\"from\"!==toLowerCaseAZ(p.value[4].value)){if(!u)return!1;if(i)return!1;if(ne(p)){if(n(p.value)&&\"alpha\"===toLowerCaseAZ(p.value[4].value)&&r&&r.has(\"alpha\")){h.alpha=r.get(\"alpha\")[4].value,i=!0;continue}const e=normalize_Color_ChannelValues(p.value,3,h);if(!e||!o(e))return!1;h.alpha=new oe(e),i=!0;continue}if(re(p)){const e=le([[p]],e=>{if(ne(e)&&n(e.value)&&\"alpha\"===toLowerCaseAZ(e.value[4].value)&&r&&r.has(\"alpha\"))return new oe(r.get(\"alpha\"))});h.alpha=e[0][0],i=!0;continue}return!1}if(c)return!1;for(;ee(e.value[m+1])||ae(e.value[m+1]);)m++;if(m++,p=e.value[m],c=a(p),!1===c)return!1;r=normalizeRelativeColorDataChannels(c),s=noneToZeroInRelativeColorDataChannels(r),h.syntaxFlags=new Set(c.syntaxFlags),h.syntaxFlags.add(me.RelativeAlphaSyntax),h.channels=[...c.channels],h.colorNotation=c.colorNotation,h.alpha=c.alpha}}return!!r&&h}function XYZ_D50_to_P3_Gamut(e){const a=C(e);if(A(a))return X(a);let n=e;return n=p(n),n[0]<1e-6&&(n=[0,0,0]),n[0]>.999999&&(n=[1,0,0]),q(Y(n,oklch_to_lin_p3,lin_p3_to_oklch))}function oklch_to_lin_p3(e){return e=I(e),e=O(e),J(e)}function lin_p3_to_oklch(e){return e=Q(e),e=U(e),$(e)}function toPrecision(e,a=7){e=+e,a=+a;const n=(Math.floor(Math.abs(e))+\"\").length;if(a>n)return+e.toFixed(a-n);{const r=10**(n-a);return Math.round(e/r)*r}}function serializeWithAlpha(n,r,o,t){const l=[e.CloseParen,\")\",-1,-1,void 0];if(\"number\"==typeof n.alpha){const s=Math.min(1,Math.max(0,toPrecision(Number.isNaN(n.alpha)?0:n.alpha)));return 1===toPrecision(s,4)?new se(r,l,t):new se(r,l,[...t,new ue([o]),new oe([e.Delim,\"/\",-1,-1,{value:\"/\"}]),new ue([o]),new oe([e.Number,toPrecision(s,4).toString(),-1,-1,{value:n.alpha,type:a.Integer}])])}return new se(r,l,[...t,new ue([o]),new oe([e.Delim,\"/\",-1,-1,{value:\"/\"}]),new ue([o]),n.alpha])}function serializeP3(n,r=!0){n.channels=convertPowerlessComponentsToZeroValuesForDisplay(n.channels,n.colorNotation);let o=n.channels.map(e=>Number.isNaN(e)?0:e);r?o=XYZ_D50_to_P3_Gamut(colorData_to_XYZ_D50(n).channels):n.colorNotation!==he.Display_P3&&(o=C(colorData_to_XYZ_D50(n).channels));const t=r?Math.min(1,Math.max(0,toPrecision(o[0],6))):toPrecision(o[0],6),l=r?Math.min(1,Math.max(0,toPrecision(o[1],6))):toPrecision(o[1],6),s=r?Math.min(1,Math.max(0,toPrecision(o[2],6))):toPrecision(o[2],6),u=[e.Function,\"color(\",-1,-1,{value:\"color\"}],i=[e.Whitespace,\" \",-1,-1,void 0];return serializeWithAlpha(n,u,i,[new oe([e.Ident,\"display-p3\",-1,-1,{value:\"display-p3\"}]),new ue([i]),new oe([e.Number,t.toString(),-1,-1,{value:o[0],type:a.Number}]),new ue([i]),new oe([e.Number,l.toString(),-1,-1,{value:o[1],type:a.Number}]),new ue([i]),new oe([e.Number,s.toString(),-1,-1,{value:o[2],type:a.Number}])])}function serializeRGB(n,r=!0){n.channels=convertPowerlessComponentsToZeroValuesForDisplay(n.channels,n.colorNotation);let o=n.channels.map(e=>Number.isNaN(e)?0:e);o=r?XYZ_D50_to_sRGB_Gamut(colorData_to_XYZ_D50(n).channels):x(colorData_to_XYZ_D50(n).channels);const t=Math.min(255,Math.max(0,Math.round(255*toPrecision(o[0])))),l=Math.min(255,Math.max(0,Math.round(255*toPrecision(o[1])))),s=Math.min(255,Math.max(0,Math.round(255*toPrecision(o[2])))),u=[e.CloseParen,\")\",-1,-1,void 0],i=[e.Whitespace,\" \",-1,-1,void 0],c=[e.Comma,\",\",-1,-1,void 0],h=[new oe([e.Number,t.toString(),-1,-1,{value:Math.min(255,255*Math.max(0,o[0])),type:a.Integer}]),new oe(c),new ue([i]),new oe([e.Number,l.toString(),-1,-1,{value:Math.min(255,255*Math.max(0,o[1])),type:a.Integer}]),new oe(c),new ue([i]),new oe([e.Number,s.toString(),-1,-1,{value:Math.min(255,255*Math.max(0,o[2])),type:a.Integer}])];if(\"number\"==typeof n.alpha){const r=Math.min(1,Math.max(0,toPrecision(Number.isNaN(n.alpha)?0:n.alpha)));return 1===toPrecision(r,4)?new se([e.Function,\"rgb(\",-1,-1,{value:\"rgb\"}],u,h):new se([e.Function,\"rgba(\",-1,-1,{value:\"rgba\"}],u,[...h,new oe(c),new ue([i]),new oe([e.Number,toPrecision(r,4).toString(),-1,-1,{value:n.alpha,type:a.Number}])])}return new se([e.Function,\"rgba(\",-1,-1,{value:\"rgba\"}],u,[...h,new oe(c),new ue([i]),n.alpha])}function serializeHSL(n,r=!0){n.channels=convertPowerlessComponentsToZeroValuesForDisplay(n.channels,n.colorNotation);let o=n.channels.map(e=>Number.isNaN(e)?0:e);o=g(r?T(XYZ_D50_to_sRGB_Gamut(colorData_to_XYZ_D50(n).channels)):colorData_to_XYZ_D50(n).channels),o=o.map(e=>Number.isNaN(e)?0:e);const t=Math.min(360,Math.max(0,Math.round(toPrecision(o[0])))),l=Math.min(100,Math.max(0,Math.round(toPrecision(o[1])))),s=Math.min(100,Math.max(0,Math.round(toPrecision(o[2])))),u=[e.CloseParen,\")\",-1,-1,void 0],i=[e.Whitespace,\" \",-1,-1,void 0],c=[e.Comma,\",\",-1,-1,void 0],h=[new oe([e.Number,t.toString(),-1,-1,{value:o[0],type:a.Integer}]),new oe(c),new ue([i]),new oe([e.Percentage,l.toString()+\"%\",-1,-1,{value:o[1]}]),new oe(c),new ue([i]),new oe([e.Percentage,s.toString()+\"%\",-1,-1,{value:o[2]}])];if(\"number\"==typeof n.alpha){const r=Math.min(1,Math.max(0,toPrecision(Number.isNaN(n.alpha)?0:n.alpha)));return 1===toPrecision(r,4)?new se([e.Function,\"hsl(\",-1,-1,{value:\"hsl\"}],u,h):new se([e.Function,\"hsla(\",-1,-1,{value:\"hsla\"}],u,[...h,new oe(c),new ue([i]),new oe([e.Number,toPrecision(r,4).toString(),-1,-1,{value:n.alpha,type:a.Number}])])}return new se([e.Function,\"hsla(\",-1,-1,{value:\"hsla\"}],u,[...h,new oe(c),new ue([i]),n.alpha])}function serializeOKLCH(n){n.channels=convertPowerlessComponentsToZeroValuesForDisplay(n.channels,n.colorNotation);let r=n.channels.map(e=>Number.isNaN(e)?0:e);n.colorNotation!==he.OKLCH&&(r=p(colorData_to_XYZ_D50(n).channels));const o=toPrecision(r[0],6),t=toPrecision(r[1],6),l=toPrecision(r[2],6),s=[e.Function,\"oklch(\",-1,-1,{value:\"oklch\"}],u=[e.Whitespace,\" \",-1,-1,void 0];return serializeWithAlpha(n,s,u,[new oe([e.Number,o.toString(),-1,-1,{value:r[0],type:a.Number}]),new ue([u]),new oe([e.Number,t.toString(),-1,-1,{value:r[1],type:a.Number}]),new ue([u]),new oe([e.Number,l.toString(),-1,-1,{value:r[2],type:a.Number}])])}function color(e){if(re(e)){switch(toLowerCaseAZ(e.getName())){case\"rgb\":case\"rgba\":return rgb(e,color);case\"hsl\":case\"hsla\":return hsl(e,color);case\"hwb\":return a=color,threeChannelSpaceSeparated(e,normalize_HWB_ChannelValues,he.HWB,[],a);case\"lab\":return lab(e,color);case\"lch\":return lch(e,color);case\"oklab\":return oklab(e,color);case\"oklch\":return oklch(e,color);case\"color\":return color$1(e,color);case\"color-mix\":return colorMix(e,color);case\"contrast-color\":return contrastColor(e,color);case\"alpha\":return alpha(e,color)}}var a;if(ne(e)){if(i(e.value))return hex(e.value);if(n(e.value)){const a=namedColor(e.value[4].value);return!1!==a?a:\"transparent\"===toLowerCaseAZ(e.value[4].value)&&{colorNotation:he.RGB,channels:[0,0,0],alpha:0,syntaxFlags:new Set([me.ColorKeyword])}}}return!1}export{he as ColorNotation,me as SyntaxFlag,color,colorDataFitsDisplayP3_Gamut,colorDataFitsRGB_Gamut,serializeHSL,serializeOKLCH,serializeP3,serializeRGB};\n","/**\n * relative-color\n */\n\nimport { SyntaxFlag, color as colorParser } from '@csstools/css-color-parser';\nimport {\n  ComponentValue,\n  parseComponentValue\n} from '@csstools/css-parser-algorithms';\nimport { CSSToken, TokenType, tokenize } from '@csstools/css-tokenizer';\nimport {\n  CacheItem,\n  NullObject,\n  createCacheKey,\n  getCache,\n  setCache\n} from './cache';\nimport { NAMED_COLORS, convertColorToRgb } from './color';\nimport { isString, isStringOrNumber } from './common';\nimport { resolveDimension, serializeCalc } from './css-calc';\nimport { resolveColor } from './resolve';\nimport { roundToPrecision, splitValue } from './util';\nimport {\n  ColorChannels,\n  MatchedRegExp,\n  Options,\n  StringColorChannels\n} from './typedef';\n\n/* constants */\nimport {\n  CS_LAB,\n  CS_LCH,\n  FN_LIGHT_DARK,\n  FN_REL,\n  FN_REL_CAPT,\n  FN_VAR,\n  NONE,\n  SYN_COLOR_TYPE,\n  SYN_FN_MATH_START,\n  SYN_FN_VAR,\n  SYN_MIX,\n  VAL_SPEC\n} from './constant';\nconst {\n  CloseParen: PAREN_CLOSE,\n  Comment: COMMENT,\n  Delim: DELIM,\n  Dimension: DIM,\n  EOF,\n  Function: FUNC,\n  Ident: IDENT,\n  Number: NUM,\n  OpenParen: PAREN_OPEN,\n  Percentage: PCT,\n  Whitespace: W_SPACE\n} = TokenType;\nconst { HasNoneKeywords: KEY_NONE } = SyntaxFlag;\nconst NAMESPACE = 'relative-color';\n\n/* numeric constants */\nconst OCT = 8;\nconst DEC = 10;\nconst HEX = 16;\nconst MAX_PCT = 100;\nconst MAX_RGB = 255;\n\n/* type definitions */\n/**\n * @type NumberOrStringColorChannels - color channel\n */\ntype NumberOrStringColorChannels = ColorChannels & StringColorChannels;\n\n/* regexp */\nconst REG_COLOR_CAPT = new RegExp(\n  `^${FN_REL}(${SYN_COLOR_TYPE}|${SYN_MIX})\\\\s+`\n);\nconst REG_CS_HSL = /(?:hsla?|hwb)$/;\nconst REG_CS_CIE = new RegExp(`^(?:${CS_LAB}|${CS_LCH})$`);\nconst REG_FN_CALC_SUM = /^(?:abs|sig?n|cos|tan)\\(/;\nconst REG_FN_MATH_START = new RegExp(SYN_FN_MATH_START);\nconst REG_FN_REL = new RegExp(FN_REL);\nconst REG_FN_REL_CAPT = new RegExp(`^${FN_REL_CAPT}`);\nconst REG_FN_REL_START = new RegExp(`^${FN_REL}`);\nconst REG_FN_VAR = new RegExp(SYN_FN_VAR);\n\n/**\n * resolve relative color channels\n * @param tokens - CSS tokens\n * @param [opt] - options\n * @returns resolved color channels\n */\nexport function resolveColorChannels(\n  tokens: CSSToken[],\n  opt: Options = {}\n): NumberOrStringColorChannels | NullObject {\n  if (!Array.isArray(tokens)) {\n    throw new TypeError(`${tokens} is not an array.`);\n  }\n  const { colorSpace = '', format = '' } = opt;\n  const colorChannels = new Map([\n    ['color', ['r', 'g', 'b', 'alpha']],\n    ['hsl', ['h', 's', 'l', 'alpha']],\n    ['hsla', ['h', 's', 'l', 'alpha']],\n    ['hwb', ['h', 'w', 'b', 'alpha']],\n    ['lab', ['l', 'a', 'b', 'alpha']],\n    ['lch', ['l', 'c', 'h', 'alpha']],\n    ['oklab', ['l', 'a', 'b', 'alpha']],\n    ['oklch', ['l', 'c', 'h', 'alpha']],\n    ['rgb', ['r', 'g', 'b', 'alpha']],\n    ['rgba', ['r', 'g', 'b', 'alpha']]\n  ]);\n  const colorChannel = colorChannels.get(colorSpace);\n  // invalid color channel\n  if (!colorChannel) {\n    return new NullObject();\n  }\n  const mathFunc = new Set();\n  const channels: [\n    (number | string)[],\n    (number | string)[],\n    (number | string)[],\n    (number | string)[]\n  ] = [[], [], [], []];\n  let i = 0;\n  let nest = 0;\n  let func = '';\n  let precededPct = false;\n  while (tokens.length) {\n    const token = tokens.shift();\n    if (!Array.isArray(token)) {\n      throw new TypeError(`${token} is not an array.`);\n    }\n    const [type, value, , , detail] = token as [\n      TokenType,\n      string,\n      number,\n      number,\n      { value: string | number } | undefined\n    ];\n    const channel = channels[i];\n    if (Array.isArray(channel)) {\n      switch (type) {\n        case DELIM: {\n          if (func) {\n            if (\n              (value === '+' || value === '-') &&\n              precededPct &&\n              !REG_FN_CALC_SUM.test(func)\n            ) {\n              return new NullObject();\n            }\n            precededPct = false;\n            channel.push(value);\n          }\n          break;\n        }\n        case DIM: {\n          if (!func || !REG_FN_CALC_SUM.test(func)) {\n            return new NullObject();\n          }\n          const resolvedValue = resolveDimension(token, opt);\n          if (isString(resolvedValue)) {\n            channel.push(resolvedValue);\n          } else {\n            channel.push(value);\n          }\n          break;\n        }\n        case FUNC: {\n          channel.push(value);\n          func = value;\n          nest++;\n          if (REG_FN_MATH_START.test(value)) {\n            mathFunc.add(nest);\n          }\n          break;\n        }\n        case IDENT: {\n          // invalid channel key\n          if (!colorChannel.includes(value)) {\n            return new NullObject();\n          }\n          channel.push(value);\n          if (!func) {\n            i++;\n          }\n          break;\n        }\n        case NUM: {\n          channel.push(Number(detail?.value));\n          if (!func) {\n            i++;\n          }\n          break;\n        }\n        case PAREN_OPEN: {\n          channel.push(value);\n          nest++;\n          break;\n        }\n        case PAREN_CLOSE: {\n          if (func) {\n            const lastValue = channel[channel.length - 1];\n            if (lastValue === ' ') {\n              channel.splice(-1, 1, value);\n            } else {\n              channel.push(value);\n            }\n            if (mathFunc.has(nest)) {\n              mathFunc.delete(nest);\n            }\n            nest--;\n            if (nest === 0) {\n              func = '';\n              i++;\n            }\n          }\n          break;\n        }\n        case PCT: {\n          if (!func) {\n            return new NullObject();\n          } else if (!REG_FN_CALC_SUM.test(func)) {\n            const lastValue = channel.toReversed().find(v => v !== ' ');\n            if (lastValue === '+' || lastValue === '-') {\n              return new NullObject();\n            } else if (lastValue === '*' || lastValue === '/') {\n              precededPct = false;\n            } else {\n              precededPct = true;\n            }\n          }\n          channel.push(Number(detail?.value) / MAX_PCT);\n          if (!func) {\n            i++;\n          }\n          break;\n        }\n        case W_SPACE: {\n          if (channel.length && func) {\n            const lastValue = channel[channel.length - 1];\n            if (typeof lastValue === 'number') {\n              channel.push(value);\n            } else if (\n              isString(lastValue) &&\n              !lastValue.endsWith('(') &&\n              lastValue !== ' '\n            ) {\n              channel.push(value);\n            }\n          }\n          break;\n        }\n        default: {\n          if (type !== COMMENT && type !== EOF && func) {\n            channel.push(value);\n          }\n        }\n      }\n    }\n  }\n  const channelValues = [];\n  for (const channel of channels) {\n    if (channel.length === 1) {\n      const [resolvedValue] = channel;\n      if (isStringOrNumber(resolvedValue)) {\n        channelValues.push(resolvedValue);\n      }\n    } else if (channel.length) {\n      const resolvedValue = serializeCalc(channel.join(''), {\n        format\n      });\n      channelValues.push(resolvedValue);\n    }\n  }\n  return channelValues as NumberOrStringColorChannels;\n}\n\n/**\n * extract origin color\n * @param value - CSS color value\n * @param [opt] - options\n * @returns origin color value\n */\nexport function extractOriginColor(\n  value: string,\n  opt: Options = {}\n): string | NullObject {\n  const { colorScheme = 'normal', currentColor = '', format = '' } = opt;\n  if (isString(value)) {\n    value = value.toLowerCase().trim();\n    if (!value) {\n      return new NullObject();\n    }\n    if (!REG_FN_REL_START.test(value)) {\n      return value;\n    }\n  } else {\n    return new NullObject();\n  }\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'extractOriginColor',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    if (cachedResult.isNull) {\n      return cachedResult as NullObject;\n    }\n    return cachedResult.item as string;\n  }\n  if (/currentcolor/.test(value)) {\n    if (currentColor) {\n      value = value.replace(/currentcolor/g, currentColor);\n    } else {\n      setCache(cacheKey, null);\n      return new NullObject();\n    }\n  }\n  let colorSpace = '';\n  if (REG_FN_REL_CAPT.test(value)) {\n    [, colorSpace] = value.match(REG_FN_REL_CAPT) as MatchedRegExp;\n  }\n  opt.colorSpace = colorSpace;\n  if (value.includes(FN_LIGHT_DARK)) {\n    const colorParts = value\n      .replace(new RegExp(`^${colorSpace}\\\\(`), '')\n      .replace(/\\)$/, '');\n    const [, originColor = ''] = splitValue(colorParts);\n    const specifiedOriginColor = resolveColor(originColor, {\n      colorScheme,\n      format: VAL_SPEC\n    }) as string;\n    if (specifiedOriginColor === '') {\n      setCache(cacheKey, null);\n      return new NullObject();\n    }\n    if (format === VAL_SPEC) {\n      value = value.replace(originColor, specifiedOriginColor);\n    } else {\n      const resolvedOriginColor = resolveColor(specifiedOriginColor, opt);\n      if (isString(resolvedOriginColor)) {\n        value = value.replace(originColor, resolvedOriginColor);\n      }\n    }\n  }\n  if (REG_COLOR_CAPT.test(value)) {\n    const [, originColor] = value.match(REG_COLOR_CAPT) as MatchedRegExp;\n    const [, restValue] = value.split(originColor) as MatchedRegExp;\n    if (/^[a-z]+$/.test(originColor)) {\n      if (\n        !/^transparent$/.test(originColor) &&\n        !Object.hasOwn(NAMED_COLORS, originColor)\n      ) {\n        setCache(cacheKey, null);\n        return new NullObject();\n      }\n    } else if (format === VAL_SPEC) {\n      const resolvedOriginColor = resolveColor(originColor, opt);\n      if (isString(resolvedOriginColor)) {\n        value = value.replace(originColor, resolvedOriginColor);\n      }\n    }\n    if (format === VAL_SPEC) {\n      const tokens = tokenize({ css: restValue });\n      const channelValues = resolveColorChannels(tokens, opt);\n      if (channelValues instanceof NullObject) {\n        setCache(cacheKey, null);\n        return channelValues;\n      }\n      const [v1, v2, v3, v4] = channelValues;\n      let channelValue = '';\n      if (isStringOrNumber(v4)) {\n        channelValue = ` ${v1} ${v2} ${v3} / ${v4})`;\n      } else {\n        channelValue = ` ${channelValues.join(' ')})`;\n      }\n      if (restValue !== channelValue) {\n        value = value.replace(restValue, channelValue);\n      }\n    }\n    // nested relative color\n  } else {\n    const [, restValue] = value.split(REG_FN_REL_START) as MatchedRegExp;\n    const tokens = tokenize({ css: restValue });\n    const originColor: string[] = [];\n    let nest = 0;\n    while (tokens.length) {\n      const [type, tokenValue] = tokens.shift() as [TokenType, string];\n      switch (type) {\n        case FUNC:\n        case PAREN_OPEN: {\n          originColor.push(tokenValue);\n          nest++;\n          break;\n        }\n        case PAREN_CLOSE: {\n          const lastValue = originColor[originColor.length - 1];\n          if (lastValue === ' ') {\n            originColor.splice(-1, 1, tokenValue);\n          } else if (isString(lastValue)) {\n            originColor.push(tokenValue);\n          }\n          nest--;\n          break;\n        }\n        case W_SPACE: {\n          const lastValue = originColor[originColor.length - 1];\n          if (\n            isString(lastValue) &&\n            !lastValue.endsWith('(') &&\n            lastValue !== ' '\n          ) {\n            originColor.push(tokenValue);\n          }\n          break;\n        }\n        default: {\n          if (type !== COMMENT && type !== EOF) {\n            originColor.push(tokenValue);\n          }\n        }\n      }\n      if (nest === 0) {\n        break;\n      }\n    }\n    const resolvedOriginColor = resolveRelativeColor(\n      originColor.join('').trim(),\n      opt\n    );\n    if (resolvedOriginColor instanceof NullObject) {\n      setCache(cacheKey, null);\n      return resolvedOriginColor;\n    }\n    const channelValues = resolveColorChannels(tokens, opt);\n    if (channelValues instanceof NullObject) {\n      setCache(cacheKey, null);\n      return channelValues;\n    }\n    const [v1, v2, v3, v4] = channelValues;\n    let channelValue = '';\n    if (isStringOrNumber(v4)) {\n      channelValue = ` ${v1} ${v2} ${v3} / ${v4})`;\n    } else {\n      channelValue = ` ${channelValues.join(' ')})`;\n    }\n    value = value.replace(restValue, `${resolvedOriginColor}${channelValue}`);\n  }\n  setCache(cacheKey, value);\n  return value;\n}\n\n/**\n * resolve relative color\n * @param value - CSS relative color value\n * @param [opt] - options\n * @returns resolved value\n */\nexport function resolveRelativeColor(\n  value: string,\n  opt: Options = {}\n): string | NullObject {\n  const { format = '' } = opt;\n  if (isString(value)) {\n    if (REG_FN_VAR.test(value)) {\n      if (format === VAL_SPEC) {\n        return value;\n        // var() must be resolved before resolveRelativeColor()\n      } else {\n        throw new SyntaxError(`Unexpected token ${FN_VAR} found.`);\n      }\n    } else if (!REG_FN_REL.test(value)) {\n      return value;\n    }\n    value = value.toLowerCase().trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'resolveRelativeColor',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    if (cachedResult.isNull) {\n      return cachedResult as NullObject;\n    }\n    return cachedResult.item as string;\n  }\n  const originColor = extractOriginColor(value, opt);\n  if (originColor instanceof NullObject) {\n    setCache(cacheKey, null);\n    return originColor;\n  }\n  value = originColor;\n  if (format === VAL_SPEC) {\n    if (value.startsWith('rgba(')) {\n      value = value.replace(/^rgba\\(/, 'rgb(');\n    } else if (value.startsWith('hsla(')) {\n      value = value.replace(/^hsla\\(/, 'hsl(');\n    }\n    return value;\n  }\n  const tokens = tokenize({ css: value });\n  const components = parseComponentValue(tokens) as ComponentValue;\n  const parsedComponents = colorParser(components);\n  if (!parsedComponents) {\n    setCache(cacheKey, null);\n    return new NullObject();\n  }\n  const {\n    alpha: alphaComponent,\n    channels: channelsComponent,\n    colorNotation,\n    syntaxFlags\n  } = parsedComponents;\n  let alpha: number | string;\n  if (Number.isNaN(Number(alphaComponent))) {\n    if (syntaxFlags instanceof Set && syntaxFlags.has(KEY_NONE)) {\n      alpha = NONE;\n    } else {\n      alpha = 0;\n    }\n  } else {\n    alpha = roundToPrecision(Number(alphaComponent), OCT);\n  }\n  let v1: number | string;\n  let v2: number | string;\n  let v3: number | string;\n  [v1, v2, v3] = channelsComponent;\n  let resolvedValue;\n  if (REG_CS_CIE.test(colorNotation)) {\n    const hasNone = syntaxFlags instanceof Set && syntaxFlags.has(KEY_NONE);\n    if (Number.isNaN(v1)) {\n      if (hasNone) {\n        v1 = NONE;\n      } else {\n        v1 = 0;\n      }\n    } else {\n      v1 = roundToPrecision(v1, HEX);\n    }\n    if (Number.isNaN(v2)) {\n      if (hasNone) {\n        v2 = NONE;\n      } else {\n        v2 = 0;\n      }\n    } else {\n      v2 = roundToPrecision(v2, HEX);\n    }\n    if (Number.isNaN(v3)) {\n      if (hasNone) {\n        v3 = NONE;\n      } else {\n        v3 = 0;\n      }\n    } else {\n      v3 = roundToPrecision(v3, HEX);\n    }\n    if (alpha === 1) {\n      resolvedValue = `${colorNotation}(${v1} ${v2} ${v3})`;\n    } else {\n      resolvedValue = `${colorNotation}(${v1} ${v2} ${v3} / ${alpha})`;\n    }\n  } else if (REG_CS_HSL.test(colorNotation)) {\n    if (Number.isNaN(v1)) {\n      v1 = 0;\n    }\n    if (Number.isNaN(v2)) {\n      v2 = 0;\n    }\n    if (Number.isNaN(v3)) {\n      v3 = 0;\n    }\n    let [r, g, b] = convertColorToRgb(\n      `${colorNotation}(${v1} ${v2} ${v3} / ${alpha})`\n    ) as ColorChannels;\n    r = roundToPrecision(r / MAX_RGB, DEC);\n    g = roundToPrecision(g / MAX_RGB, DEC);\n    b = roundToPrecision(b / MAX_RGB, DEC);\n    if (alpha === 1) {\n      resolvedValue = `color(srgb ${r} ${g} ${b})`;\n    } else {\n      resolvedValue = `color(srgb ${r} ${g} ${b} / ${alpha})`;\n    }\n  } else {\n    const cs = colorNotation === 'rgb' ? 'srgb' : colorNotation;\n    const hasNone = syntaxFlags instanceof Set && syntaxFlags.has(KEY_NONE);\n    if (Number.isNaN(v1)) {\n      if (hasNone) {\n        v1 = NONE;\n      } else {\n        v1 = 0;\n      }\n    } else {\n      v1 = roundToPrecision(v1, DEC);\n    }\n    if (Number.isNaN(v2)) {\n      if (hasNone) {\n        v2 = NONE;\n      } else {\n        v2 = 0;\n      }\n    } else {\n      v2 = roundToPrecision(v2, DEC);\n    }\n    if (Number.isNaN(v3)) {\n      if (hasNone) {\n        v3 = NONE;\n      } else {\n        v3 = 0;\n      }\n    } else {\n      v3 = roundToPrecision(v3, DEC);\n    }\n    if (alpha === 1) {\n      resolvedValue = `color(${cs} ${v1} ${v2} ${v3})`;\n    } else {\n      resolvedValue = `color(${cs} ${v1} ${v2} ${v3} / ${alpha})`;\n    }\n  }\n  setCache(cacheKey, resolvedValue);\n  return resolvedValue;\n}\n","/**\n * resolve\n */\n\nimport {\n  CacheItem,\n  NullObject,\n  createCacheKey,\n  getCache,\n  setCache\n} from './cache';\nimport {\n  convertRgbToHex,\n  resolveColorFunc,\n  resolveColorMix,\n  resolveColorValue\n} from './color';\nimport { isString } from './common';\nimport { cssCalc } from './css-calc';\nimport { resolveVar } from './css-var';\nimport { resolveRelativeColor } from './relative-color';\nimport { splitValue } from './util';\nimport {\n  ComputedColorChannels,\n  Options,\n  SpecifiedColorChannels\n} from './typedef';\n\n/* constants */\nimport {\n  FN_COLOR,\n  FN_MIX,\n  SYN_FN_CALC,\n  SYN_FN_LIGHT_DARK,\n  SYN_FN_REL,\n  SYN_FN_VAR,\n  VAL_COMP,\n  VAL_SPEC\n} from './constant';\nconst NAMESPACE = 'resolve';\nconst RGB_TRANSPARENT = 'rgba(0, 0, 0, 0)';\n\n/* regexp */\nconst REG_FN_CALC = new RegExp(SYN_FN_CALC);\nconst REG_FN_LIGHT_DARK = new RegExp(SYN_FN_LIGHT_DARK);\nconst REG_FN_REL = new RegExp(SYN_FN_REL);\nconst REG_FN_VAR = new RegExp(SYN_FN_VAR);\n\n/**\n * resolve color\n * @param value - CSS color value\n * @param [opt] - options\n * @returns resolved color\n */\nexport const resolveColor = (\n  value: string,\n  opt: Options = {}\n): string | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const {\n    colorScheme = 'normal',\n    currentColor = '',\n    format = VAL_COMP,\n    nullable = false\n  } = opt;\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'resolve',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    if (cachedResult.isNull) {\n      return cachedResult as NullObject;\n    }\n    return cachedResult.item as string;\n  }\n  if (REG_FN_VAR.test(value)) {\n    if (format === VAL_SPEC) {\n      setCache(cacheKey, value);\n      return value;\n    }\n    const resolvedValue = resolveVar(value, opt);\n    if (resolvedValue instanceof NullObject) {\n      switch (format) {\n        case 'hex':\n        case 'hexAlpha': {\n          setCache(cacheKey, resolvedValue);\n          return resolvedValue;\n        }\n        default: {\n          if (nullable) {\n            setCache(cacheKey, resolvedValue);\n            return resolvedValue;\n          }\n          const res = RGB_TRANSPARENT;\n          setCache(cacheKey, res);\n          return res;\n        }\n      }\n    } else {\n      value = resolvedValue;\n    }\n  }\n  if (opt.format !== format) {\n    opt.format = format;\n  }\n  value = value.toLowerCase();\n  if (REG_FN_LIGHT_DARK.test(value) && value.endsWith(')')) {\n    const colorParts = value.replace(REG_FN_LIGHT_DARK, '').replace(/\\)$/, '');\n    const [light = '', dark = ''] = splitValue(colorParts, {\n      delimiter: ','\n    });\n    if (light && dark) {\n      if (format === VAL_SPEC) {\n        const lightColor = resolveColor(light, opt);\n        const darkColor = resolveColor(dark, opt);\n        let res;\n        if (lightColor && darkColor) {\n          res = `light-dark(${lightColor}, ${darkColor})`;\n        } else {\n          res = '';\n        }\n        setCache(cacheKey, res);\n        return res;\n      }\n      let resolvedValue;\n      if (colorScheme === 'dark') {\n        resolvedValue = resolveColor(dark, opt);\n      } else {\n        resolvedValue = resolveColor(light, opt);\n      }\n      let res;\n      if (resolvedValue instanceof NullObject) {\n        if (nullable) {\n          res = resolvedValue;\n        } else {\n          res = RGB_TRANSPARENT;\n        }\n      } else {\n        res = resolvedValue;\n      }\n      setCache(cacheKey, res);\n      return res;\n    }\n    // invalid value\n    switch (format) {\n      case VAL_SPEC: {\n        setCache(cacheKey, '');\n        return '';\n      }\n      case 'hex':\n      case 'hexAlpha': {\n        setCache(cacheKey, null);\n        return new NullObject();\n      }\n      case VAL_COMP:\n      default: {\n        const res = RGB_TRANSPARENT;\n        setCache(cacheKey, res);\n        return res;\n      }\n    }\n  }\n  if (REG_FN_REL.test(value)) {\n    const resolvedValue = resolveRelativeColor(value, opt);\n    if (format === VAL_COMP) {\n      let res;\n      if (resolvedValue instanceof NullObject) {\n        if (nullable) {\n          res = resolvedValue;\n        } else {\n          res = RGB_TRANSPARENT;\n        }\n      } else {\n        res = resolvedValue;\n      }\n      setCache(cacheKey, res);\n      return res;\n    }\n    if (format === VAL_SPEC) {\n      let res = '';\n      if (resolvedValue instanceof NullObject) {\n        res = '';\n      } else {\n        res = resolvedValue;\n      }\n      setCache(cacheKey, res);\n      return res;\n    }\n    if (resolvedValue instanceof NullObject) {\n      value = '';\n    } else {\n      value = resolvedValue;\n    }\n  }\n  if (REG_FN_CALC.test(value)) {\n    value = cssCalc(value, opt);\n  }\n  let cs = '';\n  let r = NaN;\n  let g = NaN;\n  let b = NaN;\n  let alpha = NaN;\n  if (value === 'transparent') {\n    switch (format) {\n      case VAL_SPEC: {\n        setCache(cacheKey, value);\n        return value;\n      }\n      case 'hex': {\n        setCache(cacheKey, null);\n        return new NullObject();\n      }\n      case 'hexAlpha': {\n        const res = '#00000000';\n        setCache(cacheKey, res);\n        return res;\n      }\n      case VAL_COMP:\n      default: {\n        const res = RGB_TRANSPARENT;\n        setCache(cacheKey, res);\n        return res;\n      }\n    }\n  } else if (value === 'currentcolor') {\n    if (format === VAL_SPEC) {\n      setCache(cacheKey, value);\n      return value;\n    }\n    if (currentColor) {\n      let resolvedValue;\n      if (currentColor.startsWith(FN_MIX)) {\n        resolvedValue = resolveColorMix(currentColor, opt);\n      } else if (currentColor.startsWith(FN_COLOR)) {\n        resolvedValue = resolveColorFunc(currentColor, opt);\n      } else {\n        resolvedValue = resolveColorValue(currentColor, opt);\n      }\n      if (resolvedValue instanceof NullObject) {\n        setCache(cacheKey, resolvedValue);\n        return resolvedValue;\n      }\n      [cs, r, g, b, alpha] = resolvedValue as ComputedColorChannels;\n    } else if (format === VAL_COMP) {\n      const res = RGB_TRANSPARENT;\n      setCache(cacheKey, res);\n      return res;\n    }\n  } else if (format === VAL_SPEC) {\n    if (value.startsWith(FN_MIX)) {\n      const res = resolveColorMix(value, opt) as string;\n      setCache(cacheKey, res);\n      return res;\n    } else if (value.startsWith(FN_COLOR)) {\n      const [scs, rr, gg, bb, aa] = resolveColorFunc(\n        value,\n        opt\n      ) as SpecifiedColorChannels;\n      let res = '';\n      if (aa === 1) {\n        res = `color(${scs} ${rr} ${gg} ${bb})`;\n      } else {\n        res = `color(${scs} ${rr} ${gg} ${bb} / ${aa})`;\n      }\n      setCache(cacheKey, res);\n      return res;\n    } else {\n      const rgb = resolveColorValue(value, opt);\n      if (isString(rgb)) {\n        setCache(cacheKey, rgb);\n        return rgb;\n      }\n      const [scs, rr, gg, bb, aa] = rgb as SpecifiedColorChannels;\n      let res = '';\n      if (scs === 'rgb') {\n        if (aa === 1) {\n          res = `${scs}(${rr}, ${gg}, ${bb})`;\n        } else {\n          res = `${scs}a(${rr}, ${gg}, ${bb}, ${aa})`;\n        }\n      } else if (aa === 1) {\n        res = `${scs}(${rr} ${gg} ${bb})`;\n      } else {\n        res = `${scs}(${rr} ${gg} ${bb} / ${aa})`;\n      }\n      setCache(cacheKey, res);\n      return res;\n    }\n  } else if (value.startsWith(FN_MIX)) {\n    if (/currentcolor/.test(value)) {\n      if (currentColor) {\n        value = value.replace(/currentcolor/g, currentColor);\n      }\n    }\n    if (/transparent/.test(value)) {\n      value = value.replace(/transparent/g, RGB_TRANSPARENT);\n    }\n    const resolvedValue = resolveColorMix(value, opt);\n    if (resolvedValue instanceof NullObject) {\n      setCache(cacheKey, resolvedValue);\n      return resolvedValue;\n    }\n    [cs, r, g, b, alpha] = resolvedValue as ComputedColorChannels;\n  } else if (value.startsWith(FN_COLOR)) {\n    const resolvedValue = resolveColorFunc(value, opt);\n    if (resolvedValue instanceof NullObject) {\n      setCache(cacheKey, resolvedValue);\n      return resolvedValue;\n    }\n    [cs, r, g, b, alpha] = resolvedValue as ComputedColorChannels;\n  } else if (value) {\n    const resolvedValue = resolveColorValue(value, opt);\n    if (resolvedValue instanceof NullObject) {\n      setCache(cacheKey, resolvedValue);\n      return resolvedValue;\n    }\n    [cs, r, g, b, alpha] = resolvedValue as ComputedColorChannels;\n  }\n  let res = '';\n  switch (format) {\n    case 'hex': {\n      if (\n        Number.isNaN(r) ||\n        Number.isNaN(g) ||\n        Number.isNaN(b) ||\n        Number.isNaN(alpha) ||\n        alpha === 0\n      ) {\n        setCache(cacheKey, null);\n        return new NullObject();\n      }\n      res = convertRgbToHex([r, g, b, 1]);\n      break;\n    }\n    case 'hexAlpha': {\n      if (\n        Number.isNaN(r) ||\n        Number.isNaN(g) ||\n        Number.isNaN(b) ||\n        Number.isNaN(alpha)\n      ) {\n        setCache(cacheKey, null);\n        return new NullObject();\n      }\n      res = convertRgbToHex([r, g, b, alpha]);\n      break;\n    }\n    case VAL_COMP:\n    default: {\n      switch (cs) {\n        case 'rgb': {\n          if (alpha === 1) {\n            res = `${cs}(${r}, ${g}, ${b})`;\n          } else {\n            res = `${cs}a(${r}, ${g}, ${b}, ${alpha})`;\n          }\n          break;\n        }\n        case 'lab':\n        case 'lch':\n        case 'oklab':\n        case 'oklch': {\n          if (alpha === 1) {\n            res = `${cs}(${r} ${g} ${b})`;\n          } else {\n            res = `${cs}(${r} ${g} ${b} / ${alpha})`;\n          }\n          break;\n        }\n        // color()\n        default: {\n          if (alpha === 1) {\n            res = `color(${cs} ${r} ${g} ${b})`;\n          } else {\n            res = `color(${cs} ${r} ${g} ${b} / ${alpha})`;\n          }\n        }\n      }\n    }\n  }\n  setCache(cacheKey, res);\n  return res;\n};\n\n/**\n * resolve CSS color\n * @param value\n *   - CSS color value\n *   - system colors are not supported\n * @param [opt] - options\n * @param [opt.currentColor]\n *   - color to use for `currentcolor` keyword\n *   - if omitted, it will be treated as a missing color\n *     i.e. `rgb(none none none / none)`\n * @param [opt.customProperty]\n *   - custom properties\n *   - pair of `--` prefixed property name and value,\n *     e.g. `customProperty: { '--some-color': '#0000ff' }`\n *   - and/or `callback` function to get the value of the custom property,\n *     e.g. `customProperty: { callback: someDeclaration.getPropertyValue }`\n * @param [opt.dimension]\n *   - dimension, convert relative length to pixels\n *   - pair of unit and it's value as a number in pixels,\n *     e.g. `dimension: { em: 12, rem: 16, vw: 10.26 }`\n *   - and/or `callback` function to get the value as a number in pixels,\n *     e.g. `dimension: { callback: convertUnitToPixel }`\n * @param [opt.format]\n *   - output format, one of below\n *   - `computedValue` (default), [computed value][139] of the color\n *   - `specifiedValue`, [specified value][140] of the color\n *   - `hex`, hex color notation, i.e. `rrggbb`\n *   - `hexAlpha`, hex color notation with alpha channel, i.e. `#rrggbbaa`\n * @returns\n *   - one of rgba?(), #rrggbb(aa)?, color-name, '(empty-string)',\n *     color(color-space r g b / alpha), color(color-space x y z / alpha),\n *     lab(l a b / alpha), lch(l c h / alpha), oklab(l a b / alpha),\n *     oklch(l c h / alpha), null\n *   - in `computedValue`, values are numbers, however `rgb()` values are\n *     integers\n *   - in `specifiedValue`, returns `empty string` for unknown and/or invalid\n *     color\n *   - in `hex`, returns `null` for `transparent`, and also returns `null` if\n *     any of `r`, `g`, `b`, `alpha` is not a number\n *   - in `hexAlpha`, returns `#00000000` for `transparent`,\n *     however returns `null` if any of `r`, `g`, `b`, `alpha` is not a number\n */\nexport const resolve = (value: string, opt: Options = {}): string | null => {\n  opt.nullable = false;\n  const resolvedValue = resolveColor(value, opt);\n  if (resolvedValue instanceof NullObject) {\n    return null;\n  }\n  return resolvedValue as string;\n};\n","/**\n * util\n */\n\nimport { TokenType, tokenize } from '@csstools/css-tokenizer';\nimport { CacheItem, createCacheKey, getCache, setCache } from './cache';\nimport { isString } from './common';\nimport { resolveColor } from './resolve';\nimport { Options } from './typedef';\n\n/* constants */\nimport { NAMED_COLORS } from './color';\nimport { SYN_COLOR_TYPE, SYN_MIX, VAL_SPEC } from './constant';\nconst {\n  CloseParen: PAREN_CLOSE,\n  Comma: COMMA,\n  Comment: COMMENT,\n  Delim: DELIM,\n  EOF,\n  Function: FUNC,\n  Ident: IDENT,\n  OpenParen: PAREN_OPEN,\n  Whitespace: W_SPACE\n} = TokenType;\nconst NAMESPACE = 'util';\n\n/* numeric constants */\nconst DEC = 10;\nconst HEX = 16;\nconst DEG = 360;\nconst DEG_HALF = 180;\n\n/* regexp */\nconst REG_COLOR = new RegExp(`^(?:${SYN_COLOR_TYPE})$`);\nconst REG_FN_COLOR =\n  /^(?:(?:ok)?l(?:ab|ch)|color(?:-mix)?|hsla?|hwb|rgba?|var)\\(/;\nconst REG_MIX = new RegExp(SYN_MIX);\n\n/**\n * split value\n * NOTE: comments are stripped, it can be preserved if, in the options param,\n * `delimiter` is either ',' or '/' and with `preserveComment` set to `true`\n * @param value - CSS value\n * @param [opt] - options\n * @returns array of values\n */\nexport const splitValue = (value: string, opt: Options = {}): string[] => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { delimiter = ' ', preserveComment = false } = opt;\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'splitValue',\n      value\n    },\n    {\n      delimiter,\n      preserveComment\n    }\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    return cachedResult.item as string[];\n  }\n  let regDelimiter;\n  if (delimiter === ',') {\n    regDelimiter = /^,$/;\n  } else if (delimiter === '/') {\n    regDelimiter = /^\\/$/;\n  } else {\n    regDelimiter = /^\\s+$/;\n  }\n  const tokens = tokenize({ css: value });\n  let nest = 0;\n  let str = '';\n  const res: string[] = [];\n  while (tokens.length) {\n    const [type, value] = tokens.shift() as [TokenType, string];\n    switch (type) {\n      case COMMA: {\n        if (regDelimiter.test(value)) {\n          if (nest === 0) {\n            res.push(str.trim());\n            str = '';\n          } else {\n            str += value;\n          }\n        } else {\n          str += value;\n        }\n        break;\n      }\n      case DELIM: {\n        if (regDelimiter.test(value)) {\n          if (nest === 0) {\n            res.push(str.trim());\n            str = '';\n          } else {\n            str += value;\n          }\n        } else {\n          str += value;\n        }\n        break;\n      }\n      case COMMENT: {\n        if (preserveComment && (delimiter === ',' || delimiter === '/')) {\n          str += value;\n        }\n        break;\n      }\n      case FUNC:\n      case PAREN_OPEN: {\n        str += value;\n        nest++;\n        break;\n      }\n      case PAREN_CLOSE: {\n        str += value;\n        nest--;\n        break;\n      }\n      case W_SPACE: {\n        if (regDelimiter.test(value)) {\n          if (nest === 0) {\n            if (str) {\n              res.push(str.trim());\n              str = '';\n            }\n          } else {\n            str += ' ';\n          }\n        } else if (!str.endsWith(' ')) {\n          str += ' ';\n        }\n        break;\n      }\n      default: {\n        if (type === EOF) {\n          res.push(str.trim());\n          str = '';\n        } else {\n          str += value;\n        }\n      }\n    }\n  }\n  setCache(cacheKey, res);\n  return res;\n};\n\n/**\n * extract dashed-ident tokens\n * @param value - CSS value\n * @returns array of dashed-ident tokens\n */\nexport const extractDashedIdent = (value: string): string[] => {\n  if (isString(value)) {\n    value = value.trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const cacheKey: string = createCacheKey({\n    namespace: NAMESPACE,\n    name: 'extractDashedIdent',\n    value\n  });\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    return cachedResult.item as string[];\n  }\n  const tokens = tokenize({ css: value });\n  const items = new Set();\n  while (tokens.length) {\n    const [type, value] = tokens.shift() as [TokenType, string];\n    if (type === IDENT && value.startsWith('--')) {\n      items.add(value);\n    }\n  }\n  const res = [...items] as string[];\n  setCache(cacheKey, res);\n  return res;\n};\n\n/**\n * is color\n * @param value - CSS value\n * @param [opt] - options\n * @returns result\n */\nexport const isColor = (value: unknown, opt: Options = {}): boolean => {\n  if (isString(value)) {\n    value = value.toLowerCase().trim();\n    if (value && isString(value)) {\n      if (/^[a-z]+$/.test(value)) {\n        if (\n          /^(?:currentcolor|transparent)$/.test(value) ||\n          Object.hasOwn(NAMED_COLORS, value)\n        ) {\n          return true;\n        }\n      } else if (REG_COLOR.test(value) || REG_MIX.test(value)) {\n        return true;\n      } else if (REG_FN_COLOR.test(value)) {\n        opt.nullable = true;\n        if (!opt.format) {\n          opt.format = VAL_SPEC;\n        }\n        const resolvedValue = resolveColor(value, opt);\n        if (resolvedValue) {\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n};\n\n/**\n * value to JSON string\n * @param value - CSS value\n * @param [func] - stringify function\n * @returns stringified value in JSON notation\n */\nexport const valueToJsonString = (\n  value: unknown,\n  func: boolean = false\n): string => {\n  if (typeof value === 'undefined') {\n    return '';\n  }\n  const res = JSON.stringify(value, (_key, val) => {\n    let replacedValue;\n    if (typeof val === 'undefined') {\n      replacedValue = null;\n    } else if (typeof val === 'function') {\n      if (func) {\n        replacedValue = val.toString().replace(/\\s/g, '').substring(0, HEX);\n      } else {\n        replacedValue = val.name;\n      }\n    } else if (val instanceof Map || val instanceof Set) {\n      replacedValue = [...val];\n    } else if (typeof val === 'bigint') {\n      replacedValue = val.toString();\n    } else {\n      replacedValue = val;\n    }\n    return replacedValue;\n  });\n  return res;\n};\n\n/**\n * round to specified precision\n * @param value - numeric value\n * @param bit - minimum bits\n * @returns rounded value\n */\nexport const roundToPrecision = (value: number, bit: number = 0): number => {\n  if (!Number.isFinite(value)) {\n    throw new TypeError(`${value} is not a finite number.`);\n  }\n  if (!Number.isFinite(bit)) {\n    throw new TypeError(`${bit} is not a finite number.`);\n  } else if (bit < 0 || bit > HEX) {\n    throw new RangeError(`${bit} is not between 0 and ${HEX}.`);\n  }\n  if (bit === 0) {\n    return Math.round(value);\n  }\n  let val;\n  if (bit === HEX) {\n    val = value.toPrecision(6);\n  } else if (bit < DEC) {\n    val = value.toPrecision(4);\n  } else {\n    val = value.toPrecision(5);\n  }\n  return parseFloat(val);\n};\n\n/**\n * interpolate hue\n * @param hueA - hue value\n * @param hueB - hue value\n * @param arc - shorter | longer | increasing | decreasing\n * @returns result - [hueA, hueB]\n */\nexport const interpolateHue = (\n  hueA: number,\n  hueB: number,\n  arc: string = 'shorter'\n): [number, number] => {\n  if (!Number.isFinite(hueA)) {\n    throw new TypeError(`${hueA} is not a finite number.`);\n  }\n  if (!Number.isFinite(hueB)) {\n    throw new TypeError(`${hueB} is not a finite number.`);\n  }\n  switch (arc) {\n    case 'decreasing': {\n      if (hueB > hueA) {\n        hueA += DEG;\n      }\n      break;\n    }\n    case 'increasing': {\n      if (hueB < hueA) {\n        hueB += DEG;\n      }\n      break;\n    }\n    case 'longer': {\n      if (hueB > hueA && hueB < hueA + DEG_HALF) {\n        hueA += DEG;\n      } else if (hueB > hueA + DEG_HALF * -1 && hueB <= hueA) {\n        hueB += DEG;\n      }\n      break;\n    }\n    case 'shorter':\n    default: {\n      if (hueB > hueA + DEG_HALF) {\n        hueA += DEG;\n      } else if (hueB < hueA + DEG_HALF * -1) {\n        hueB += DEG;\n      }\n    }\n  }\n  return [hueA, hueB];\n};\n\n/* absolute font size to pixel ratio */\nconst absoluteFontSize = new Map([\n  ['xx-small', 3 / 5],\n  ['x-small', 3 / 4],\n  ['small', 8 / 9],\n  ['medium', 1],\n  ['large', 6 / 5],\n  ['x-large', 3 / 2],\n  ['xx-large', 2],\n  ['xxx-large', 3]\n]);\n\n/* relative font size to pixel ratio */\nconst relativeFontSize = new Map([\n  ['smaller', 1 / 1.2],\n  ['larger', 1.2]\n]);\n\n/* absolute length to pixel ratio */\nconst absoluteLength = new Map([\n  ['cm', 96 / 2.54],\n  ['mm', 96 / 2.54 / 10],\n  ['q', 96 / 2.54 / 40],\n  ['in', 96],\n  ['pc', 96 / 6],\n  ['pt', 96 / 72],\n  ['px', 1]\n]);\n\n/* relative length to pixel ratio */\nconst relativeLength = new Map([\n  ['rcap', 1],\n  ['rch', 0.5],\n  ['rem', 1],\n  ['rex', 0.5],\n  ['ric', 1],\n  ['rlh', 1.2]\n]);\n\n/**\n * resolve length in pixels\n * @param value - value\n * @param unit - unit\n * @param [opt] - options\n * @returns pixelated value\n */\nexport const resolveLengthInPixels = (\n  value: number | string,\n  unit: string | undefined,\n  opt: Options = {}\n): number => {\n  const { dimension = {} } = opt;\n  const { callback, em, rem, vh, vw } = dimension as {\n    callback: (K: string) => number;\n    em: number;\n    rem: number;\n    vh: number;\n    vw: number;\n  };\n  if (isString(value)) {\n    value = value.toLowerCase().trim();\n    if (absoluteFontSize.has(value)) {\n      return Number(absoluteFontSize.get(value)) * rem;\n    } else if (relativeFontSize.has(value)) {\n      return Number(relativeFontSize.get(value)) * em;\n    }\n    return Number.NaN;\n  } else if (Number.isFinite(value) && unit) {\n    if (Object.hasOwn(dimension, unit)) {\n      return value * Number(dimension[unit]);\n    } else if (typeof callback === 'function') {\n      return value * callback(unit);\n    } else if (absoluteLength.has(unit)) {\n      return value * Number(absoluteLength.get(unit));\n    } else if (relativeLength.has(unit)) {\n      return value * Number(relativeLength.get(unit)) * rem;\n    } else if (relativeLength.has(`r${unit}`)) {\n      return value * Number(relativeLength.get(`r${unit}`)) * em;\n    } else {\n      switch (unit) {\n        case 'vb':\n        case 'vi': {\n          return value * vw;\n        }\n        case 'vmax': {\n          if (vh > vw) {\n            return value * vh;\n          }\n          return value * vw;\n        }\n        case 'vmin': {\n          if (vh < vw) {\n            return value * vh;\n          }\n          return value * vw;\n        }\n        default: {\n          // unsupported or invalid unit\n          return Number.NaN;\n        }\n      }\n    }\n  }\n  // unsupported or invalid value\n  return Number.NaN;\n};\n","/**\n * cache\n */\n\nimport { LRUCache } from 'lru-cache';\nimport { Options } from './typedef';\nimport { valueToJsonString } from './util';\n\n/* numeric constants */\nconst MAX_CACHE = 4096;\n\n/**\n * CacheItem\n */\nexport class CacheItem {\n  /* private */\n  #isNull: boolean;\n  #item: unknown;\n\n  /**\n   * constructor\n   */\n  constructor(item: unknown, isNull: boolean = false) {\n    this.#item = item;\n    this.#isNull = !!isNull;\n  }\n\n  get item() {\n    return this.#item;\n  }\n\n  get isNull() {\n    return this.#isNull;\n  }\n}\n\n/**\n * NullObject\n */\nexport class NullObject extends CacheItem {\n  /**\n   * constructor\n   */\n  constructor() {\n    super(Symbol('null'), true);\n  }\n}\n\n/*\n * lru cache\n */\nexport const lruCache = new LRUCache({\n  max: MAX_CACHE\n});\n\n/**\n * set cache\n * @param key - cache key\n * @param value - value to cache\n * @returns void\n */\nexport const setCache = (key: string, value: unknown): void => {\n  if (key) {\n    if (value === null) {\n      lruCache.set(key, new NullObject());\n    } else if (value instanceof CacheItem) {\n      lruCache.set(key, value);\n    } else {\n      lruCache.set(key, new CacheItem(value));\n    }\n  }\n};\n\n/**\n * get cache\n * @param key - cache key\n * @returns cached item or false otherwise\n */\nexport const getCache = (key: string): CacheItem | boolean => {\n  if (key && lruCache.has(key)) {\n    const item = lruCache.get(key);\n    if (item instanceof CacheItem) {\n      return item;\n    }\n    // delete unexpected cached item\n    lruCache.delete(key);\n    return false;\n  }\n  return false;\n};\n\n/**\n * create cache key\n * @param keyData - key data\n * @param [opt] - options\n * @returns cache key\n */\nexport const createCacheKey = (\n  keyData: Record<string, string>,\n  opt: Options = {}\n): string => {\n  const { customProperty = {}, dimension = {} } = opt;\n  let cacheKey = '';\n  if (\n    keyData &&\n    Object.keys(keyData).length &&\n    typeof customProperty.callback !== 'function' &&\n    typeof dimension.callback !== 'function'\n  ) {\n    keyData.opt = valueToJsonString(opt);\n    cacheKey = valueToJsonString(keyData);\n  }\n  return cacheKey;\n};\n","/**\n * css-calc\n */\n\nimport { calc } from '@csstools/css-calc';\nimport { CSSToken, TokenType, tokenize } from '@csstools/css-tokenizer';\nimport {\n  CacheItem,\n  NullObject,\n  createCacheKey,\n  getCache,\n  setCache\n} from './cache';\nimport { isString, isStringOrNumber } from './common';\nimport { resolveVar } from './css-var';\nimport { resolveLengthInPixels, roundToPrecision } from './util';\nimport { MatchedRegExp, Options } from './typedef';\n\n/* constants */\nimport {\n  ANGLE,\n  LENGTH,\n  NUM,\n  SYN_FN_CALC,\n  SYN_FN_MATH_START,\n  SYN_FN_VAR,\n  SYN_FN_VAR_START,\n  VAL_SPEC\n} from './constant';\nconst {\n  CloseParen: PAREN_CLOSE,\n  Comment: COMMENT,\n  Dimension: DIM,\n  EOF,\n  Function: FUNC,\n  OpenParen: PAREN_OPEN,\n  Whitespace: W_SPACE\n} = TokenType;\nconst NAMESPACE = 'css-calc';\n\n/* numeric constants */\nconst TRIA = 3;\nconst HEX = 16;\nconst MAX_PCT = 100;\n\n/* regexp */\nconst REG_FN_CALC = new RegExp(SYN_FN_CALC);\nconst REG_FN_CALC_NUM = new RegExp(`^calc\\\\((${NUM})\\\\)$`);\nconst REG_FN_MATH_START = new RegExp(SYN_FN_MATH_START);\nconst REG_FN_VAR = new RegExp(SYN_FN_VAR);\nconst REG_FN_VAR_START = new RegExp(SYN_FN_VAR_START);\nconst REG_OPERATOR = /\\s[*+/-]\\s/;\nconst REG_TYPE_DIM = new RegExp(`^(${NUM})(${ANGLE}|${LENGTH})$`);\nconst REG_TYPE_DIM_PCT = new RegExp(`^(${NUM})(${ANGLE}|${LENGTH}|%)$`);\nconst REG_TYPE_PCT = new RegExp(`^(${NUM})%$`);\n\n/**\n * Calclator\n */\nexport class Calculator {\n  /* private */\n  // number\n  #hasNum: boolean;\n  #numSum: number[];\n  #numMul: number[];\n  // percentage\n  #hasPct: boolean;\n  #pctSum: number[];\n  #pctMul: number[];\n  // dimension\n  #hasDim: boolean;\n  #dimSum: string[];\n  #dimSub: string[];\n  #dimMul: string[];\n  #dimDiv: string[];\n  // et cetra\n  #hasEtc: boolean;\n  #etcSum: string[];\n  #etcSub: string[];\n  #etcMul: string[];\n  #etcDiv: string[];\n\n  /**\n   * constructor\n   */\n  constructor() {\n    // number\n    this.#hasNum = false;\n    this.#numSum = [];\n    this.#numMul = [];\n    // percentage\n    this.#hasPct = false;\n    this.#pctSum = [];\n    this.#pctMul = [];\n    // dimension\n    this.#hasDim = false;\n    this.#dimSum = [];\n    this.#dimSub = [];\n    this.#dimMul = [];\n    this.#dimDiv = [];\n    // et cetra\n    this.#hasEtc = false;\n    this.#etcSum = [];\n    this.#etcSub = [];\n    this.#etcMul = [];\n    this.#etcDiv = [];\n  }\n\n  get hasNum() {\n    return this.#hasNum;\n  }\n\n  set hasNum(value: boolean) {\n    this.#hasNum = !!value;\n  }\n\n  get numSum() {\n    return this.#numSum;\n  }\n\n  get numMul() {\n    return this.#numMul;\n  }\n\n  get hasPct() {\n    return this.#hasPct;\n  }\n\n  set hasPct(value: boolean) {\n    this.#hasPct = !!value;\n  }\n\n  get pctSum() {\n    return this.#pctSum;\n  }\n\n  get pctMul() {\n    return this.#pctMul;\n  }\n\n  get hasDim() {\n    return this.#hasDim;\n  }\n\n  set hasDim(value: boolean) {\n    this.#hasDim = !!value;\n  }\n\n  get dimSum() {\n    return this.#dimSum;\n  }\n\n  get dimSub() {\n    return this.#dimSub;\n  }\n\n  get dimMul() {\n    return this.#dimMul;\n  }\n\n  get dimDiv() {\n    return this.#dimDiv;\n  }\n\n  get hasEtc() {\n    return this.#hasEtc;\n  }\n\n  set hasEtc(value: boolean) {\n    this.#hasEtc = !!value;\n  }\n\n  get etcSum() {\n    return this.#etcSum;\n  }\n\n  get etcSub() {\n    return this.#etcSub;\n  }\n\n  get etcMul() {\n    return this.#etcMul;\n  }\n\n  get etcDiv() {\n    return this.#etcDiv;\n  }\n\n  /**\n   * clear values\n   * @returns void\n   */\n  clear() {\n    // number\n    this.#hasNum = false;\n    this.#numSum = [];\n    this.#numMul = [];\n    // percentage\n    this.#hasPct = false;\n    this.#pctSum = [];\n    this.#pctMul = [];\n    // dimension\n    this.#hasDim = false;\n    this.#dimSum = [];\n    this.#dimSub = [];\n    this.#dimMul = [];\n    this.#dimDiv = [];\n    // et cetra\n    this.#hasEtc = false;\n    this.#etcSum = [];\n    this.#etcSub = [];\n    this.#etcMul = [];\n    this.#etcDiv = [];\n  }\n\n  /**\n   * sort values\n   * @param values - values\n   * @returns sorted values\n   */\n  sort(values: string[] = []): string[] {\n    const arr = [...values];\n    if (arr.length > 1) {\n      arr.sort((a, b) => {\n        let res;\n        if (REG_TYPE_DIM_PCT.test(a) && REG_TYPE_DIM_PCT.test(b)) {\n          const [, valA, unitA] = a.match(REG_TYPE_DIM_PCT) as MatchedRegExp;\n          const [, valB, unitB] = b.match(REG_TYPE_DIM_PCT) as MatchedRegExp;\n          if (unitA === unitB) {\n            if (Number(valA) === Number(valB)) {\n              res = 0;\n            } else if (Number(valA) > Number(valB)) {\n              res = 1;\n            } else {\n              res = -1;\n            }\n          } else if (unitA > unitB) {\n            res = 1;\n          } else {\n            res = -1;\n          }\n        } else {\n          if (a === b) {\n            res = 0;\n          } else if (a > b) {\n            res = 1;\n          } else {\n            res = -1;\n          }\n        }\n        return res;\n      });\n    }\n    return arr;\n  }\n\n  /**\n   * multiply values\n   * @returns resolved value\n   */\n  multiply(): string {\n    const value = [];\n    let num;\n    if (this.#hasNum) {\n      num = 1;\n      for (const i of this.#numMul) {\n        num *= i;\n        if (num === 0 || !Number.isFinite(num) || Number.isNaN(num)) {\n          break;\n        }\n      }\n      if (!this.#hasPct && !this.#hasDim && !this.hasEtc) {\n        if (Number.isFinite(num)) {\n          num = roundToPrecision(num, HEX);\n        }\n        value.push(num);\n      }\n    }\n    if (this.#hasPct) {\n      if (typeof num !== 'number') {\n        num = 1;\n      }\n      for (const i of this.#pctMul) {\n        num *= i;\n        if (num === 0 || !Number.isFinite(num) || Number.isNaN(num)) {\n          break;\n        }\n      }\n      if (Number.isFinite(num)) {\n        num = `${roundToPrecision(num, HEX)}%`;\n      }\n      if (!this.#hasDim && !this.hasEtc) {\n        value.push(num);\n      }\n    }\n    if (this.#hasDim) {\n      let dim = '';\n      let mul = '';\n      let div = '';\n      if (this.#dimMul.length) {\n        if (this.#dimMul.length === 1) {\n          [mul] = this.#dimMul as [string];\n        } else {\n          mul = `${this.sort(this.#dimMul).join(' * ')}`;\n        }\n      }\n      if (this.#dimDiv.length) {\n        if (this.#dimDiv.length === 1) {\n          [div] = this.#dimDiv as [string];\n        } else {\n          div = `${this.sort(this.#dimDiv).join(' * ')}`;\n        }\n      }\n      if (Number.isFinite(num)) {\n        if (mul) {\n          if (div) {\n            if (div.includes('*')) {\n              dim = calc(`calc(${num} * ${mul} / (${div}))`, {\n                toCanonicalUnits: true\n              });\n            } else {\n              dim = calc(`calc(${num} * ${mul} / ${div})`, {\n                toCanonicalUnits: true\n              });\n            }\n          } else {\n            dim = calc(`calc(${num} * ${mul})`, {\n              toCanonicalUnits: true\n            });\n          }\n        } else if (div.includes('*')) {\n          dim = calc(`calc(${num} / (${div}))`, {\n            toCanonicalUnits: true\n          });\n        } else {\n          dim = calc(`calc(${num} / ${div})`, {\n            toCanonicalUnits: true\n          });\n        }\n        value.push(dim.replace(/^calc/, ''));\n      } else {\n        if (!value.length && num !== undefined) {\n          value.push(num);\n        }\n        if (mul) {\n          if (div) {\n            if (div.includes('*')) {\n              dim = calc(`calc(${mul} / (${div}))`, {\n                toCanonicalUnits: true\n              });\n            } else {\n              dim = calc(`calc(${mul} / ${div})`, {\n                toCanonicalUnits: true\n              });\n            }\n          } else {\n            dim = calc(`calc(${mul})`, {\n              toCanonicalUnits: true\n            });\n          }\n          if (value.length) {\n            value.push('*', dim.replace(/^calc/, ''));\n          } else {\n            value.push(dim.replace(/^calc/, ''));\n          }\n        } else {\n          dim = calc(`calc(${div})`, {\n            toCanonicalUnits: true\n          });\n          if (value.length) {\n            value.push('/', dim.replace(/^calc/, ''));\n          } else {\n            value.push('1', '/', dim.replace(/^calc/, ''));\n          }\n        }\n      }\n    }\n    if (this.#hasEtc) {\n      if (this.#etcMul.length) {\n        if (!value.length && num !== undefined) {\n          value.push(num);\n        }\n        const mul = this.sort(this.#etcMul).join(' * ');\n        if (value.length) {\n          value.push(`* ${mul}`);\n        } else {\n          value.push(`${mul}`);\n        }\n      }\n      if (this.#etcDiv.length) {\n        const div = this.sort(this.#etcDiv).join(' * ');\n        if (div.includes('*')) {\n          if (value.length) {\n            value.push(`/ (${div})`);\n          } else {\n            value.push(`1 / (${div})`);\n          }\n        } else if (value.length) {\n          value.push(`/ ${div}`);\n        } else {\n          value.push(`1 / ${div}`);\n        }\n      }\n    }\n    if (value.length) {\n      return value.join(' ');\n    }\n    return '';\n  }\n\n  /**\n   * sum values\n   * @returns resolved value\n   */\n  sum(): string {\n    const value = [];\n    if (this.#hasNum) {\n      let num = 0;\n      for (const i of this.#numSum) {\n        num += i;\n        if (!Number.isFinite(num) || Number.isNaN(num)) {\n          break;\n        }\n      }\n      value.push(num);\n    }\n    if (this.#hasPct) {\n      let num: number | string = 0;\n      for (const i of this.#pctSum) {\n        num += i;\n        if (!Number.isFinite(num)) {\n          break;\n        }\n      }\n      if (Number.isFinite(num)) {\n        num = `${num}%`;\n      }\n      if (value.length) {\n        value.push(`+ ${num}`);\n      } else {\n        value.push(num);\n      }\n    }\n    if (this.#hasDim) {\n      let dim, sum, sub;\n      if (this.#dimSum.length) {\n        sum = this.sort(this.#dimSum).join(' + ');\n      }\n      if (this.#dimSub.length) {\n        sub = this.sort(this.#dimSub).join(' + ');\n      }\n      if (sum) {\n        if (sub) {\n          if (sub.includes('-')) {\n            dim = calc(`calc(${sum} - (${sub}))`, {\n              toCanonicalUnits: true\n            });\n          } else {\n            dim = calc(`calc(${sum} - ${sub})`, {\n              toCanonicalUnits: true\n            });\n          }\n        } else {\n          dim = calc(`calc(${sum})`, {\n            toCanonicalUnits: true\n          });\n        }\n      } else {\n        dim = calc(`calc(-1 * (${sub}))`, {\n          toCanonicalUnits: true\n        });\n      }\n      if (value.length) {\n        value.push('+', dim.replace(/^calc/, ''));\n      } else {\n        value.push(dim.replace(/^calc/, ''));\n      }\n    }\n    if (this.#hasEtc) {\n      if (this.#etcSum.length) {\n        const sum = this.sort(this.#etcSum)\n          .map(item => {\n            let res;\n            if (\n              REG_OPERATOR.test(item) &&\n              !item.startsWith('(') &&\n              !item.endsWith(')')\n            ) {\n              res = `(${item})`;\n            } else {\n              res = item;\n            }\n            return res;\n          })\n          .join(' + ');\n        if (value.length) {\n          if (this.#etcSum.length > 1) {\n            value.push(`+ (${sum})`);\n          } else {\n            value.push(`+ ${sum}`);\n          }\n        } else {\n          value.push(`${sum}`);\n        }\n      }\n      if (this.#etcSub.length) {\n        const sub = this.sort(this.#etcSub)\n          .map(item => {\n            let res;\n            if (\n              REG_OPERATOR.test(item) &&\n              !item.startsWith('(') &&\n              !item.endsWith(')')\n            ) {\n              res = `(${item})`;\n            } else {\n              res = item;\n            }\n            return res;\n          })\n          .join(' + ');\n        if (value.length) {\n          if (this.#etcSub.length > 1) {\n            value.push(`- (${sub})`);\n          } else {\n            value.push(`- ${sub}`);\n          }\n        } else if (this.#etcSub.length > 1) {\n          value.push(`-1 * (${sub})`);\n        } else {\n          value.push(`-1 * ${sub}`);\n        }\n      }\n    }\n    if (value.length) {\n      return value.join(' ');\n    }\n    return '';\n  }\n}\n\n/**\n * sort calc values\n * @param values - values to sort\n * @param [finalize] - finalize values\n * @returns sorted values\n */\nexport const sortCalcValues = (\n  values: (number | string)[] = [],\n  finalize: boolean = false\n): string => {\n  if (values.length < TRIA) {\n    throw new Error(`Unexpected array length ${values.length}.`);\n  }\n  const start = values.shift();\n  if (!isString(start) || !start.endsWith('(')) {\n    throw new Error(`Unexpected token ${start}.`);\n  }\n  const end = values.pop();\n  if (end !== ')') {\n    throw new Error(`Unexpected token ${end}.`);\n  }\n  if (values.length === 1) {\n    const [value] = values;\n    if (!isStringOrNumber(value)) {\n      throw new Error(`Unexpected token ${value}.`);\n    }\n    return `${start}${value}${end}`;\n  }\n  const sortedValues = [];\n  const cal = new Calculator();\n  let operator: string = '';\n  const l = values.length;\n  for (let i = 0; i < l; i++) {\n    const value = values[i];\n    if (!isStringOrNumber(value)) {\n      throw new Error(`Unexpected token ${value}.`);\n    }\n    if (value === '*' || value === '/') {\n      operator = value;\n    } else if (value === '+' || value === '-') {\n      const sortedValue = cal.multiply();\n      if (sortedValue) {\n        sortedValues.push(sortedValue, value);\n      }\n      cal.clear();\n      operator = '';\n    } else {\n      const numValue = Number(value);\n      const strValue = `${value}`;\n      switch (operator) {\n        case '/': {\n          if (Number.isFinite(numValue)) {\n            cal.hasNum = true;\n            cal.numMul.push(1 / numValue);\n          } else if (REG_TYPE_PCT.test(strValue)) {\n            const [, val] = strValue.match(REG_TYPE_PCT) as MatchedRegExp;\n            cal.hasPct = true;\n            cal.pctMul.push((MAX_PCT * MAX_PCT) / Number(val));\n          } else if (REG_TYPE_DIM.test(strValue)) {\n            cal.hasDim = true;\n            cal.dimDiv.push(strValue);\n          } else {\n            cal.hasEtc = true;\n            cal.etcDiv.push(strValue);\n          }\n          break;\n        }\n        case '*':\n        default: {\n          if (Number.isFinite(numValue)) {\n            cal.hasNum = true;\n            cal.numMul.push(numValue);\n          } else if (REG_TYPE_PCT.test(strValue)) {\n            const [, val] = strValue.match(REG_TYPE_PCT) as MatchedRegExp;\n            cal.hasPct = true;\n            cal.pctMul.push(Number(val));\n          } else if (REG_TYPE_DIM.test(strValue)) {\n            cal.hasDim = true;\n            cal.dimMul.push(strValue);\n          } else {\n            cal.hasEtc = true;\n            cal.etcMul.push(strValue);\n          }\n        }\n      }\n    }\n    if (i === l - 1) {\n      const sortedValue = cal.multiply();\n      if (sortedValue) {\n        sortedValues.push(sortedValue);\n      }\n      cal.clear();\n      operator = '';\n    }\n  }\n  let resolvedValue = '';\n  if (finalize && (sortedValues.includes('+') || sortedValues.includes('-'))) {\n    const finalizedValues = [];\n    cal.clear();\n    operator = '';\n    const l = sortedValues.length;\n    for (let i = 0; i < l; i++) {\n      const value = sortedValues[i];\n      if (isStringOrNumber(value)) {\n        if (value === '+' || value === '-') {\n          operator = value;\n        } else {\n          const numValue = Number(value);\n          const strValue = `${value}`;\n          switch (operator) {\n            case '-': {\n              if (Number.isFinite(numValue)) {\n                cal.hasNum = true;\n                cal.numSum.push(-1 * numValue);\n              } else if (REG_TYPE_PCT.test(strValue)) {\n                const [, val] = strValue.match(REG_TYPE_PCT) as MatchedRegExp;\n                cal.hasPct = true;\n                cal.pctSum.push(-1 * Number(val));\n              } else if (REG_TYPE_DIM.test(strValue)) {\n                cal.hasDim = true;\n                cal.dimSub.push(strValue);\n              } else {\n                cal.hasEtc = true;\n                cal.etcSub.push(strValue);\n              }\n              break;\n            }\n            case '+':\n            default: {\n              if (Number.isFinite(numValue)) {\n                cal.hasNum = true;\n                cal.numSum.push(numValue);\n              } else if (REG_TYPE_PCT.test(strValue)) {\n                const [, val] = strValue.match(REG_TYPE_PCT) as MatchedRegExp;\n                cal.hasPct = true;\n                cal.pctSum.push(Number(val));\n              } else if (REG_TYPE_DIM.test(strValue)) {\n                cal.hasDim = true;\n                cal.dimSum.push(strValue);\n              } else {\n                cal.hasEtc = true;\n                cal.etcSum.push(strValue);\n              }\n            }\n          }\n        }\n      }\n      if (i === l - 1) {\n        const sortedValue = cal.sum();\n        if (sortedValue) {\n          finalizedValues.push(sortedValue);\n        }\n        cal.clear();\n        operator = '';\n      }\n    }\n    resolvedValue = finalizedValues.join(' ').replace(/\\+\\s-/g, '- ');\n  } else {\n    resolvedValue = sortedValues.join(' ').replace(/\\+\\s-/g, '- ');\n  }\n  if (\n    resolvedValue.startsWith('(') &&\n    resolvedValue.endsWith(')') &&\n    resolvedValue.lastIndexOf('(') === 0 &&\n    resolvedValue.indexOf(')') === resolvedValue.length - 1\n  ) {\n    resolvedValue = resolvedValue.replace(/^\\(/, '').replace(/\\)$/, '');\n  }\n  return `${start}${resolvedValue}${end}`;\n};\n\n/**\n * serialize calc\n * @param value - CSS value\n * @param [opt] - options\n * @returns serialized value\n */\nexport const serializeCalc = (value: string, opt: Options = {}): string => {\n  const { format = '' } = opt;\n  if (isString(value)) {\n    if (!REG_FN_VAR_START.test(value) || format !== VAL_SPEC) {\n      return value;\n    }\n    value = value.toLowerCase().trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'serializeCalc',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    return cachedResult.item as string;\n  }\n  const items: string[] = tokenize({ css: value })\n    .map((token: CSSToken): string => {\n      const [type, value] = token as [TokenType, string];\n      let res = '';\n      if (type !== W_SPACE && type !== COMMENT) {\n        res = value;\n      }\n      return res;\n    })\n    .filter(v => v);\n  let startIndex = items.findLastIndex((item: string) => /\\($/.test(item));\n  while (startIndex) {\n    const endIndex = items.findIndex((item: unknown, index: number) => {\n      return item === ')' && index > startIndex;\n    });\n    const slicedValues: string[] = items.slice(startIndex, endIndex + 1);\n    let serializedValue: string = sortCalcValues(slicedValues);\n    if (REG_FN_VAR_START.test(serializedValue)) {\n      serializedValue = calc(serializedValue, {\n        toCanonicalUnits: true\n      });\n    }\n    items.splice(startIndex, endIndex - startIndex + 1, serializedValue);\n    startIndex = items.findLastIndex((item: string) => /\\($/.test(item));\n  }\n  const serializedCalc = sortCalcValues(items, true);\n  setCache(cacheKey, serializedCalc);\n  return serializedCalc;\n};\n\n/**\n * resolve dimension\n * @param token - CSS token\n * @param [opt] - options\n * @returns resolved value\n */\nexport const resolveDimension = (\n  token: CSSToken,\n  opt: Options = {}\n): string | NullObject => {\n  if (!Array.isArray(token)) {\n    throw new TypeError(`${token} is not an array.`);\n  }\n  const [, , , , detail = {}] = token;\n  const { unit, value } = detail as {\n    unit: string;\n    value: number;\n  };\n  if (unit === 'px') {\n    return `${value}${unit}`;\n  }\n  const pixelValue = resolveLengthInPixels(Number(value), unit, opt);\n  if (Number.isFinite(pixelValue)) {\n    return `${roundToPrecision(pixelValue, HEX)}px`;\n  }\n  return new NullObject();\n};\n\n/**\n * parse tokens\n * @param tokens - CSS tokens\n * @param [opt] - options\n * @returns parsed tokens\n */\nexport const parseTokens = (\n  tokens: CSSToken[],\n  opt: Options = {}\n): string[] => {\n  if (!Array.isArray(tokens)) {\n    throw new TypeError(`${tokens} is not an array.`);\n  }\n  const { format = '' } = opt;\n  const mathFunc = new Set();\n  let nest = 0;\n  const res: string[] = [];\n  while (tokens.length) {\n    const token = tokens.shift();\n    if (!Array.isArray(token)) {\n      throw new TypeError(`${token} is not an array.`);\n    }\n    const [type = '', value = ''] = token as [TokenType, string];\n    switch (type) {\n      case DIM: {\n        if (format === VAL_SPEC && !mathFunc.has(nest)) {\n          res.push(value);\n        } else {\n          const resolvedValue = resolveDimension(token, opt);\n          if (isString(resolvedValue)) {\n            res.push(resolvedValue);\n          } else {\n            res.push(value);\n          }\n        }\n        break;\n      }\n      case FUNC:\n      case PAREN_OPEN: {\n        res.push(value);\n        nest++;\n        if (REG_FN_MATH_START.test(value)) {\n          mathFunc.add(nest);\n        }\n        break;\n      }\n      case PAREN_CLOSE: {\n        if (res.length) {\n          const lastValue = res[res.length - 1];\n          if (lastValue === ' ') {\n            res.splice(-1, 1, value);\n          } else {\n            res.push(value);\n          }\n        } else {\n          res.push(value);\n        }\n        if (mathFunc.has(nest)) {\n          mathFunc.delete(nest);\n        }\n        nest--;\n        break;\n      }\n      case W_SPACE: {\n        if (res.length) {\n          const lastValue = res[res.length - 1];\n          if (\n            isString(lastValue) &&\n            !lastValue.endsWith('(') &&\n            lastValue !== ' '\n          ) {\n            res.push(value);\n          }\n        }\n        break;\n      }\n      default: {\n        if (type !== COMMENT && type !== EOF) {\n          res.push(value);\n        }\n      }\n    }\n  }\n  return res;\n};\n\n/**\n * CSS calc()\n * @param value - CSS value including calc()\n * @param [opt] - options\n * @returns resolved value\n */\nexport const cssCalc = (value: string, opt: Options = {}): string => {\n  const { format = '' } = opt;\n  if (isString(value)) {\n    if (REG_FN_VAR.test(value)) {\n      if (format === VAL_SPEC) {\n        return value;\n      } else {\n        const resolvedValue = resolveVar(value, opt);\n        if (isString(resolvedValue)) {\n          return resolvedValue;\n        } else {\n          return '';\n        }\n      }\n    } else if (!REG_FN_CALC.test(value)) {\n      return value;\n    }\n    value = value.toLowerCase().trim();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'cssCalc',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    return cachedResult.item as string;\n  }\n  const tokens = tokenize({ css: value });\n  const values = parseTokens(tokens, opt);\n  let resolvedValue: string = calc(values.join(''), {\n    toCanonicalUnits: true\n  });\n  if (REG_FN_VAR_START.test(value)) {\n    if (REG_TYPE_DIM_PCT.test(resolvedValue)) {\n      const [, val, unit] = resolvedValue.match(\n        REG_TYPE_DIM_PCT\n      ) as MatchedRegExp;\n      resolvedValue = `${roundToPrecision(Number(val), HEX)}${unit}`;\n    }\n    // wrap with `calc()`\n    if (\n      resolvedValue &&\n      !REG_FN_VAR_START.test(resolvedValue) &&\n      format === VAL_SPEC\n    ) {\n      resolvedValue = `calc(${resolvedValue})`;\n    }\n  }\n  if (format === VAL_SPEC) {\n    if (/\\s[-+*/]\\s/.test(resolvedValue) && !resolvedValue.includes('NaN')) {\n      resolvedValue = serializeCalc(resolvedValue, opt);\n    } else if (REG_FN_CALC_NUM.test(resolvedValue)) {\n      const [, val] = resolvedValue.match(REG_FN_CALC_NUM) as MatchedRegExp;\n      resolvedValue = `calc(${roundToPrecision(Number(val), HEX)})`;\n    }\n  }\n  setCache(cacheKey, resolvedValue);\n  return resolvedValue;\n};\n","/**\n * css-gradient\n */\n\nimport { CacheItem, createCacheKey, getCache, setCache } from './cache';\nimport { resolveColor } from './resolve';\nimport { isString } from './common';\nimport { MatchedRegExp, Options } from './typedef';\nimport { isColor, splitValue } from './util';\n\n/* constants */\nimport {\n  ANGLE,\n  CS_HUE,\n  CS_RECT,\n  LENGTH,\n  NUM,\n  NUM_POSITIVE,\n  PCT,\n  VAL_COMP,\n  VAL_SPEC\n} from './constant';\nconst NAMESPACE = 'css-gradient';\nconst DIM_ANGLE = `${NUM}(?:${ANGLE})`;\nconst DIM_ANGLE_PCT = `${DIM_ANGLE}|${PCT}`;\nconst DIM_LEN = `${NUM}(?:${LENGTH})|0`;\nconst DIM_LEN_PCT = `${DIM_LEN}|${PCT}`;\nconst DIM_LEN_PCT_POSI = `${NUM_POSITIVE}(?:${LENGTH}|%)|0`;\nconst DIM_LEN_POSI = `${NUM_POSITIVE}(?:${LENGTH})|0`;\nconst CTR = 'center';\nconst L_R = 'left|right';\nconst T_B = 'top|bottom';\nconst S_E = 'start|end';\nconst AXIS_X = `${L_R}|x-(?:${S_E})`;\nconst AXIS_Y = `${T_B}|y-(?:${S_E})`;\nconst BLOCK = `block-(?:${S_E})`;\nconst INLINE = `inline-(?:${S_E})`;\nconst POS_1 = `${CTR}|${AXIS_X}|${AXIS_Y}|${BLOCK}|${INLINE}|${DIM_LEN_PCT}`;\nconst POS_2 = [\n  `(?:${CTR}|${AXIS_X})\\\\s+(?:${CTR}|${AXIS_Y})`,\n  `(?:${CTR}|${AXIS_Y})\\\\s+(?:${CTR}|${AXIS_X})`,\n  `(?:${CTR}|${AXIS_X}|${DIM_LEN_PCT})\\\\s+(?:${CTR}|${AXIS_Y}|${DIM_LEN_PCT})`,\n  `(?:${CTR}|${BLOCK})\\\\s+(?:${CTR}|${INLINE})`,\n  `(?:${CTR}|${INLINE})\\\\s+(?:${CTR}|${BLOCK})`,\n  `(?:${CTR}|${S_E})\\\\s+(?:${CTR}|${S_E})`\n].join('|');\nconst POS_4 = [\n  `(?:${AXIS_X})\\\\s+(?:${DIM_LEN_PCT})\\\\s+(?:${AXIS_Y})\\\\s+(?:${DIM_LEN_PCT})`,\n  `(?:${AXIS_Y})\\\\s+(?:${DIM_LEN_PCT})\\\\s+(?:${AXIS_X})\\\\s+(?:${DIM_LEN_PCT})`,\n  `(?:${BLOCK})\\\\s+(?:${DIM_LEN_PCT})\\\\s+(?:${INLINE})\\\\s+(?:${DIM_LEN_PCT})`,\n  `(?:${INLINE})\\\\s+(?:${DIM_LEN_PCT})\\\\s+(?:${BLOCK})\\\\s+(?:${DIM_LEN_PCT})`,\n  `(?:${S_E})\\\\s+(?:${DIM_LEN_PCT})\\\\s+(?:${S_E})\\\\s+(?:${DIM_LEN_PCT})`\n].join('|');\nconst RAD_EXTENT = '(?:clos|farth)est-(?:corner|side)';\nconst RAD_SIZE = [\n  `${RAD_EXTENT}(?:\\\\s+${RAD_EXTENT})?`,\n  `${DIM_LEN_POSI}`,\n  `(?:${DIM_LEN_PCT_POSI})\\\\s+(?:${DIM_LEN_PCT_POSI})`\n].join('|');\nconst RAD_SHAPE = 'circle|ellipse';\nconst FROM_ANGLE = `from\\\\s+${DIM_ANGLE}`;\nconst AT_POSITION = `at\\\\s+(?:${POS_1}|${POS_2}|${POS_4})`;\nconst TO_SIDE_CORNER = `to\\\\s+(?:(?:${L_R})(?:\\\\s(?:${T_B}))?|(?:${T_B})(?:\\\\s(?:${L_R}))?)`;\nconst IN_COLOR_SPACE = `in\\\\s+(?:${CS_RECT}|${CS_HUE})`;\n\n/* type definitions */\n/**\n * @type ColorStopList - list of color stops\n */\ntype ColorStopList = [string, string, ...string[]];\n\n/**\n * @typedef ValidateGradientLine - validate gradient line\n * @property line - gradient line\n * @property valid - result\n */\ninterface ValidateGradientLine {\n  line: string;\n  valid: boolean;\n}\n\n/**\n * @typedef ValidateColorStops - validate color stops\n * @property colorStops - list of color stops\n * @property valid - result\n */\ninterface ValidateColorStops {\n  colorStops: string[];\n  valid: boolean;\n}\n\n/**\n * @typedef Gradient - parsed CSS gradient\n * @property value - input value\n * @property type - gradient type\n * @property [gradientLine] - gradient line\n * @property colorStopList - list of color stops\n */\ninterface Gradient {\n  value: string;\n  type: string;\n  gradientLine?: string;\n  colorStopList: ColorStopList;\n}\n\n/* regexp */\nconst REG_GRAD = /^(?:repeating-)?(?:conic|linear|radial)-gradient\\(/;\nconst REG_GRAD_CAPT = /^((?:repeating-)?(?:conic|linear|radial)-gradient)\\(/;\n\n/**\n * get gradient type\n * @param value - gradient value\n * @returns gradient type\n */\nexport const getGradientType = (value: string): string => {\n  if (isString(value)) {\n    value = value.trim();\n    if (REG_GRAD.test(value)) {\n      const [, type] = value.match(REG_GRAD_CAPT) as MatchedRegExp;\n      return type;\n    }\n  }\n  return '';\n};\n\n/**\n * validate gradient line\n * @param value - gradient line value\n * @param type - gradient type\n * @returns result\n */\nexport const validateGradientLine = (\n  value: string,\n  type: string\n): ValidateGradientLine => {\n  if (isString(value) && isString(type)) {\n    value = value.trim();\n    type = type.trim();\n    let lineSyntax = '';\n    const defaultValues = [];\n    if (/^(?:repeating-)?linear-gradient$/.test(type)) {\n      /*\n       * <linear-gradient-line> = [\n       *   [ <angle> | to <side-or-corner> ] ||\n       *   <color-interpolation-method>\n       * ]\n       */\n      lineSyntax = [\n        `(?:${DIM_ANGLE}|${TO_SIDE_CORNER})(?:\\\\s+${IN_COLOR_SPACE})?`,\n        `${IN_COLOR_SPACE}(?:\\\\s+(?:${DIM_ANGLE}|${TO_SIDE_CORNER}))?`\n      ].join('|');\n      defaultValues.push(/to\\s+bottom/);\n    } else if (/^(?:repeating-)?radial-gradient$/.test(type)) {\n      /*\n       * <radial-gradient-line> = [\n       *   [ [ <radial-shape> || <radial-size> ]? [ at <position> ]? ] ||\n       *   <color-interpolation-method>]?\n       */\n      lineSyntax = [\n        `(?:${RAD_SHAPE})(?:\\\\s+(?:${RAD_SIZE}))?(?:\\\\s+${AT_POSITION})?(?:\\\\s+${IN_COLOR_SPACE})?`,\n        `(?:${RAD_SIZE})(?:\\\\s+(?:${RAD_SHAPE}))?(?:\\\\s+${AT_POSITION})?(?:\\\\s+${IN_COLOR_SPACE})?`,\n        `${AT_POSITION}(?:\\\\s+${IN_COLOR_SPACE})?`,\n        `${IN_COLOR_SPACE}(?:\\\\s+${RAD_SHAPE})(?:\\\\s+(?:${RAD_SIZE}))?(?:\\\\s+${AT_POSITION})?`,\n        `${IN_COLOR_SPACE}(?:\\\\s+${RAD_SIZE})(?:\\\\s+(?:${RAD_SHAPE}))?(?:\\\\s+${AT_POSITION})?`,\n        `${IN_COLOR_SPACE}(?:\\\\s+${AT_POSITION})?`\n      ].join('|');\n      defaultValues.push(/ellipse/, /farthest-corner/, /at\\s+center/);\n    } else if (/^(?:repeating-)?conic-gradient$/.test(type)) {\n      /*\n       * <conic-gradient-line> = [\n       *   [ [ from <angle> ]? [ at <position> ]? ] ||\n       *   <color-interpolation-method>\n       * ]\n       */\n      lineSyntax = [\n        `${FROM_ANGLE}(?:\\\\s+${AT_POSITION})?(?:\\\\s+${IN_COLOR_SPACE})?`,\n        `${AT_POSITION}(?:\\\\s+${IN_COLOR_SPACE})?`,\n        `${IN_COLOR_SPACE}(?:\\\\s+${FROM_ANGLE})?(?:\\\\s+${AT_POSITION})?`\n      ].join('|');\n      defaultValues.push(/at\\s+center/);\n    }\n    if (lineSyntax) {\n      const reg = new RegExp(`^(?:${lineSyntax})$`);\n      const valid = reg.test(value);\n      if (valid) {\n        let line = value;\n        for (const defaultValue of defaultValues) {\n          line = line.replace(defaultValue, '');\n        }\n        line = line.replace(/\\s{2,}/g, ' ').trim();\n        return {\n          line,\n          valid\n        };\n      }\n      return {\n        valid,\n        line: value\n      };\n    }\n  }\n  return {\n    line: value,\n    valid: false\n  };\n};\n\n/**\n * validate color stop list\n * @param list\n * @param type\n * @param [opt]\n * @returns result\n */\nexport const validateColorStopList = (\n  list: string[],\n  type: string,\n  opt: Options = {}\n): ValidateColorStops => {\n  if (Array.isArray(list) && list.length > 1) {\n    const dimension = /^(?:repeating-)?conic-gradient$/.test(type)\n      ? DIM_ANGLE_PCT\n      : DIM_LEN_PCT;\n    const regColorHint = new RegExp(`^(?:${dimension})$`);\n    const regDimension = new RegExp(`(?:\\\\s+(?:${dimension})){1,2}$`);\n    const valueTypes = [];\n    const valueList = [];\n    for (const item of list) {\n      if (isString(item)) {\n        if (regColorHint.test(item)) {\n          valueTypes.push('hint');\n          valueList.push(item);\n        } else {\n          const itemColor = item.replace(regDimension, '');\n          if (isColor(itemColor, { format: VAL_SPEC })) {\n            const resolvedColor = resolveColor(itemColor, opt) as string;\n            valueTypes.push('color');\n            valueList.push(item.replace(itemColor, resolvedColor));\n          } else {\n            return {\n              colorStops: list,\n              valid: false\n            };\n          }\n        }\n      }\n    }\n    const valid = /^color(?:,(?:hint,)?color)+$/.test(valueTypes.join(','));\n    return {\n      valid,\n      colorStops: valueList\n    };\n  }\n  return {\n    colorStops: list,\n    valid: false\n  };\n};\n\n/**\n * parse CSS gradient\n * @param value - gradient value\n * @param [opt] - options\n * @returns parsed result\n */\nexport const parseGradient = (\n  value: string,\n  opt: Options = {}\n): Gradient | null => {\n  if (isString(value)) {\n    value = value.trim();\n    const cacheKey: string = createCacheKey(\n      {\n        namespace: NAMESPACE,\n        name: 'parseGradient',\n        value\n      },\n      opt\n    );\n    const cachedResult = getCache(cacheKey);\n    if (cachedResult instanceof CacheItem) {\n      if (cachedResult.isNull) {\n        return null;\n      }\n      return cachedResult.item as Gradient;\n    }\n    const type = getGradientType(value);\n    const gradValue = value.replace(REG_GRAD, '').replace(/\\)$/, '');\n    if (type && gradValue) {\n      const [lineOrColorStop = '', ...itemList] = splitValue(gradValue, {\n        delimiter: ','\n      });\n      const dimension = /^(?:repeating-)?conic-gradient$/.test(type)\n        ? DIM_ANGLE_PCT\n        : DIM_LEN_PCT;\n      const regDimension = new RegExp(`(?:\\\\s+(?:${dimension})){1,2}$`);\n      let colorStop = '';\n      if (regDimension.test(lineOrColorStop)) {\n        const itemColor = lineOrColorStop.replace(regDimension, '');\n        if (isColor(itemColor, { format: VAL_SPEC })) {\n          const resolvedColor = resolveColor(itemColor, opt) as string;\n          colorStop = lineOrColorStop.replace(itemColor, resolvedColor);\n        }\n      } else if (isColor(lineOrColorStop, { format: VAL_SPEC })) {\n        colorStop = resolveColor(lineOrColorStop, opt) as string;\n      }\n      if (colorStop) {\n        itemList.unshift(colorStop);\n        const { colorStops, valid } = validateColorStopList(\n          itemList,\n          type,\n          opt\n        );\n        if (valid) {\n          const res: Gradient = {\n            value,\n            type,\n            colorStopList: colorStops as ColorStopList\n          };\n          setCache(cacheKey, res);\n          return res;\n        }\n      } else if (itemList.length > 1) {\n        const { line: gradientLine, valid: validLine } = validateGradientLine(\n          lineOrColorStop,\n          type\n        );\n        const { colorStops, valid: validColorStops } = validateColorStopList(\n          itemList,\n          type,\n          opt\n        );\n        if (validLine && validColorStops) {\n          const res: Gradient = {\n            value,\n            type,\n            gradientLine,\n            colorStopList: colorStops as ColorStopList\n          };\n          setCache(cacheKey, res);\n          return res;\n        }\n      }\n    }\n    setCache(cacheKey, null);\n    return null;\n  }\n  return null;\n};\n\n/**\n * resolve CSS gradient\n * @param value - CSS value\n * @param [opt] - options\n * @returns result\n */\nexport const resolveGradient = (value: string, opt: Options = {}): string => {\n  const { format = VAL_COMP } = opt;\n  const gradient = parseGradient(value, opt);\n  if (gradient) {\n    const { type = '', gradientLine = '', colorStopList = [] } = gradient;\n    if (type && Array.isArray(colorStopList) && colorStopList.length > 1) {\n      if (gradientLine) {\n        return `${type}(${gradientLine}, ${colorStopList.join(', ')})`;\n      }\n      return `${type}(${colorStopList.join(', ')})`;\n    }\n  }\n  if (format === VAL_SPEC) {\n    return '';\n  }\n  return 'none';\n};\n\n/**\n * is CSS gradient\n * @param value - CSS value\n * @param [opt] - options\n * @returns result\n */\nexport const isGradient = (value: string, opt: Options = {}): boolean => {\n  const gradient = parseGradient(value, opt);\n  return gradient !== null;\n};\n","/**\n * convert\n */\n\nimport {\n  CacheItem,\n  NullObject,\n  createCacheKey,\n  getCache,\n  setCache\n} from './cache';\nimport {\n  convertColorToHsl,\n  convertColorToHwb,\n  convertColorToLab,\n  convertColorToLch,\n  convertColorToOklab,\n  convertColorToOklch,\n  convertColorToRgb,\n  numberToHexString,\n  parseColorFunc,\n  parseColorValue\n} from './color';\nimport { isString } from './common';\nimport { cssCalc } from './css-calc';\nimport { resolveVar } from './css-var';\nimport { resolveRelativeColor } from './relative-color';\nimport { resolveColor } from './resolve';\nimport { ColorChannels, ComputedColorChannels, Options } from './typedef';\n\n/* constants */\nimport { SYN_FN_CALC, SYN_FN_REL, SYN_FN_VAR, VAL_COMP } from './constant';\nconst NAMESPACE = 'convert';\n\n/* regexp */\nconst REG_FN_CALC = new RegExp(SYN_FN_CALC);\nconst REG_FN_REL = new RegExp(SYN_FN_REL);\nconst REG_FN_VAR = new RegExp(SYN_FN_VAR);\n\n/**\n * pre process\n * @param value - CSS color value\n * @param [opt] - options\n * @returns value\n */\nexport const preProcess = (\n  value: string,\n  opt: Options = {}\n): string | NullObject => {\n  if (isString(value)) {\n    value = value.trim();\n    if (!value) {\n      return new NullObject();\n    }\n  } else {\n    return new NullObject();\n  }\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'preProcess',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    if (cachedResult.isNull) {\n      return cachedResult as NullObject;\n    }\n    return cachedResult.item as string;\n  }\n  if (REG_FN_VAR.test(value)) {\n    const resolvedValue = resolveVar(value, opt);\n    if (isString(resolvedValue)) {\n      value = resolvedValue;\n    } else {\n      setCache(cacheKey, null);\n      return new NullObject();\n    }\n  }\n  if (REG_FN_REL.test(value)) {\n    const resolvedValue = resolveRelativeColor(value, opt);\n    if (isString(resolvedValue)) {\n      value = resolvedValue;\n    } else {\n      setCache(cacheKey, null);\n      return new NullObject();\n    }\n  } else if (REG_FN_CALC.test(value)) {\n    value = cssCalc(value, opt);\n  }\n  if (value.startsWith('color-mix')) {\n    const clonedOpt = structuredClone(opt);\n    clonedOpt.format = VAL_COMP;\n    clonedOpt.nullable = true;\n    const resolvedValue = resolveColor(value, clonedOpt);\n    setCache(cacheKey, resolvedValue);\n    return resolvedValue;\n  }\n  setCache(cacheKey, value);\n  return value;\n};\n\n/**\n * convert number to hex string\n * @param value - numeric value\n * @returns hex string: 00..ff\n */\nexport const numberToHex = (value: number): string => {\n  const hex = numberToHexString(value);\n  return hex;\n};\n\n/**\n * convert color to hex\n * @param value - CSS color value\n * @param [opt] - options\n * @param [opt.alpha] - enable alpha channel\n * @returns #rrggbb | #rrggbbaa | null\n */\nexport const colorToHex = (value: string, opt: Options = {}): string | null => {\n  if (isString(value)) {\n    const resolvedValue = preProcess(value, opt);\n    if (resolvedValue instanceof NullObject) {\n      return null;\n    }\n    value = resolvedValue.toLowerCase();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const { alpha = false } = opt;\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'colorToHex',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    if (cachedResult.isNull) {\n      return null;\n    }\n    return cachedResult.item as string;\n  }\n  let hex;\n  opt.nullable = true;\n  if (alpha) {\n    opt.format = 'hexAlpha';\n    hex = resolveColor(value, opt);\n  } else {\n    opt.format = 'hex';\n    hex = resolveColor(value, opt);\n  }\n  if (isString(hex)) {\n    setCache(cacheKey, hex);\n    return hex;\n  }\n  setCache(cacheKey, null);\n  return null;\n};\n\n/**\n * convert color to hsl\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels - [h, s, l, alpha]\n */\nexport const colorToHsl = (value: string, opt: Options = {}): ColorChannels => {\n  if (isString(value)) {\n    const resolvedValue = preProcess(value, opt);\n    if (resolvedValue instanceof NullObject) {\n      return [0, 0, 0, 0];\n    }\n    value = resolvedValue.toLowerCase();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'colorToHsl',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    return cachedResult.item as ColorChannels;\n  }\n  opt.format = 'hsl';\n  const hsl = convertColorToHsl(value, opt) as ColorChannels;\n  setCache(cacheKey, hsl);\n  return hsl;\n};\n\n/**\n * convert color to hwb\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels - [h, w, b, alpha]\n */\nexport const colorToHwb = (value: string, opt: Options = {}): ColorChannels => {\n  if (isString(value)) {\n    const resolvedValue = preProcess(value, opt);\n    if (resolvedValue instanceof NullObject) {\n      return [0, 0, 0, 0];\n    }\n    value = resolvedValue.toLowerCase();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'colorToHwb',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    return cachedResult.item as ColorChannels;\n  }\n  opt.format = 'hwb';\n  const hwb = convertColorToHwb(value, opt) as ColorChannels;\n  setCache(cacheKey, hwb);\n  return hwb;\n};\n\n/**\n * convert color to lab\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels - [l, a, b, alpha]\n */\nexport const colorToLab = (value: string, opt: Options = {}): ColorChannels => {\n  if (isString(value)) {\n    const resolvedValue = preProcess(value, opt);\n    if (resolvedValue instanceof NullObject) {\n      return [0, 0, 0, 0];\n    }\n    value = resolvedValue.toLowerCase();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'colorToLab',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    return cachedResult.item as ColorChannels;\n  }\n  const lab = convertColorToLab(value, opt) as ColorChannels;\n  setCache(cacheKey, lab);\n  return lab;\n};\n\n/**\n * convert color to lch\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels - [l, c, h, alpha]\n */\nexport const colorToLch = (value: string, opt: Options = {}): ColorChannels => {\n  if (isString(value)) {\n    const resolvedValue = preProcess(value, opt);\n    if (resolvedValue instanceof NullObject) {\n      return [0, 0, 0, 0];\n    }\n    value = resolvedValue.toLowerCase();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'colorToLch',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    return cachedResult.item as ColorChannels;\n  }\n  const lch = convertColorToLch(value, opt) as ColorChannels;\n  setCache(cacheKey, lch);\n  return lch;\n};\n\n/**\n * convert color to oklab\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels - [l, a, b, alpha]\n */\nexport const colorToOklab = (\n  value: string,\n  opt: Options = {}\n): ColorChannels => {\n  if (isString(value)) {\n    const resolvedValue = preProcess(value, opt);\n    if (resolvedValue instanceof NullObject) {\n      return [0, 0, 0, 0];\n    }\n    value = resolvedValue.toLowerCase();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'colorToOklab',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    return cachedResult.item as ColorChannels;\n  }\n  const lab = convertColorToOklab(value, opt) as ColorChannels;\n  setCache(cacheKey, lab);\n  return lab;\n};\n\n/**\n * convert color to oklch\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels - [l, c, h, alpha]\n */\nexport const colorToOklch = (\n  value: string,\n  opt: Options = {}\n): ColorChannels => {\n  if (isString(value)) {\n    const resolvedValue = preProcess(value, opt);\n    if (resolvedValue instanceof NullObject) {\n      return [0, 0, 0, 0];\n    }\n    value = resolvedValue.toLowerCase();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'colorToOklch',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    return cachedResult.item as ColorChannels;\n  }\n  const lch = convertColorToOklch(value, opt) as ColorChannels;\n  setCache(cacheKey, lch);\n  return lch;\n};\n\n/**\n * convert color to rgb\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels - [r, g, b, alpha]\n */\nexport const colorToRgb = (value: string, opt: Options = {}): ColorChannels => {\n  if (isString(value)) {\n    const resolvedValue = preProcess(value, opt);\n    if (resolvedValue instanceof NullObject) {\n      return [0, 0, 0, 0];\n    }\n    value = resolvedValue.toLowerCase();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'colorToRgb',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    return cachedResult.item as ColorChannels;\n  }\n  const rgb = convertColorToRgb(value, opt) as ColorChannels;\n  setCache(cacheKey, rgb);\n  return rgb;\n};\n\n/**\n * convert color to xyz\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels - [x, y, z, alpha]\n */\nexport const colorToXyz = (value: string, opt: Options = {}): ColorChannels => {\n  if (isString(value)) {\n    const resolvedValue = preProcess(value, opt);\n    if (resolvedValue instanceof NullObject) {\n      return [0, 0, 0, 0];\n    }\n    value = resolvedValue.toLowerCase();\n  } else {\n    throw new TypeError(`${value} is not a string.`);\n  }\n  const cacheKey: string = createCacheKey(\n    {\n      namespace: NAMESPACE,\n      name: 'colorToXyz',\n      value\n    },\n    opt\n  );\n  const cachedResult = getCache(cacheKey);\n  if (cachedResult instanceof CacheItem) {\n    return cachedResult.item as ColorChannels;\n  }\n  let xyz;\n  if (value.startsWith('color(')) {\n    [, ...xyz] = parseColorFunc(value, opt) as ComputedColorChannels;\n  } else {\n    [, ...xyz] = parseColorValue(value, opt) as ComputedColorChannels;\n  }\n  setCache(cacheKey, xyz);\n  return xyz as ColorChannels;\n};\n\n/**\n * convert color to xyz-d50\n * @param value - CSS color value\n * @param [opt] - options\n * @returns ColorChannels - [x, y, z, alpha]\n */\nexport const colorToXyzD50 = (\n  value: string,\n  opt: Options = {}\n): ColorChannels => {\n  opt.d50 = true;\n  return colorToXyz(value, opt);\n};\n\n/* convert */\nexport const convert = {\n  colorToHex,\n  colorToHsl,\n  colorToHwb,\n  colorToLab,\n  colorToLch,\n  colorToOklab,\n  colorToOklch,\n  colorToRgb,\n  colorToXyz,\n  colorToXyzD50,\n  numberToHex\n};\n","/*!\n * CSS color - Resolve, parse, convert CSS color.\n * @license MIT\n * @copyright asamuzaK (Kazz)\n * @see {@link https://github.com/asamuzaK/cssColor/blob/main/LICENSE}\n */\n\nimport { cssCalc } from './js/css-calc';\nimport { isGradient, resolveGradient } from './js/css-gradient';\nimport { cssVar } from './js/css-var';\nimport {\n  extractDashedIdent,\n  isColor,\n  resolveLengthInPixels,\n  splitValue\n} from './js/util';\n\nexport { convert } from './js/convert';\nexport { resolve } from './js/resolve';\n/* utils */\nexport const utils = {\n  cssCalc,\n  cssVar,\n  extractDashedIdent,\n  isColor,\n  isGradient,\n  resolveGradient,\n  resolveLengthInPixels,\n  splitValue\n};\n"],"names":["ParseError","e","t","o","ParseErrorWithToken","r","stringify","n","i","s","checkIfFourCodePointsWouldStartCDO","isDigitCodePoint","isUppercaseLetterCodePoint","isLowercaseLetterCodePoint","isHexDigitCodePoint","isLetterCodePoint","isIdentStartCodePoint","isNonASCII_IdentCodePoint","isIdentCodePoint","isSurrogate","isNewLine","isWhitespace","checkIfTwoCodePointsAreAValidEscape","checkIfThreeCodePointsWouldStartAnIdentSequence","checkIfThreeCodePointsWouldStartANumber","checkIfTwoCodePointsStartAComment","checkIfThreeCodePointsWouldStartCDC","c","a","u","mirrorVariantType","mirrorVariant","consumeComment","consumeEscapedCodePoint","consumeIdentSequence","consumeHashToken","consumeNumber","consumeNumericToken","consumeWhiteSpace","Reader","consumeStringToken","checkIfCodePointsMatchURLIdent","consumeBadURL","consumeUrlToken","consumeIdentLikeToken","checkIfThreeCodePointsWouldStartAUnicodeRange","consumeUnicodeRangeToken","tokenize","tokenizer","d","p","noop","mutateUnit","serializeIdent","insertEscapedCodePoint","insertEscapedCharacter","isToken","isTokenNumeric","isTokenWhiteSpaceOrComment","isTokenComma","isTokenComment","isTokenDelim","isTokenDimension","isTokenEOF","isTokenFunction","isTokenHash","isTokenIdent","isTokenNumber","isTokenPercentage","isTokenWhitespace","isTokenOpenParen","isTokenCloseParen","isTokenOpenSquare","isTokenOpenCurly","f","walkerIndexGenerator","consumeComponentValue","consumeSimpleBlock","consumeFunction","consumeWhitespace","l","TokenNode","ContainerNodeBaseClass","FunctionNode","h","m","consumeAllCommentsAndWhitespace","SimpleBlockNode","WhitespaceNode","CommentNode","parseComponentValue","parseCommaSeparatedListOfComponentValues","k","forEach","walk","replaceComponentValues","isSimpleBlockNode","isFunctionNode","isWhitespaceNode","isCommentNode","isWhiteSpaceOrCommentNode","isTokenNode","E","toLowerCaseAZ","I","S","y","M","T","x","P","O","W","L","U","$","Z","z","q","G","convertUnit","v","toCanonicalUnit","addition","C","g","division","isCalculation","solve","multiplication","resolveGlobalsAndConstants","unary","D","resultToCalculation","dimensionToCalculation","percentageToCalculation","numberToCalculation","solveACos","solveASin","solveATan","isDimensionOrNumber","arrayOfSameNumeric","twoOfSameNumeric","solveATan2","solveAbs","solveClamp","solveCos","solveExp","solveHypot","solveMax","solveMin","solveMod","solvePow","solveRem","solveRound","solveSign","solveSin","solveSqrt","solveTan","subtraction","solveLog","R","isNone","V","solveRandom","sfc32","crc32","j","singleNodeSolver","twoCommaSeparatedNodesSolver","calc$1","A","calcWrapper","maxWrapper","variadicNodesSolver","parseRandomValueSharing","variadicArguments","Y","N","B","singleArgument","twoCommaSeparatedArguments","patchNaN","patchInfinity","patchMinusZero","patchPrecision","patchCanonicalUnit","patchCalcResult","tokenizeGlobals","F","calc","calcFromComponentValues","b","w","_","defaultPerf","warned","PROCESS","emitWarning","msg","type","code","fn","AC","AS","warnACPolyfill","reason","printACPolyfillWarning","shouldWarn","isPosInt","getUintArray","max","ZeroArray","size","Stack","#constructing","HeapCls","LRUCache","#max","#maxSize","#dispose","#onInsert","#disposeAfter","#fetchMethod","#memoMethod","#perf","#size","#calculatedSize","#keyMap","#keyList","#valList","#next","#prev","#head","#tail","#free","#disposed","#sizes","#starts","#ttls","#autopurgeTimers","#hasDispose","#hasFetchMethod","#hasDisposeAfter","#hasOnInsert","#isBackgroundFetch","index","options","context","#backgroundFetch","#moveToTail","#indexes","#rindexes","#isStale","ttl","ttlResolution","ttlAutopurge","updateAgeOnGet","updateAgeOnHas","allowStale","dispose","onInsert","disposeAfter","noDisposeOnSet","noUpdateTTL","maxSize","maxEntrySize","sizeCalculation","fetchMethod","memoMethod","noDeleteOnFetchRejection","noDeleteOnStaleGet","allowStaleOnFetchRejection","allowStaleOnFetchAbort","ignoreFetchAbort","perf","UintArray","#initializeSizeTracking","#initializeTTLTracking","key","ttls","starts","purgeTimers","#setItemTTL","start","#delete","#updateItemAge","#statusTTL","status","cachedNow","getNow","age","sizes","#removeItemSize","#requireSize","#addItemSize","#evict","_i","_s","_st","_k","_v","#isValidIndex","getOptions","value","thisp","deleted","entry","remain","arr","setOptions","oldVal","oldValue","dt","task","val","free","head","hasOptions","peekOptions","ac","signal","fetchOpts","cb","updateCache","aborted","ignoreAbort","fetchFail","bf","vl","eb","er","allowStaleAborted","noDelete","pcall","res","rej","fmp","fetchOptions","forceRefresh","stale","isStale","staleVal","memoOptions","vv","fetching","#connect","#clear","pi","ni","isString","isStringOrNumber","_DIGIT","_COMPARE","_EXPO","_SIGN","_STEP","_TRIG","_MATH","_CALC","_VAR","ANGLE","LENGTH","NUM","NUM_POSITIVE","NONE","PCT","SYN_FN_CALC","SYN_FN_MATH_START","SYN_FN_VAR","SYN_FN_VAR_START","_ALPHA","_ALPHA_LV3","_COLOR_FUNC","_COLOR_KEY","_CS_HUE","_CS_HUE_ARC","_NUM_ANGLE","_NUM_ANGLE_NONE","_NUM_PCT_NONE","CS_HUE","CS_HUE_CAPT","CS_LAB","CS_LCH","CS_SRGB","CS_RGB","CS_XYZ","CS_RECT","CS_MIX","FN_COLOR","FN_LIGHT_DARK","FN_MIX","FN_REL","FN_REL_CAPT","FN_VAR","SYN_FN_COLOR","SYN_FN_LIGHT_DARK","SYN_FN_REL","SYN_HSL","SYN_HSL_LV3","SYN_LCH","SYN_MOD","SYN_RGB_LV3","SYN_COLOR_TYPE","SYN_MIX_PART","SYN_MIX","SYN_MIX_CAPT","VAL_COMP","VAL_MIX","VAL_SPEC","NAMESPACE","PPTH","HALF","DUO","TRIA","QUAD","OCT","DEC","DOZ","HEX","SEXA","DEG_HALF","DEG","MAX_PCT","MAX_RGB","POW_SQR","POW_CUBE","POW_LINEAR","LINEAR_COEF","LINEAR_OFFSET","LAB_L","LAB_A","LAB_B","LAB_EPSILON","LAB_KAPPA","D50","MATRIX_D50_TO_D65","MATRIX_D65_TO_D50","MATRIX_L_RGB_TO_XYZ","MATRIX_XYZ_TO_L_RGB","MATRIX_XYZ_TO_LMS","MATRIX_LMS_TO_XYZ","MATRIX_OKLAB_TO_LMS","MATRIX_LMS_TO_OKLAB","MATRIX_P3_TO_XYZ","MATRIX_REC2020_TO_XYZ","MATRIX_A98_TO_XYZ","MATRIX_PROPHOTO_TO_XYZ_D50","REG_COLOR","REG_CS_HUE","REG_CS_XYZ","REG_CURRENT","REG_FN_COLOR","REG_HSL","REG_HWB","REG_LAB","REG_LCH","REG_MIX","REG_MIX_CAPT","REG_MIX_NEST","REG_OKLAB","REG_OKLCH","REG_SPEC","NAMED_COLORS","cacheInvalidColorValue","cacheKey","format","nullable","setCache","NullObject","resolveInvalidColorValue","validateColorComponents","opt","alpha","minLength","maxLength","minRange","maxRange","validateRange","transformMatrix","mtx","vct","skip","r1c1","r1c2","r1c3","r2c1","r2c2","r2c3","r3c1","r3c2","r3c3","v1","v2","v3","p1","p2","p3","normalizeColorComponents","colorA","colorB","validatedColorA","validatedColorB","numberToHexString","hex","angleToDeg","angle","GRAD","RAD","reg","unit","deg","parseAlpha","parseHexAlpha","alphaMap","transformRgbToLinearRgb","rgb","rr","gg","bb","COND_POW","transformRgbToXyz","transformLinearRgbToRgb","round","transformXyzToRgb","xyz","transformXyzToHsl","min","transformXyzToHwb","wh","bk","transformXyzToOklab","xyzLms","lPct","transformXyzToOklch","transformXyzD50ToRgb","xyzD65","transformXyzD50ToLab","xyzD50","f0","f1","f2","transformXyzD50ToLch","convertRgbToHex","aa","convertHexToRgb","convertHexToLinearRgb","convertHexToXyz","parseRgb","v4","roundToPrecision","parseHsl","sa","rk","gk","parseHwb","factor","parseLab","COEF_PCT","fl","fa","fb","powFl","powFa","powFb","parseLch","parseOklab","parseOklch","cc","parseColorFunc","colorSpace","d50","cs","linearRgb","ALPHA","BETA","REC_COEF","cl","POW_A98","parseColorValue","resolveColorValue","createCacheKey","cachedResult","getCache","CacheItem","cachedItem","resolveColorFunc","convertColorToLinearRgb","convertColorToRgb","convertColorToXyz","convertColorToHsl","convertColorToHwb","convertColorToLab","convertColorToLch","convertColorToOklab","convertColorToOklch","resolveColorMix","nestedItems","hueArc","pctA","pctB","parsed","regColorSpace","items","item","colorParts","csPart","partA","partB","splitValue","colorPartA","pctPartA","colorPartB","pctPartB","specifiedColorA","resolveColor","specifiedColorB","resolvedColorA","resolvedColorB","itemA","itemB","regA","regB","itemPart","itemPartCapt","regItemPart","regLastItem","regColorPart","pA","pB","valueA","valueB","rgbA","rgbB","rrA","ggA","bbA","aaA","rrB","ggB","bbB","aaB","rNone","gNone","bNone","alphaNone","rA","gA","bA","alphaA","rB","gB","bB","alphaB","factorA","factorB","xyzA","xyzB","xxA","yyA","zzA","xxB","yyB","zzB","xNone","yNone","zNone","xA","yA","zA","xB","yB","zB","hslA","hslB","hhA","ssA","llA","hhB","ssB","llB","hA","sA","lA","hB","sB","lB","interpolateHue","lchA","lchB","ccA","ccB","lNone","cNone","hNone","cA","cB","labA","labB","alA","alB","aNone","aA","aB","aO","bO","PAREN_CLOSE","COMMENT","EOF","IDENT","W_SPACE","TokenType","REG_FN_CALC","REG_FN_VAR","resolveCustomProperty","tokens","customProperty","token","restTokens","resolveAsColor","lastValue","isColor","resolvedValue","resolvedItem","resolveVar","cssCalc","parseTokens","values","color","cssVar","multiplyMatrices","D50_to_D65","D65_to_D50","HSL_to_sRGB","HSL_to_sRGB_channel","HWB_to_sRGB","LCH_to_Lab","Lab_to_LCH","Lab_to_XYZ","OKLCH_to_OKLab","OKLab_to_OKLCH","OKLab_to_XYZ","XYZ_to_Lab","compute_f","XYZ_to_OKLab","XYZ_to_lin_P3","XYZ_to_lin_sRGB","gam_2020_channel","gam_sRGB","gam_sRGB_channel","gam_P3","gam_ProPhoto_channel","gam_a98rgb_channel","X","lin_2020_channel","lin_sRGB","lin_sRGB_channel","lin_P3","lin_P3_to_XYZ","lin_ProPhoto_channel","lin_a98rgb_channel","lin_sRGB_to_XYZ","sRGB_to_HSL","sRGB_to_Hue","sRGB_to_XYZ_D50","XYZ_D50_to_sRGB","HSL_to_XYZ_D50","XYZ_D50_to_HSL","HWB_to_XYZ_D50","XYZ_D50_to_HWB","Lab_to_XYZ_D50","XYZ_D50_to_Lab","LCH_to_XYZ_D50","XYZ_D50_to_LCH","OKLab_to_XYZ_D50","XYZ_D50_to_OKLab","OKLCH_to_XYZ_D50","XYZ_D50_to_OKLCH","lin_sRGB_to_XYZ_D50","XYZ_D50_to_lin_sRGB","a98_RGB_to_XYZ_D50","XYZ_D50_to_a98_RGB","P3_to_XYZ_D50","XYZ_D50_to_P3","lin_P3_to_XYZ_D50","XYZ_D50_to_lin_P3","rec_2020_to_XYZ_D50","XYZ_D50_to_rec_2020","ProPhoto_RGB_to_XYZ_D50","XYZ_D50_to_ProPhoto","XYZ_D65_to_XYZ_D50","XYZ_D50_to_XYZ_D65","inGamut","clip","mapGamutRayTrace","rayTraceBox","luminance","contrast_ratio_wcag_2_1","he","me","convertNaNToZero","colorData_to_XYZ_D50","H","pe","colorDataTo","carryForwardMissingComponents","convertPowerlessComponentsToMissingComponents","reducePrecision","normalizeRelativeColorDataChannels","dummyNumberToken","noneToZeroInRelativeColorDataChannels","normalize","Ne","normalize_Color_ChannelValues","be","color$1","ee","ae","ne","re","ie","ce","colorSpaceNameToColorNotation","oe","ve","ge","fe","colorMix","te","colorMixRectangular","colorMixComponents","colorMixPolar","colorMixRectangularPair","fillInMissingComponent","premultiply","interpolate","un_premultiply","colorMixPolarPair","normalizeHue","normalize_legacy_HSL_ChannelValues","normalize_modern_HSL_ChannelValues","threeChannelLegacySyntax","threeChannelSpaceSeparated","hsl","hslCommaSeparated","hslSpaceSeparated","normalize_HWB_ChannelValues","normalize_Lab_ChannelValues","lab","normalize_LCH_ChannelValues","lch","de","namedColor","normalize_OKLab_ChannelValues","oklab","normalize_OKLCH_ChannelValues","oklch","normalize_legacy_sRGB_ChannelValues","normalize_modern_sRGB_ChannelValues","rgbCommaSeparated","rgbSpaceSeparated","XYZ_D50_to_sRGB_Gamut","K","oklch_to_lin_srgb","lin_srgb_to_oklch","contrastColor","le","DELIM","DIM","FUNC","PAREN_OPEN","KEY_NONE","SyntaxFlag","REG_COLOR_CAPT","REG_CS_HSL","REG_CS_CIE","REG_FN_CALC_SUM","REG_FN_MATH_START","REG_FN_REL","REG_FN_REL_CAPT","REG_FN_REL_START","resolveColorChannels","colorChannel","mathFunc","channels","nest","func","precededPct","detail","channel","resolveDimension","channelValues","serializeCalc","extractOriginColor","colorScheme","currentColor","originColor","specifiedOriginColor","resolvedOriginColor","restValue","channelValue","tokenValue","resolveRelativeColor","components","parsedComponents","colorParser","alphaComponent","channelsComponent","colorNotation","syntaxFlags","hasNone","RGB_TRANSPARENT","REG_FN_LIGHT_DARK","light","dark","lightColor","darkColor","scs","resolve","COMMA","delimiter","preserveComment","regDelimiter","str","extractDashedIdent","valueToJsonString","_key","replacedValue","bit","hueA","hueB","arc","absoluteFontSize","relativeFontSize","absoluteLength","relativeLength","resolveLengthInPixels","dimension","callback","em","rem","vh","vw","MAX_CACHE","#isNull","#item","isNull","lruCache","keyData","REG_FN_CALC_NUM","REG_FN_VAR_START","REG_OPERATOR","REG_TYPE_DIM","REG_TYPE_DIM_PCT","REG_TYPE_PCT","Calculator","#hasNum","#numSum","#numMul","#hasPct","#pctSum","#pctMul","#hasDim","#dimSum","#dimSub","#dimMul","#dimDiv","#hasEtc","#etcSum","#etcSub","#etcMul","#etcDiv","valA","unitA","valB","unitB","num","dim","mul","div","sum","sub","sortCalcValues","finalize","end","sortedValues","cal","operator","sortedValue","numValue","strValue","finalizedValues","startIndex","endIndex","slicedValues","serializedValue","serializedCalc","pixelValue","DIM_ANGLE","DIM_ANGLE_PCT","DIM_LEN","DIM_LEN_PCT","DIM_LEN_PCT_POSI","DIM_LEN_POSI","CTR","L_R","T_B","S_E","AXIS_X","AXIS_Y","BLOCK","INLINE","POS_1","POS_2","POS_4","RAD_EXTENT","RAD_SIZE","RAD_SHAPE","FROM_ANGLE","AT_POSITION","TO_SIDE_CORNER","IN_COLOR_SPACE","REG_GRAD","REG_GRAD_CAPT","getGradientType","validateGradientLine","lineSyntax","defaultValues","valid","line","defaultValue","validateColorStopList","list","regColorHint","regDimension","valueTypes","valueList","itemColor","resolvedColor","parseGradient","gradValue","lineOrColorStop","itemList","colorStop","colorStops","gradientLine","validLine","validColorStops","resolveGradient","gradient","colorStopList","isGradient","preProcess","clonedOpt","numberToHex","colorToHex","colorToHsl","colorToHwb","hwb","colorToLab","colorToLch","colorToOklab","colorToOklch","colorToRgb","colorToXyz","colorToXyzD50","convert","utils"],"mappings":"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","x_google_ignoreList":[0,1,2,3,8,9]}
'use strict';function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function e(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function f(a){if(!(a instanceof Array)){a=e(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}function ba(){for(var a=Number(this),b=[],c=a;c<arguments.length;c++)b[c-a]=arguments[c];return b};/*
 lui.js web frame work 1.3.3
 inspired by react and mithril
 L3P3.de 2022
*/
(function(){var h=null,m=!h,n=h,w=0,z=0,A=0,B=m,C=[],D=[],E={},ca={},da={},ea=[],F=[],fa={},G=h,H=m,J=!m,ha=/[A-Z]/g,K=Array,L=Object,ia=L.assign,M=L.keys,ja=L.freeze||function(a){return a},ka=L.isFrozen||function(a){return null===a||"object"!==typeof a},la=document,ma=window,na=ma.performance||Date;
function N(a){return void 0===a&&O("model state must not contain undefined, missing return?"),ka(a)||(ja(a).constructor!==K&&(a.constructor!==L&&O("model state must not contain shit like "+a.constructor.name),a=L.values(a)),a.forEach(N))}function oa(a){a=a.s.component;return a===P?"list":a.name_||a.name||"?"}
function Q(){var a=[],b=n,c=G;if(b){for(a.unshift("$"+(w-1));0!==b[0].m;)a.unshift(1===b[0].m?"hook_map["+("object"===typeof b[0].O?b[0].O.id:b[0].O)+"]":"hook_sub"),b=b[0].W;b=b[0].N}for(;b;)a.unshift(oa(b)+(c?":"+c:"")),c=b.L,b=b.H;return a.join("/")||"-"}function pa(){console.log.apply(console,f(ba.apply(0,arguments)))}function ra(a){var b=ba.apply(1,arguments);pa.apply(null,["lui "+Q()+": "+a].concat(f(b)))}function O(a){throw Error("lui: "+a);}
function sa(a){pa("lui "+a+": error in callback");h=G}function S(a,b,c){try{return a.apply(null,f(b))}catch(d){throw sa(c),d;}}function ta(a,b){a===b||a&&b&&JSON.stringify(M(a))===JSON.stringify(M(b))||O("object keys mismatch")}
function T(a,b,c){n||O("hook called outside of hook context");c&&(c.constructor!==K&&O("deps must be in an array"),0===c.length&&O("deps must not be empty"));b&&0!==n[0].m&&O("hook called outside of component rendering");a!==G&&w<n.length&&(n[w].m!==a&&O("inconsistent hook order"),n[w].l&&ua(n[w].l,c))}function U(a,b){T(G,J,G);a!==V(a,a)&&O(b+" changed between renderings")}function ua(a,b){b?a.length!==b.length&&O("deps length changed"):0<a.length&&O("deps presence changed")}
function va(a){return new Function("a","b","return a!==b&&("+a.join("||")+")")}function P(a){var b=(a=M(a)).join(",");return da[b]||(0===a.length&&O("object empty"),a.some(function(c){return(c.includes("-")||"0123456789".includes(c.charAt(0)))&&O("invalid key: "+c)}),da[b]=va(a.map(function(c){return"a."+c+"!==b."+c})))}function wa(a,b){return ta(a,b),a===b?F:M(a).filter(function(c){return a[c]!==b[c]})}
function xa(a){return a?ea[a.length]||(0===a.length&&O("deps must not be empty"),ea[a.length]=va(a.map(function(b,c){return"a["+c+"]!==b["+c+"]"}))):G}
function W(a,b){var c=h,d=b,p=c.u+1;n=c.A;w=1;c.v=J;if(c.s.component!==P){var g=G;try{g=(0,c.s.component)(c.s.o||fa)}catch(qa){if(qa!==E)throw qa;}var u=c.g;"object"!==typeof g&&O("components need to return child list or null");if(g){u&&(a=u,b=G);var k=g.length,l;"number"!==typeof k&&O("childs must be returned in a list");0===k&&O("returned childs list empty");c.h&&k!==c.h.length&&O("returned childs count changed");var x=c.h||(c.h=(new K(k)).fill(G));do{var r=x[--k];if((l=g[k])&&l!==H){r&&r.s.component!==
l.component&&O("child component changed at "+k);if(m=!r)(x[k]=h=r={s:l,M:l.o&&P(l.o),H:c,u:p,L:k,A:[],h:G,g:G,i:G,v:J}).A[0]={m:0,N:r},W(a,b),r.g&&a.insertBefore(r.i=r.g,b);else if(ta(r.s.o,l.o),l.o&&r.M(r.s.o,l.o))(h=r).s=l,W(a,b);r.i&&(b=r.i)}else r&&(X(r,a),x[k]=G)}while(0<k)}else if(c.h){p=e(c.h);for(g=p.next();!g.done;g=p.next())(g=g.value)&&X(g,a);c.h=G}u||(c.i=b!==d?b:G)}else{g=c.s.o;u=g.component;var v=g.Z;g=g.o;"object"===typeof v&&v&&v.constructor===K||O("list_data must be an array");"object"!==
typeof g&&O("props must be an object");U(u,"item component");U(g&&M(g).join(","),"common props");k=v.length;r=H;if(!(0>=V(k,k)+k)){l=Y();x={};var R=[],I;if(I=0<k){I="object"===typeof v[0];var q=Y();q.U||(v[0]!==G&&["object","string","number"].includes(q.U=typeof v[0])||O("item type invalid"),I&&(!["string","number"].includes(q.$=typeof v[0].id)&&O("item id type invalid"),q.keys=M(v[0]).join(",")));for(var t=e(v),y=t.next();!y.done;y=t.next())y=y.value,y===G&&O("item is null"),typeof y!==q.U&&O("item type changed"),
I&&(typeof y.id!==q.$&&O("item id type changed"),M(y).join(",")!==q.keys&&O("item keys differ of "+y.id));v=e(v);for(y=v.next();!y.done;y=v.next())q=y.value,t=I?q.id:q,t in x&&O("item key not unique: "+t),x[t]=q,R.push(t)}k||Y();if(l.K){r=g&&l.M(g,l.T);v=e(l.P);for(q=v.next();!q.done;q=v.next())q=q.value,q in x||(X(l.K[q],a),delete l.K[q]);l.T=g;l.P=R}else l.K={},l.Y=I?P(x[R[0]]):G,l.P=R,l.M=(l.T=g)&&P(g);for(v=c.h=new K(k);0<k;){q=R[--k];t=l.K[q];if(m=!t)(l.K[q]=h=t={s:{component:u,o:ia({I:x[q]},
g)},M:G,H:c,u:p,L:k,A:[],h:G,g:G,i:G,v:J}).A[0]={m:0,N:t},W(a,b),t.g&&a.insertBefore(t.i=t.g,b);else if((y=ya(t))&&y.nextSibling!==b&&za(t,a,b),r||I&&l.Y(x[q],t.s.o.I))(h=t).s.o=ia({I:x[q]},g),W(a,b);(v[t.L=k]=t).i&&(b=t.i)}c.i=b!==d?b:G}}}
function X(a,b){b&&a.g&&(b.removeChild(a.g),b=G);if(a.h)for(var c=e(a.h),d=c.next();!d.done;d=c.next())(d=d.value)&&X(d,b);b=a.A;for(d=b.length;1<d;)switch((c=b[--d]).m){case 3:c.B&&c.B.apply(c,f(c.l));break;case 4:c.l=F}if(a.v){var p,g;(!(g=C[p=a.u])||0>(p=g.indexOf(a)))&&(!(g=D[p])||0>(p=g.indexOf(a)))||g.splice(p,1)}}function ya(a){if(a.g)return a.g;var b;a=(b=a.h)?b.length:0;for(var c,d;0<a;)if((d=b[--a])&&(c=ya(d)))return c;return G}
function za(a,b,c){if(a.g)return b.insertBefore(a.g,c),a.g;if(a.i){var d=a.h.length;do a.h[--d]&&(c=za(a.h[d],b,c));while(0<d)}return c}function Aa(a){for(;0!==a[0].m;){if(!a[0].X.V)return G;a[0].X.V=J;a=a[0].W}return a[0].N}function Ba(a){return(a=Aa(a))&&!a.v&&(a.v=H,C[a.u]?C[a.u].push(a):C[a.u]=[a],B||Z())}function Y(a){return T(6,J,G),(w<n.length?n[w++]:n[w++]={m:6,j:void 0===a?{}:a}).j}function V(a,b){return T(9,J,G),w<n.length?(b=n[w].j,n[w++].j=a):n[w++]={m:9,j:a},b}
function Ca(a){"object"===typeof a&&a||O("object required");var b=V(a,G);return b?wa(b,a):M(a)}
function Da(a){U(!a,"attributes presence");var b=h.g;if(a){for(var c=e(Ca(a)),d=c.next();!d.done;d=c.next())switch(d=d.value,1<d.length&&d.charAt(0).toLowerCase()!==d.charAt(0)&&O("capital prop: "+d),d.charCodeAt(0)){case 70:"object"===typeof a.F&&a.F||O("invalid css flags");b.className=M(a.F).filter(function(p){return a.F[p]}).join(" ");continue;case 82:"function"!==typeof a.R&&O("invalid ref"),a.R(b);case 67:case 68:case 83:continue;default:97>d.charCodeAt(0)&&O("invalid prop: "+d),b[d]=a[d]}U(!a.D,
"dataset presence");if(a.D)for(c=e(Ca(a.D)),d=c.next();!d.done;d=c.next())d=d.value,b.setAttribute("data-"+d.replace(ha,"-$&").toLowerCase(),a.D[d]);U(!a.S,"style presence");if(a.S)for(c=e(Ca(a.S)),d=c.next();!d.done;d=c.next())d=d.value,b.style[d]=a.S[d]}return b}function Ea(a,b,c){return"string"===typeof a&&O("component expected, use node_dom instead"),c&&c.constructor!==K&&O("invalid childs type"),{component:a,o:b?c?(b.C=c,b):b:c?{C:c}:G}}
function Z(){m=0>=z;z=na.now();A&&cancelAnimationFrame(A);B=H;A=0;for(var a,b=0;(a=C).length;){10<++b&&O("rerender loop detected");C=[];a=e(a);for(var c=a.next();!c.done;c=a.next())if(c=c.value){c=e(c);for(var d=c.next();!d.done;d=c.next())if(h=d.value,h.v){if(h.g)W(G,G);else{var p,g=G;d=h.i;for(var u=h,k=h;!(p=(u=u.H).g););do for(var l=k.L,x=(k=k.H).h,r=x.length;++l<r&&x[l]&&!(g=x[l].i););while(!g&&k!==u);k=h;W(p,g);if(k.i!==d)for(;!(k=k.H).g;){d=G;p=e(k.h);for(g=p.next();!(g.done||(g=g.value)&&
(d=g.i));g=p.next());if(d===k.i)break;k.i=d}}m=J}}}B=J;h=n=G;D.length&&(C=D,D=a,Fa())}function Fa(){return A||(A=requestAnimationFrame(Z))}
function Ga(a){var b=E[a];if(!b){var c=a.indexOf("[");b=0>c?a.substr(0):a.substr(0,c);(0===b.length||b!==b.toLowerCase()||b.includes(" ")||b.includes("#")||b.includes("."))&&O("dom: invalid tag");E[a]=b=la.createElement(b);if(0<c)for(!a.endsWith("]")&&O("dom: ] missing"),a=e(a.substring(c+1,a.length-1).split("][")),c=a.next();!c.done;c=a.next()){c=c.value;!c&&O("dom: empty attribute");(c.includes("[")||c.includes("]"))&&O("dom: attributes screwed up");var d=c.indexOf("=");c.includes(" ")&&(0>d||c.indexOf(" ")<
d)&&O("dom: space in attribute name");0<d?b[c.substr(0,d)]=c.substr(d+1):b[c]=H}}return b}function Ha(a){var b=ca[a];if(!b){var c=Ga(a);ca[a]=b=function(d){return m&&(h.g=c.cloneNode(H)),Da(d),d&&d.C||G};b.name_="$"+a}return b}ma.onerror=function(){return h&&ra("error in component"),C=D=[],J};var Ia=K.prototype;Ia.fill||(Ia.fill=function(a){for(var b=this.length,c=0;c<b;++c)this[c]=a;return this});define({defer:function(){return h&&O("defer while rendering"),B=H,Fa()},defer_end:function(){return h&&O("defer_end while rendering"),B||O("nothing was deferred"),Z()},hook_assert:function(a){T(G,J,G);if(!a)throw E;},hook_async:function(a,b,c){T(4,J,b);var d,p=Q();if((w<n.length?(d=n[w++],J):d=n[w++]={m:4,J:xa(b),l:b||F,j:G})||b&&d.J(d.l,b)&&(d.l=b)){void 0!==c&&(d.j=c);var g=n;a.apply(null,f(d.l)).then(function(u){return d.j!==u&&d.l===b&&(d.j=u,Ba(g))}).catch(function(u){sa(p);throw u;})}return d.j},
hook_dom:function(a,b){return T(G,H,G),h.g?m&&O("hook_dom called twice"):m||O("hook_dom skipped before"),b&&(b.C&&O("hook_dom cannot have childs"),b.R&&O("hook_dom cannot have a ref")),m&&(h.g=Ga(a).cloneNode(H)),Da(b||G)},hook_effect:function(a,b){T(3,J,b);if(w>=n.length)n[w]={m:3,J:xa(b),l:b=b||F,B:a.apply(null,f(b))||G};else if(b){var c=n[w];c.J(c.l,b)&&(c.B&&c.B.apply(c,f(c.l)),c.B=a.apply(null,f(c.l=b))||G)}n[w].B&&n[w].B.then&&O("effect function must be synchronous");++w},hook_memo:function(a,
b){return T(8,J,b),w>=n.length?(n[w++]={m:8,J:xa(b),l:b=b||F,j:a.apply(null,f(b))}).j:b&&n[w].J(n[w].l,b)?n[w].j=a.apply(null,f(n[w++].l=b)):n[w++].j},hook_model:function(a){T(10,J,G);"object"===typeof a&&a||O("mutations object required");"function"!==typeof a.init&&O("init mutation required for initial value");if(w<n.length)return n[w++].j;var b=n,c=Q(),d=[S(a.init,[G],c+" -> #init"),{}];S(N,[d[0]],c+" -> #init");for(var p={},g=e(M(a)),u=g.next();!u.done;p={G:p.G},u=g.next())p.G=u.value,d[1][p.G]=
function(k){return function(l){l=S(a[k.G],[d[0],l],c+" -> #"+k.G);d[0]!==l&&(S(N,[l],c+" -> #"+k.G),d[0]=l,Ba(b))}}(p);n[w++]={m:10,j:d};return d},hook_prev:V,hook_rerender:function(){T(G,J,G);var a=Aa(n);a&&(a.v=H,D[a.u]?D[a.u].push(a):D[a.u]=[a])},hook_state:function(a){T(5,J,G);if(w<n.length)return n[w++].j;var b=n,c=[a,function(d){c[0]!==d&&(c[0]=d,Ba(b))},function(){return c[0]}];n[w++]={m:5,j:c};return c},hook_static:Y,init:function(a,b){function c(){return(!(d=a())||2!==d.length)&&O("root component must return [props, childs]"),
U(!d[0],"attributes presence"),d[0]!==G&&("object"!==typeof d[0]&&O("invalid props type"),ta(V(d[0],d[0]),d[0]),d[0].C&&O("root childs must be in second return value")),Da(d[0]),d[1]}b||O("no root element specified");b.lui&&O("root element already mounted");b.lui=H;"function"!==typeof a&&O("no init function specified");var d;b.innerHTML="";c.name_="$root";(h={s:{component:c,o:G},M:G,H:G,u:0,L:0,A:[],h:G,g:b,i:b,v:H}).A[0]={m:0,N:h};C[0]=[h];h=n=G;Z()},node:Ea,node_dom:function(a,b,c){return Ea(Ha(a),
b,c)},node_map:function(a,b,c){return Ea(P,{component:a,Z:b,o:c||G})},now:function(){return z}})})()
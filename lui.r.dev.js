'use strict';function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function e(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function f(a){if(!(a instanceof Array)){a=e(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}function ba(){for(var a=Number(this),b=[],c=a;c<arguments.length;c++)b[c-a]=arguments[c];return b};/*
 lui.js web frame work 1.3.2
 inspired by react and mithril
 L3P3.de 2022
*/
(function(){var h=null,m=!h,n=h,w=0,z=0,A=0,B=m,C=[],D=[],E={},ca={},da={},ea=[],F=[],fa={},G=h,I=m,J=!m,ha=/[A-Z]/g,K=Array,ia=Object,ja=ia.assign,L=ia.keys,ka=document,la=window,ma=la.performance||Date;function na(a){a=a.s.v;return a===M?"list":a.name_||a.name||"?"}
function N(){var a=[],b=n,c=G;if(b){for(a.unshift("$"+(w-1));0!==b[0].m;)a.unshift(1===b[0].m?"hook_map["+("object"===typeof b[0].P?b[0].P.id:b[0].P)+"]":"hook_sub"),b=b[0].X;b=b[0].O}for(;b;)a.unshift(na(b)+(c?":"+c:"")),c=b.M,b=b.H;return a.join("/")||"-"}function pa(){console.log.apply(console,f(ba.apply(0,arguments)))}function qa(a){var b=ba.apply(1,arguments);pa.apply(null,["lui "+N()+": "+a].concat(f(b)))}function O(a){throw Error("lui: "+a);}
function ra(a){pa("lui "+a+": error in callback")}function sa(a,b,c){try{return a.apply(null,f(b))}catch(d){throw ra(c),d;}}function P(a,b){a===b||a&&b&&JSON.stringify(L(a))===JSON.stringify(L(b))||O("object keys mismatch")}
function R(a,b,c){n||O("hook called outside of hook context");c&&(c.constructor!==K&&O("deps must be in an array"),0===c.length&&O("deps must not be empty"));b&&0!==n[0].m&&O("hook called outside of component rendering");a!==G&&w<n.length&&(n[w].m!==a&&O("inconsistent hook order"),n[w].l&&ta(n[w].l,c))}function S(a,b){R(G,J,G);a!==T(a,a)&&O(b+" changed between renderings")}function ta(a,b){b?a.length!==b.length&&O("deps length changed"):0<a.length&&O("deps presence changed")}
function ua(a){return new Function("a","b","return a!==b&&("+a.join("||")+")")}function M(a){var b=(a=L(a)).join(",");return da[b]||(0===a.length&&O("object empty"),a.some(function(c){return(c.includes("-")||"0123456789".includes(c.charAt(0)))&&O("invalid key: "+c)}),da[b]=ua(a.map(function(c){return"a."+c+"!==b."+c})))}function va(a,b){return P(a,b),a===b?F:L(a).filter(function(c){return a[c]!==b[c]})}
function U(a){return a?ea[a.length]||(0===a.length&&O("deps must not be empty"),ea[a.length]=ua(a.map(function(b,c){return"a["+c+"]!==b["+c+"]"}))):G}
function V(a,b){var c=h,d=b,p=c.u+1;n=c.B;w=1;c.A=J;if(c.s.v!==M){var g=G;try{g=(0,c.s.v)(c.s.o||fa)}catch(oa){if(oa!==E)throw oa;}var u=c.g;"object"!==typeof g&&O("components need to return child list or null");if(g){u&&(a=u,b=G);var k=g.length,l;"number"!==typeof k&&O("childs must be returned in a list");0===k&&O("returned childs list empty");c.h&&k!==c.h.length&&O("returned childs count changed");var x=c.h||(c.h=(new K(k)).fill(G));do{var r=x[--k];if((l=g[k])&&l!==I){r&&r.s.v!==l.v&&O("child component changed at "+
k);if(m=!r)(x[k]=h=r={s:l,N:l.o&&M(l.o),H:c,u:p,M:k,B:[],h:G,g:G,i:G,A:J}).B[0]={m:0,O:r},V(a,b),r.g&&a.insertBefore(r.i=r.g,b);else if(P(r.s.o,l.o),l.o&&r.N(r.s.o,l.o))(h=r).s=l,V(a,b);r.i&&(b=r.i)}else r&&(W(r,a),x[k]=G)}while(0<k)}else if(c.h){p=e(c.h);for(g=p.next();!g.done;g=p.next())(g=g.value)&&W(g,a);c.h=G}u||(c.i=b!==d?b:G)}else{g=c.s.o;u=g.v;var v=g.$;g=g.o;"object"===typeof v&&v&&v.constructor===K||O("list_data must be an array");"object"!==typeof g&&O("props must be an object");S(u,"item component");
S(g&&L(g).join(","),"common props");k=v.length;r=I;if(!(0>=T(k,k)+k)){l=X();x={};var Q=[],H;if(H=0<k){H="object"===typeof v[0];var q=X();q.V||(v[0]!==G&&["object","string","number"].includes(q.V=typeof v[0])||O("item type invalid"),H&&(!["string","number"].includes(q.aa=typeof v[0].id)&&O("item id type invalid"),q.keys=L(v[0]).join(",")));for(var t=e(v),y=t.next();!y.done;y=t.next())y=y.value,y===G&&O("item is null"),typeof y!==q.V&&O("item type changed"),H&&(typeof y.id!==q.aa&&O("item id type changed"),
L(y).join(",")!==q.keys&&O("item keys differ of "+y.id));v=e(v);for(y=v.next();!y.done;y=v.next())q=y.value,t=H?q.id:q,t in x&&O("item key not unique: "+t),x[t]=q,Q.push(t)}k||X();if(l.L){r=g&&l.N(g,l.U);v=e(l.T);for(q=v.next();!q.done;q=v.next())q=q.value,q in x||(W(l.L[q],a),delete l.L[q]);l.U=g;l.T=Q}else l.L={},l.Z=H?M(x[Q[0]]):G,l.T=Q,l.N=(l.U=g)&&M(g);for(v=c.h=new K(k);0<k;){q=Q[--k];t=l.L[q];if(m=!t)(l.L[q]=h=t={s:{v:u,o:ja({I:x[q]},g)},N:G,H:c,u:p,M:k,B:[],h:G,g:G,i:G,A:J}).B[0]={m:0,O:t},
V(a,b),t.g&&a.insertBefore(t.i=t.g,b);else if((y=wa(t))&&y.nextSibling!==b&&xa(t,a,b),r||H&&l.Z(x[q],t.s.o.I))(h=t).s.o=ja({I:x[q]},g),V(a,b);(v[t.M=k]=t).i&&(b=t.i)}c.i=b!==d?b:G}}}
function W(a,b){b&&a.g&&(b.removeChild(a.g),b=G);if(a.h)for(var c=e(a.h),d=c.next();!d.done;d=c.next())(d=d.value)&&W(d,b);b=a.B;for(d=b.length;1<d;)switch((c=b[--d]).m){case 3:c.G&&c.G.apply(c,f(c.l));break;case 4:c.l=F}if(a.A){var p,g;(!(g=C[p=a.u])||0>(p=g.indexOf(a)))&&(!(g=D[p])||0>(p=g.indexOf(a)))||g.splice(p,1)}}function wa(a){if(a.g)return a.g;var b;a=(b=a.h)?b.length:0;for(var c,d;0<a;)if((d=b[--a])&&(c=wa(d)))return c;return G}
function xa(a,b,c){if(a.g)return b.insertBefore(a.g,c),a.g;if(a.i){var d=a.h.length;do a.h[--d]&&(c=xa(a.h[d],b,c));while(0<d)}return c}function ya(a){for(;0!==a[0].m;){if(!a[0].Y.W)return G;a[0].Y.W=J;a=a[0].X}return a[0].O}function Y(a){return(a=ya(a))&&!a.A&&(a.A=I,C[a.u]?C[a.u].push(a):C[a.u]=[a],B||Z())}function X(a){return R(6,J,G),(w<n.length?n[w++]:n[w++]={m:6,j:void 0===a?{}:a}).j}function T(a,b){return R(9,J,G),w<n.length?(b=n[w].j,n[w++].j=a):n[w++]={m:9,j:a},b}
function za(a){"object"===typeof a&&a||O("object required");var b=T(a,G);return b?va(b,a):L(a)}
function Aa(a){S(!a,"attributes presence");var b=h.g;if(a){for(var c=e(za(a)),d=c.next();!d.done;d=c.next())switch(d=d.value,1<d.length&&d.charAt(0).toLowerCase()!==d.charAt(0)&&O("capital prop: "+d),d.charCodeAt(0)){case 70:"object"===typeof a.F&&a.F||O("invalid css flags");b.className=L(a.F).filter(function(p){return a.F[p]}).join(" ");continue;case 82:"function"!==typeof a.R&&O("invalid ref"),a.R(b);case 67:case 68:case 83:continue;default:97>d.charCodeAt(0)&&O("invalid prop: "+d),b[d]=a[d]}S(!a.D,
"dataset presence");if(a.D)for(c=e(za(a.D)),d=c.next();!d.done;d=c.next())d=d.value,b.setAttribute("data-"+d.replace(ha,"-$&").toLowerCase(),a.D[d]);S(!a.S,"style presence");if(a.S)for(c=e(za(a.S)),d=c.next();!d.done;d=c.next())d=d.value,b.style[d]=a.S[d]}return b}function Ba(a,b,c){return"string"===typeof a&&O("component expected, use node_dom instead"),c&&c.constructor!==K&&O("invalid childs type"),{v:a,o:b?c?(b.C=c,b):b:c?{C:c}:G}}
function Z(){m=0>=z;z=ma.now();A&&cancelAnimationFrame(A);B=I;A=0;for(var a,b=0;(a=C).length;){10<++b&&O("rerender loop detected");C=[];a=e(a);for(var c=a.next();!c.done;c=a.next())if(c=c.value){c=e(c);for(var d=c.next();!d.done;d=c.next())if(h=d.value,h.A){if(h.g)V(G,G);else{var p,g=G;d=h.i;for(var u=h,k=h;!(p=(u=u.H).g););do for(var l=k.M,x=(k=k.H).h,r=x.length;++l<r&&x[l]&&!(g=x[l].i););while(!g&&k!==u);k=h;V(p,g);if(k.i!==d)for(;!(k=k.H).g;){d=G;p=e(k.h);for(g=p.next();!(g.done||(g=g.value)&&
(d=g.i));g=p.next());if(d===k.i)break;k.i=d}}m=J}}}B=J;h=n=G;D.length&&(C=D,D=a,Ca())}function Ca(){return A||(A=requestAnimationFrame(Z))}
function Da(a){var b=E[a];if(!b){var c=a.indexOf("[");b=0>c?a.substr(0):a.substr(0,c);(0===b.length||b!==b.toLowerCase()||b.includes(" ")||b.includes("#")||b.includes("."))&&O("dom: invalid tag");E[a]=b=ka.createElement(b);if(0<c)for(!a.endsWith("]")&&O("dom: ] missing"),a=e(a.substring(c+1,a.length-1).split("][")),c=a.next();!c.done;c=a.next()){c=c.value;!c&&O("dom: empty attribute");(c.includes("[")||c.includes("]"))&&O("dom: attributes screwed up");var d=c.indexOf("=");c.includes(" ")&&(0>d||c.indexOf(" ")<
d)&&O("dom: space in attribute name");0<d?b[c.substr(0,d)]=c.substr(d+1):b[c]=I}}return b}function Ea(a){var b=ca[a];if(!b){var c=Da(a);ca[a]=b=function(d){return m&&(h.g=c.cloneNode(I)),Aa(d),d&&d.C||G};b.name_="$"+a}return b}la.onerror=function(){return h&&qa("error in component"),C=D=[],J};var Fa=K.prototype;Fa.fill||(Fa.fill=function(a){for(var b=this.length,c=0;c<b;++c)this[c]=a;return this});define({defer:function(){return h&&O("defer while rendering"),B=I,Ca()},defer_end:function(){return h&&O("defer_end while rendering"),B||O("nothing was deferred"),Z()},hook_assert:function(a){R(G,J,G);if(!a)throw E;},hook_async:function(a,b,c){R(4,J,b);var d,p=N();if((w<n.length?(d=n[w++],J):d=n[w++]={m:4,K:U(b),l:b||F,j:G})||b&&d.K(d.l,b)&&(d.l=b)){void 0!==c&&(d.j=c);var g=n;a.apply(null,f(d.l)).then(function(u){return d.j!==u&&d.l===b&&(d.j=u,Y(g))}).catch(function(u){ra(p);throw u;})}return d.j},
hook_dom:function(a,b){return R(G,I,G),h.g?m&&O("hook_dom called twice"):m||O("hook_dom skipped before"),b&&(b.C&&O("hook_dom cannot have childs"),b.R&&O("hook_dom cannot have a ref")),m&&(h.g=Da(a).cloneNode(I)),Aa(b||G)},hook_effect:function(a,b){R(3,J,b);if(w>=n.length)n[w]={m:3,K:U(b),l:b=b||F,G:a.apply(null,f(b))||G};else if(b){var c=n[w];c.K(c.l,b)&&(c.G&&c.G.apply(c,f(c.l)),c.G=a.apply(null,f(c.l=b))||G)}n[w].G&&n[w].G.then&&O("effect function must be synchronous");++w},hook_memo:function(a,
b){return R(8,J,b),w>=n.length?(n[w++]={m:8,K:U(b),l:b=b||F,j:a.apply(null,f(b))}).j:b&&n[w].K(n[w].l,b)?n[w].j=a.apply(null,f(n[w++].l=b)):n[w++].j},hook_model:function(a){R(10,J,G);"object"!==typeof a&&O("mutations object required");"function"!==typeof a.init&&O("init mutation required for initial value");if(w<n.length)return n[w++].j;for(var b=n,c=N(),d=[(0,a.init)(G),{}],p={},g=e(L(a)),u=g.next();!u.done;p={J:p.J},u=g.next())p.J=u.value,d[1][p.J]=function(k){return function(l){l=sa(a[k.J],[d[0],
l],c+" -> #"+k.J);d[0]!==l&&(d[0]=l,Y(b))}}(p);n[w++]={m:10,j:d};return d},hook_prev:T,hook_rerender:function(){R(G,J,G);var a=ya(n);a&&(a.A=I,D[a.u]?D[a.u].push(a):D[a.u]=[a])},hook_state:function(a){R(5,J,G);if(w<n.length)return n[w++].j;var b=n,c=[a,function(d){c[0]!==d&&(c[0]=d,Y(b))},function(){return c[0]}];n[w++]={m:5,j:c};return c},hook_static:X,init:function(a,b){function c(){return(!(d=a())||2!==d.length)&&O("root component must return [props, childs]"),S(!d[0],"attributes presence"),d[0]!==
G&&("object"!==typeof d[0]&&O("invalid props type"),P(T(d[0],d[0]),d[0]),d[0].C&&O("root childs must be in second return value")),Aa(d[0]),d[1]}b||O("no root element specified");b.lui&&O("root element already mounted");b.lui=I;"function"!==typeof a&&O("no init function specified");var d;b.innerHTML="";c.name_="$root";(h={s:{v:c,o:G},N:G,H:G,u:0,M:0,B:[],h:G,g:b,i:b,A:I}).B[0]={m:0,O:h};C[0]=[h];h=n=G;Z()},node:Ba,node_dom:function(a,b,c){return Ba(Ea(a),b,c)},node_map:function(a,b,c){return Ba(M,
{v:a,$:b,o:c||G})},now:function(){return z}})})()